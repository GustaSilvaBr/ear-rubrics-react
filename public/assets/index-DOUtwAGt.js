(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function p1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var vm={exports:{}},tu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function g1(){if(Pv)return tu;Pv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var d in o)d!=="key"&&(u[d]=o[d])}else u=o;return o=u.ref,{$$typeof:r,type:a,key:f,ref:o!==void 0?o:null,props:u}}return tu.Fragment=e,tu.jsx=n,tu.jsxs=n,tu}var Lv;function y1(){return Lv||(Lv=1,vm.exports=g1()),vm.exports}var B=y1(),Em={exports:{}},nu={},Tm={exports:{}},bm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function _1(){return kv||(kv=1,function(r){function e(G,re){var me=G.length;G.push(re);e:for(;0<me;){var ge=me-1>>>1,V=G[ge];if(0<o(V,re))G[ge]=re,G[me]=V,me=ge;else break e}}function n(G){return G.length===0?null:G[0]}function a(G){if(G.length===0)return null;var re=G[0],me=G.pop();if(me!==re){G[0]=me;e:for(var ge=0,V=G.length,X=V>>>1;ge<X;){var ie=2*(ge+1)-1,Z=G[ie],Ee=ie+1,De=G[Ee];if(0>o(Z,me))Ee<V&&0>o(De,Z)?(G[ge]=De,G[Ee]=me,ge=Ee):(G[ge]=Z,G[ie]=me,ge=ie);else if(Ee<V&&0>o(De,me))G[ge]=De,G[Ee]=me,ge=Ee;else break e}}return re}function o(G,re){var me=G.sortIndex-re.sortIndex;return me!==0?me:G.id-re.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,d=f.now();r.unstable_now=function(){return f.now()-d}}var p=[],g=[],_=1,w=null,S=3,x=!1,M=!1,Q=!1,H=!1,q=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function _e(G){for(var re=n(g);re!==null;){if(re.callback===null)a(g);else if(re.startTime<=G)a(g),re.sortIndex=re.expirationTime,e(p,re);else break;re=n(g)}}function oe(G){if(Q=!1,_e(G),!M)if(n(p)!==null)M=!0,k||(k=!0,O());else{var re=n(g);re!==null&&qe(oe,re.startTime-G)}}var k=!1,N=-1,E=5,b=-1;function R(){return H?!0:!(r.unstable_now()-b<E)}function D(){if(H=!1,k){var G=r.unstable_now();b=G;var re=!0;try{e:{M=!1,Q&&(Q=!1,ae(N),N=-1),x=!0;var me=S;try{t:{for(_e(G),w=n(p);w!==null&&!(w.expirationTime>G&&R());){var ge=w.callback;if(typeof ge=="function"){w.callback=null,S=w.priorityLevel;var V=ge(w.expirationTime<=G);if(G=r.unstable_now(),typeof V=="function"){w.callback=V,_e(G),re=!0;break t}w===n(p)&&a(p),_e(G)}else a(p);w=n(p)}if(w!==null)re=!0;else{var X=n(g);X!==null&&qe(oe,X.startTime-G),re=!1}}break e}finally{w=null,S=me,x=!1}re=void 0}}finally{re?O():k=!1}}}var O;if(typeof ne=="function")O=function(){ne(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Ie=I.port2;I.port1.onmessage=D,O=function(){Ie.postMessage(null)}}else O=function(){q(D,0)};function qe(G,re){N=q(function(){G(r.unstable_now())},re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(G){switch(S){case 1:case 2:case 3:var re=3;break;default:re=S}var me=S;S=re;try{return G()}finally{S=me}},r.unstable_requestPaint=function(){H=!0},r.unstable_runWithPriority=function(G,re){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var me=S;S=G;try{return re()}finally{S=me}},r.unstable_scheduleCallback=function(G,re,me){var ge=r.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?ge+me:ge):me=ge,G){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=me+V,G={id:_++,callback:re,priorityLevel:G,startTime:me,expirationTime:V,sortIndex:-1},me>ge?(G.sortIndex=me,e(g,G),n(p)===null&&G===n(g)&&(Q?(ae(N),N=-1):Q=!0,qe(oe,me-ge))):(G.sortIndex=V,e(p,G),M||x||(M=!0,k||(k=!0,O()))),G},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(G){var re=S;return function(){var me=S;S=re;try{return G.apply(this,arguments)}finally{S=me}}}}(bm)),bm}var Uv;function v1(){return Uv||(Uv=1,Tm.exports=_1()),Tm.exports}var Sm={exports:{}},rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function E1(){if(zv)return rt;zv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),w=Symbol.iterator;function S(V){return V===null||typeof V!="object"?null:(V=w&&V[w]||V["@@iterator"],typeof V=="function"?V:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,Q={};function H(V,X,ie){this.props=V,this.context=X,this.refs=Q,this.updater=ie||x}H.prototype.isReactComponent={},H.prototype.setState=function(V,X){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,X,"setState")},H.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function q(){}q.prototype=H.prototype;function ae(V,X,ie){this.props=V,this.context=X,this.refs=Q,this.updater=ie||x}var ne=ae.prototype=new q;ne.constructor=ae,M(ne,H.prototype),ne.isPureReactComponent=!0;var _e=Array.isArray,oe={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function N(V,X,ie,Z,Ee,De){return ie=De.ref,{$$typeof:r,type:V,key:X,ref:ie!==void 0?ie:null,props:De}}function E(V,X){return N(V.type,X,void 0,void 0,void 0,V.props)}function b(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function R(V){var X={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ie){return X[ie]})}var D=/\/+/g;function O(V,X){return typeof V=="object"&&V!==null&&V.key!=null?R(""+V.key):X.toString(36)}function I(){}function Ie(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(I,I):(V.status="pending",V.then(function(X){V.status==="pending"&&(V.status="fulfilled",V.value=X)},function(X){V.status==="pending"&&(V.status="rejected",V.reason=X)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function qe(V,X,ie,Z,Ee){var De=typeof V;(De==="undefined"||De==="boolean")&&(V=null);var Se=!1;if(V===null)Se=!0;else switch(De){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(V.$$typeof){case r:case e:Se=!0;break;case _:return Se=V._init,qe(Se(V._payload),X,ie,Z,Ee)}}if(Se)return Ee=Ee(V),Se=Z===""?"."+O(V,0):Z,_e(Ee)?(ie="",Se!=null&&(ie=Se.replace(D,"$&/")+"/"),qe(Ee,X,ie,"",function(ye){return ye})):Ee!=null&&(b(Ee)&&(Ee=E(Ee,ie+(Ee.key==null||V&&V.key===Ee.key?"":(""+Ee.key).replace(D,"$&/")+"/")+Se)),X.push(Ee)),1;Se=0;var mt=Z===""?".":Z+":";if(_e(V))for(var le=0;le<V.length;le++)Z=V[le],De=mt+O(Z,le),Se+=qe(Z,X,ie,De,Ee);else if(le=S(V),typeof le=="function")for(V=le.call(V),le=0;!(Z=V.next()).done;)Z=Z.value,De=mt+O(Z,le++),Se+=qe(Z,X,ie,De,Ee);else if(De==="object"){if(typeof V.then=="function")return qe(Ie(V),X,ie,Z,Ee);throw X=String(V),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Se}function G(V,X,ie){if(V==null)return V;var Z=[],Ee=0;return qe(V,Z,"","",function(De){return X.call(ie,De,Ee++)}),Z}function re(V){if(V._status===-1){var X=V._result;X=X(),X.then(function(ie){(V._status===0||V._status===-1)&&(V._status=1,V._result=ie)},function(ie){(V._status===0||V._status===-1)&&(V._status=2,V._result=ie)}),V._status===-1&&(V._status=0,V._result=X)}if(V._status===1)return V._result.default;throw V._result}var me=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function ge(){}return rt.Children={map:G,forEach:function(V,X,ie){G(V,function(){X.apply(this,arguments)},ie)},count:function(V){var X=0;return G(V,function(){X++}),X},toArray:function(V){return G(V,function(X){return X})||[]},only:function(V){if(!b(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},rt.Component=H,rt.Fragment=n,rt.Profiler=o,rt.PureComponent=ae,rt.StrictMode=a,rt.Suspense=p,rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=oe,rt.__COMPILER_RUNTIME={__proto__:null,c:function(V){return oe.H.useMemoCache(V)}},rt.cache=function(V){return function(){return V.apply(null,arguments)}},rt.cloneElement=function(V,X,ie){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var Z=M({},V.props),Ee=V.key,De=void 0;if(X!=null)for(Se in X.ref!==void 0&&(De=void 0),X.key!==void 0&&(Ee=""+X.key),X)!k.call(X,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&X.ref===void 0||(Z[Se]=X[Se]);var Se=arguments.length-2;if(Se===1)Z.children=ie;else if(1<Se){for(var mt=Array(Se),le=0;le<Se;le++)mt[le]=arguments[le+2];Z.children=mt}return N(V.type,Ee,void 0,void 0,De,Z)},rt.createContext=function(V){return V={$$typeof:f,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},rt.createElement=function(V,X,ie){var Z,Ee={},De=null;if(X!=null)for(Z in X.key!==void 0&&(De=""+X.key),X)k.call(X,Z)&&Z!=="key"&&Z!=="__self"&&Z!=="__source"&&(Ee[Z]=X[Z]);var Se=arguments.length-2;if(Se===1)Ee.children=ie;else if(1<Se){for(var mt=Array(Se),le=0;le<Se;le++)mt[le]=arguments[le+2];Ee.children=mt}if(V&&V.defaultProps)for(Z in Se=V.defaultProps,Se)Ee[Z]===void 0&&(Ee[Z]=Se[Z]);return N(V,De,void 0,void 0,null,Ee)},rt.createRef=function(){return{current:null}},rt.forwardRef=function(V){return{$$typeof:d,render:V}},rt.isValidElement=b,rt.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:re}},rt.memo=function(V,X){return{$$typeof:g,type:V,compare:X===void 0?null:X}},rt.startTransition=function(V){var X=oe.T,ie={};oe.T=ie;try{var Z=V(),Ee=oe.S;Ee!==null&&Ee(ie,Z),typeof Z=="object"&&Z!==null&&typeof Z.then=="function"&&Z.then(ge,me)}catch(De){me(De)}finally{oe.T=X}},rt.unstable_useCacheRefresh=function(){return oe.H.useCacheRefresh()},rt.use=function(V){return oe.H.use(V)},rt.useActionState=function(V,X,ie){return oe.H.useActionState(V,X,ie)},rt.useCallback=function(V,X){return oe.H.useCallback(V,X)},rt.useContext=function(V){return oe.H.useContext(V)},rt.useDebugValue=function(){},rt.useDeferredValue=function(V,X){return oe.H.useDeferredValue(V,X)},rt.useEffect=function(V,X,ie){var Z=oe.H;if(typeof ie=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Z.useEffect(V,X)},rt.useId=function(){return oe.H.useId()},rt.useImperativeHandle=function(V,X,ie){return oe.H.useImperativeHandle(V,X,ie)},rt.useInsertionEffect=function(V,X){return oe.H.useInsertionEffect(V,X)},rt.useLayoutEffect=function(V,X){return oe.H.useLayoutEffect(V,X)},rt.useMemo=function(V,X){return oe.H.useMemo(V,X)},rt.useOptimistic=function(V,X){return oe.H.useOptimistic(V,X)},rt.useReducer=function(V,X,ie){return oe.H.useReducer(V,X,ie)},rt.useRef=function(V){return oe.H.useRef(V)},rt.useState=function(V){return oe.H.useState(V)},rt.useSyncExternalStore=function(V,X,ie){return oe.H.useSyncExternalStore(V,X,ie)},rt.useTransition=function(){return oe.H.useTransition()},rt.version="19.1.0",rt}var jv;function bp(){return jv||(jv=1,Sm.exports=E1()),Sm.exports}var wm={exports:{}},Un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bv;function T1(){if(Bv)return Un;Bv=1;var r=bp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,_){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:g,implementation:_}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Un.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,_)},Un.flushSync=function(p){var g=f.T,_=a.p;try{if(f.T=null,a.p=2,p)return p()}finally{f.T=g,a.p=_,a.d.f()}},Un.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(p,g))},Un.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},Un.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,w=d(_,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,x=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?a.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:x}):_==="script"&&a.d.X(p,{crossOrigin:w,integrity:S,fetchPriority:x,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Un.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);a.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(p)},Un.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,w=d(_,g.crossOrigin);a.d.L(p,_,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Un.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=d(g.as,g.crossOrigin);a.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(p)},Un.requestFormReset=function(p){a.d.r(p)},Un.unstable_batchedUpdates=function(p,g){return p(g)},Un.useFormState=function(p,g,_){return f.H.useFormState(p,g,_)},Un.useFormStatus=function(){return f.H.useHostTransitionStatus()},Un.version="19.1.0",Un}var qv;function F0(){if(qv)return wm.exports;qv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),wm.exports=T1(),wm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function b1(){if(Hv)return nu;Hv=1;var r=v1(),e=bp(),n=F0();function a(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function d(t){if(u(t)!==t)throw Error(a(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(a(188));return i!==t?null:t}for(var s=t,l=i;;){var h=s.return;if(h===null)break;var m=h.alternate;if(m===null){if(l=h.return,l!==null){s=l;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===s)return d(h),t;if(m===l)return d(h),i;m=m.sibling}throw Error(a(188))}if(s.return!==l.return)s=h,l=m;else{for(var T=!1,A=h.child;A;){if(A===s){T=!0,s=h,l=m;break}if(A===l){T=!0,l=h,s=m;break}A=A.sibling}if(!T){for(A=m.child;A;){if(A===s){T=!0,s=m,l=h;break}if(A===l){T=!0,l=m,s=h;break}A=A.sibling}if(!T)throw Error(a(189))}}if(s.alternate!==l)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:i}function g(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=g(t),i!==null)return i;t=t.sibling}return null}var _=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),ae=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function O(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function Ie(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case H:return"Profiler";case Q:return"StrictMode";case oe:return"Suspense";case k:return"SuspenseList";case b:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case x:return"Portal";case ne:return(t.displayName||"Context")+".Provider";case ae:return(t._context.displayName||"Context")+".Consumer";case _e:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return i=t.displayName||null,i!==null?i:Ie(t.type)||"Memo";case E:i=t._payload,t=t._init;try{return Ie(t(i))}catch{}}return null}var qe=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},ge=[],V=-1;function X(t){return{current:t}}function ie(t){0>V||(t.current=ge[V],ge[V]=null,V--)}function Z(t,i){V++,ge[V]=t.current,t.current=i}var Ee=X(null),De=X(null),Se=X(null),mt=X(null);function le(t,i){switch(Z(Se,i),Z(De,t),Z(Ee,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?uv(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=uv(i),t=cv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ie(Ee),Z(Ee,t)}function ye(){ie(Ee),ie(De),ie(Se)}function Te(t){t.memoizedState!==null&&Z(mt,t);var i=Ee.current,s=cv(i,t.type);i!==s&&(Z(De,t),Z(Ee,s))}function be(t){De.current===t&&(ie(Ee),ie(De)),mt.current===t&&(ie(mt),Xl._currentValue=me)}var Le=Object.prototype.hasOwnProperty,Ue=r.unstable_scheduleCallback,xe=r.unstable_cancelCallback,He=r.unstable_shouldYield,Ne=r.unstable_requestPaint,nt=r.unstable_now,Ye=r.unstable_getCurrentPriorityLevel,Et=r.unstable_ImmediatePriority,Dt=r.unstable_UserBlockingPriority,Vn=r.unstable_NormalPriority,Gt=r.unstable_LowPriority,yn=r.unstable_IdlePriority,zt=r.log,un=r.unstable_setDisableYieldValue,Ge=null,ze=null;function Lt(t){if(typeof zt=="function"&&un(t),ze&&typeof ze.setStrictMode=="function")try{ze.setStrictMode(Ge,t)}catch{}}var Bt=Math.clz32?Math.clz32:Xt,Ti=Math.log,cn=Math.LN2;function Xt(t){return t>>>=0,t===0?32:31-(Ti(t)/cn|0)|0}var Pn=256,er=4194304;function tr(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function bi(t,i,s){var l=t.pendingLanes;if(l===0)return 0;var h=0,m=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var A=l&134217727;return A!==0?(l=A&~m,l!==0?h=tr(l):(T&=A,T!==0?h=tr(T):s||(s=A&~t,s!==0&&(h=tr(s))))):(A=l&~m,A!==0?h=tr(A):T!==0?h=tr(T):s||(s=l&~t,s!==0&&(h=tr(s)))),h===0?0:i!==0&&i!==h&&(i&m)===0&&(m=h&-h,s=i&-i,m>=s||m===32&&(s&4194048)!==0)?i:h}function mr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function ta(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Si(){var t=Pn;return Pn<<=1,(Pn&4194048)===0&&(Pn=256),t}function Za(){var t=er;return er<<=1,(er&62914560)===0&&(er=4194304),t}function pr(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function Mr(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function na(t,i,s,l,h,m){var T=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var A=t.entanglements,P=t.expirationTimes,W=t.hiddenUpdates;for(s=T&~s;0<s;){var se=31-Bt(s),he=1<<se;A[se]=0,P[se]=-1;var J=W[se];if(J!==null)for(W[se]=null,se=0;se<J.length;se++){var ee=J[se];ee!==null&&(ee.lane&=-536870913)}s&=~he}l!==0&&Hn(t,l,0),m!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=m&~(T&~i))}function Hn(t,i,s){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Bt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|s&4194090}function Qr(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var l=31-Bt(s),h=1<<l;h&i|t[l]&i&&(t[l]|=i),s&=~h}}function Yr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ra(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function L(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:Dv(t.type))}function F(t,i){var s=re.p;try{return re.p=t,i()}finally{re.p=s}}var Y=Math.random().toString(36).slice(2),fe="__reactFiber$"+Y,pe="__reactProps$"+Y,Ae="__reactContainer$"+Y,je="__reactEvents$"+Y,Ce="__reactListeners$"+Y,Ve="__reactHandles$"+Y,Me="__reactResources$"+Y,$e="__reactMarker$"+Y;function Be(t){delete t[fe],delete t[pe],delete t[je],delete t[Ce],delete t[Ve]}function Xe(t){var i=t[fe];if(i)return i;for(var s=t.parentNode;s;){if(i=s[Ae]||s[fe]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=mv(t);t!==null;){if(s=t[fe])return s;t=mv(t)}return i}t=s,s=t.parentNode}return null}function lt(t){if(t=t[fe]||t[Ae]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function wt(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(a(33))}function Tt(t){var i=t[Me];return i||(i=t[Me]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function pt(t){t[$e]=!0}var at=new Set,gr={};function hn(t,i){Fn(t,i),Fn(t+"Capture",i)}function Fn(t,i){for(gr[t]=i,t=0;t<i.length;t++)at.add(i[t])}var wn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xr={},nr={};function ia(t){return Le.call(nr,t)?!0:Le.call(Xr,t)?!1:wn.test(t)?nr[t]=!0:(Xr[t]=!0,!1)}function Ln(t,i,s){if(ia(i))if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+s)}}function Gn(t,i,s){if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+s)}}function Je(t,i,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(i,s,""+l)}}var tn,rr;function Yn(t){if(tn===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);tn=i&&i[1]||"",rr=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tn+t+rr}var Wr=!1;function Vt(t,i){if(!t||Wr)return"";Wr=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ee){var J=ee}Reflect.construct(t,[],he)}else{try{he.call()}catch(ee){J=ee}t.call(he.prototype)}}else{try{throw Error()}catch(ee){J=ee}(he=t())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ee){if(ee&&J&&typeof ee.stack=="string")return[ee.stack,J.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),T=m[0],A=m[1];if(T&&A){var P=T.split(`
`),W=A.split(`
`);for(h=l=0;l<P.length&&!P[l].includes("DetermineComponentFrameRoot");)l++;for(;h<W.length&&!W[h].includes("DetermineComponentFrameRoot");)h++;if(l===P.length||h===W.length)for(l=P.length-1,h=W.length-1;1<=l&&0<=h&&P[l]!==W[h];)h--;for(;1<=l&&0<=h;l--,h--)if(P[l]!==W[h]){if(l!==1||h!==1)do if(l--,h--,0>h||P[l]!==W[h]){var se=`
`+P[l].replace(" at new "," at ");return t.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",t.displayName)),se}while(1<=l&&0<=h);break}}}finally{Wr=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?Yn(s):""}function yr(t){switch(t.tag){case 26:case 27:case 5:return Yn(t.type);case 16:return Yn("Lazy");case 13:return Yn("Suspense");case 19:return Yn("SuspenseList");case 0:case 15:return Vt(t.type,!1);case 11:return Vt(t.type.render,!1);case 1:return Vt(t.type,!0);case 31:return Yn("Activity");default:return""}}function wi(t){try{var i="";do i+=yr(t),t=t.return;while(t);return i}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function An(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function il(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Sf(t){var i=il(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var h=s.get,m=s.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(T){l=""+T,m.call(this,T)}}),Object.defineProperty(t,i,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Fs(t){t._valueTracker||(t._valueTracker=Sf(t))}function al(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),l="";return t&&(l=il(t)?t.checked?"true":"false":t.value),t=l,t!==s?(i.setValue(t),!0):!1}function Ja(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var wf=/[\n"\\]/g;function nn(t){return t.replace(wf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ir(t,i,s,l,h,m,T,A){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),i!=null?T==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+An(i)):t.value!==""+An(i)&&(t.value=""+An(i)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),i!=null?aa(t,T,An(i)):s!=null?aa(t,T,An(s)):l!=null&&t.removeAttribute("value"),h==null&&m!=null&&(t.defaultChecked=!!m),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+An(A):t.removeAttribute("name")}function es(t,i,s,l,h,m,T,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),i!=null||s!=null){if(!(m!=="submit"&&m!=="reset"||i!=null))return;s=s!=null?""+An(s):"",i=i!=null?""+An(i):s,A||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=A?t.checked:!!l,t.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T)}function aa(t,i,s){i==="number"&&Ja(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Ai(t,i,s,l){if(t=t.options,i){i={};for(var h=0;h<s.length;h++)i["$"+s[h]]=!0;for(s=0;s<t.length;s++)h=i.hasOwnProperty("$"+t[s].value),t[s].selected!==h&&(t[s].selected=h),h&&l&&(t[s].defaultSelected=!0)}else{for(s=""+An(s),i=null,h=0;h<t.length;h++){if(t[h].value===s){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Nt(t,i,s){if(i!=null&&(i=""+An(i),i!==t.value&&(t.value=i),s==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=s!=null?""+An(s):""}function ts(t,i,s,l){if(i==null){if(l!=null){if(s!=null)throw Error(a(92));if(qe(l)){if(1<l.length)throw Error(a(93));l=l[0]}s=l}s==null&&(s=""),i=s}s=An(i),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l)}function _r(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var ns=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hu(t,i,s){var l=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,s):typeof s!="number"||s===0||ns.has(i)?i==="float"?t.cssFloat=s:t[i]=(""+s).trim():t[i]=s+"px"}function sl(t,i,s){if(i!=null&&typeof i!="object")throw Error(a(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&s[h]!==l&&Hu(t,h,l)}else for(var m in i)i.hasOwnProperty(m)&&Hu(t,m,i[m])}function ol(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Af=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gs(t){return Rf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ri=null;function vr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ci=null,Ii=null;function ll(t){var i=lt(t);if(i&&(t=i.stateNode)){var s=t[pe]||null;e:switch(t=i.stateNode,i.type){case"input":if(ir(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+nn(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var l=s[i];if(l!==t&&l.form===t.form){var h=l[pe]||null;if(!h)throw Error(a(90));ir(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<s.length;i++)l=s[i],l.form===t.form&&al(l)}break e;case"textarea":Nt(t,s.value,s.defaultValue);break e;case"select":i=s.value,i!=null&&Ai(t,!!s.multiple,i,!1)}}}var Zr=!1;function Fu(t,i,s){if(Zr)return t(i,s);Zr=!0;try{var l=t(i);return l}finally{if(Zr=!1,(Ci!==null||Ii!==null)&&(kc(),Ci&&(i=Ci,t=Ii,Ii=Ci=null,ll(i),t)))for(i=0;i<t.length;i++)ll(t[i])}}function rs(t,i){var s=t.stateNode;if(s===null)return null;var l=s[pe]||null;if(l===null)return null;s=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,i,typeof s));return s}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Er=!1;if(Vr)try{var is={};Object.defineProperty(is,"passive",{get:function(){Er=!0}}),window.addEventListener("test",is,is),window.removeEventListener("test",is,is)}catch{Er=!1}var Jr=null,sa=null,Di=null;function ul(){if(Di)return Di;var t,i=sa,s=i.length,l,h="value"in Jr?Jr.value:Jr.textContent,m=h.length;for(t=0;t<s&&i[t]===h[t];t++);var T=s-t;for(l=1;l<=T&&i[s-l]===h[m-l];l++);return Di=h.slice(t,1<l?1-l:void 0)}function ei(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ti(){return!0}function cl(){return!1}function _n(t){function i(s,l,h,m,T){this._reactName=s,this._targetInst=h,this.type=l,this.nativeEvent=m,this.target=T,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(s=t[A],this[A]=s?s(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ti:cl,this.isPropagationStopped=cl,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),i}var At={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$s=_n(At),as=_({},At,{view:0,detail:0}),Gu=_n(as),Ks,Qs,ni,ss=_({},as,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:us,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ni&&(ni&&t.type==="mousemove"?(Ks=t.screenX-ni.screenX,Qs=t.screenY-ni.screenY):Qs=Ks=0,ni=t),Ks)},movementY:function(t){return"movementY"in t?t.movementY:Qs}}),Tr=_n(ss),$u=_({},ss,{dataTransfer:0}),Cf=_n($u),os=_({},as,{relatedTarget:0}),Ys=_n(os),hl=_({},At,{animationName:0,elapsedTime:0,pseudoElement:0}),Xs=_n(hl),Ku=_({},At,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ws=_n(Ku),If=_({},At,{data:0}),fl=_n(If),ls={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dl(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Yu[t])?!!i[t]:!1}function us(){return dl}var Xu=_({},as,{key:function(t){if(t.key){var i=ls[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=ei(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:us,charCode:function(t){return t.type==="keypress"?ei(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ei(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zs=_n(Xu),Wu=_({},ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ml=_n(Wu),Ni=_({},as,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:us}),Zu=_n(Ni),Ju=_({},At,{propertyName:0,elapsedTime:0,pseudoElement:0}),ec=_n(Ju),tc=_({},ss,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Js=_n(tc),$n=_({},At,{newState:0,oldState:0}),nc=_n($n),rc=[9,13,27,32],ri=Vr&&"CompositionEvent"in window,c=null;Vr&&"documentMode"in document&&(c=document.documentMode);var y=Vr&&"TextEvent"in window&&!c,v=Vr&&(!ri||c&&8<c&&11>=c),C=" ",$=!1;function te(t,i){switch(t){case"keyup":return rc.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ve(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gt=!1;function fn(t,i){switch(t){case"compositionend":return ve(i);case"keypress":return i.which!==32?null:($=!0,C);case"textInput":return t=i.data,t===C&&$?null:t;default:return null}}function yt(t,i){if(gt)return t==="compositionend"||!ri&&te(t,i)?(t=ul(),Di=sa=Jr=null,gt=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dn(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!vn[t.type]:i==="textarea"}function Oi(t,i,s,l){Ci?Ii?Ii.push(l):Ii=[l]:Ci=l,i=Hc(i,"onChange"),0<i.length&&(s=new $s("onChange","change",null,s,l),t.push({event:s,listeners:i}))}var Rn=null,ii=null;function pl(t){iv(t,0)}function ic(t){var i=wt(t);if(al(i))return t}function Ag(t,i){if(t==="change")return i}var Rg=!1;if(Vr){var Df;if(Vr){var Nf="oninput"in document;if(!Nf){var Cg=document.createElement("div");Cg.setAttribute("oninput","return;"),Nf=typeof Cg.oninput=="function"}Df=Nf}else Df=!1;Rg=Df&&(!document.documentMode||9<document.documentMode)}function Ig(){Rn&&(Rn.detachEvent("onpropertychange",Dg),ii=Rn=null)}function Dg(t){if(t.propertyName==="value"&&ic(ii)){var i=[];Oi(i,ii,t,vr(t)),Fu(pl,i)}}function GS(t,i,s){t==="focusin"?(Ig(),Rn=i,ii=s,Rn.attachEvent("onpropertychange",Dg)):t==="focusout"&&Ig()}function $S(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ic(ii)}function KS(t,i){if(t==="click")return ic(i)}function QS(t,i){if(t==="input"||t==="change")return ic(i)}function YS(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var ar=typeof Object.is=="function"?Object.is:YS;function gl(t,i){if(ar(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),l=Object.keys(i);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var h=s[l];if(!Le.call(i,h)||!ar(t[h],i[h]))return!1}return!0}function Ng(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Og(t,i){var s=Ng(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=i&&l>=i)return{node:s,offset:i-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Ng(s)}}function xg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?xg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Mg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ja(t.document);i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=Ja(t.document)}return i}function Of(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var XS=Vr&&"documentMode"in document&&11>=document.documentMode,eo=null,xf=null,yl=null,Mf=!1;function Vg(t,i,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Mf||eo==null||eo!==Ja(l)||(l=eo,"selectionStart"in l&&Of(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),yl&&gl(yl,l)||(yl=l,l=Hc(xf,"onSelect"),0<l.length&&(i=new $s("onSelect","select",null,i,s),t.push({event:i,listeners:l}),i.target=eo)))}function cs(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var to={animationend:cs("Animation","AnimationEnd"),animationiteration:cs("Animation","AnimationIteration"),animationstart:cs("Animation","AnimationStart"),transitionrun:cs("Transition","TransitionRun"),transitionstart:cs("Transition","TransitionStart"),transitioncancel:cs("Transition","TransitionCancel"),transitionend:cs("Transition","TransitionEnd")},Vf={},Pg={};Vr&&(Pg=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function hs(t){if(Vf[t])return Vf[t];if(!to[t])return t;var i=to[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in Pg)return Vf[t]=i[s];return t}var Lg=hs("animationend"),kg=hs("animationiteration"),Ug=hs("animationstart"),WS=hs("transitionrun"),ZS=hs("transitionstart"),JS=hs("transitioncancel"),zg=hs("transitionend"),jg=new Map,Pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Pf.push("scrollEnd");function Pr(t,i){jg.set(t,i),hn(i,[t])}var Bg=new WeakMap;function br(t,i){if(typeof t=="object"&&t!==null){var s=Bg.get(t);return s!==void 0?s:(i={value:t,source:i,stack:wi(i)},Bg.set(t,i),i)}return{value:t,source:i,stack:wi(i)}}var Sr=[],no=0,Lf=0;function ac(){for(var t=no,i=Lf=no=0;i<t;){var s=Sr[i];Sr[i++]=null;var l=Sr[i];Sr[i++]=null;var h=Sr[i];Sr[i++]=null;var m=Sr[i];if(Sr[i++]=null,l!==null&&h!==null){var T=l.pending;T===null?h.next=h:(h.next=T.next,T.next=h),l.pending=h}m!==0&&qg(s,h,m)}}function sc(t,i,s,l){Sr[no++]=t,Sr[no++]=i,Sr[no++]=s,Sr[no++]=l,Lf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function kf(t,i,s,l){return sc(t,i,s,l),oc(t)}function ro(t,i){return sc(t,null,null,i),oc(t)}function qg(t,i,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var h=!1,m=t.return;m!==null;)m.childLanes|=s,l=m.alternate,l!==null&&(l.childLanes|=s),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(h=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,h&&i!==null&&(h=31-Bt(s),t=m.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=s|536870912),m):null}function oc(t){if(50<ql)throw ql=0,Hd=null,Error(a(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var io={};function ew(t,i,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(t,i,s,l){return new ew(t,i,s,l)}function Uf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xi(t,i){var s=t.alternate;return s===null?(s=sr(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Hg(t,i){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,i=s.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function lc(t,i,s,l,h,m){var T=0;if(l=t,typeof t=="function")Uf(t)&&(T=1);else if(typeof t=="string")T=n1(t,s,Ee.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case b:return t=sr(31,s,i,h),t.elementType=b,t.lanes=m,t;case M:return fs(s.children,h,m,i);case Q:T=8,h|=24;break;case H:return t=sr(12,s,i,h|2),t.elementType=H,t.lanes=m,t;case oe:return t=sr(13,s,i,h),t.elementType=oe,t.lanes=m,t;case k:return t=sr(19,s,i,h),t.elementType=k,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case q:case ne:T=10;break e;case ae:T=9;break e;case _e:T=11;break e;case N:T=14;break e;case E:T=16,l=null;break e}T=29,s=Error(a(130,t===null?"null":typeof t,"")),l=null}return i=sr(T,s,i,h),i.elementType=t,i.type=l,i.lanes=m,i}function fs(t,i,s,l){return t=sr(7,t,l,i),t.lanes=s,t}function zf(t,i,s){return t=sr(6,t,null,i),t.lanes=s,t}function jf(t,i,s){return i=sr(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var ao=[],so=0,uc=null,cc=0,wr=[],Ar=0,ds=null,Mi=1,Vi="";function ms(t,i){ao[so++]=cc,ao[so++]=uc,uc=t,cc=i}function Fg(t,i,s){wr[Ar++]=Mi,wr[Ar++]=Vi,wr[Ar++]=ds,ds=t;var l=Mi;t=Vi;var h=32-Bt(l)-1;l&=~(1<<h),s+=1;var m=32-Bt(i)+h;if(30<m){var T=h-h%5;m=(l&(1<<T)-1).toString(32),l>>=T,h-=T,Mi=1<<32-Bt(i)+h|s<<h|l,Vi=m+t}else Mi=1<<m|s<<h|l,Vi=t}function Bf(t){t.return!==null&&(ms(t,1),Fg(t,1,0))}function qf(t){for(;t===uc;)uc=ao[--so],ao[so]=null,cc=ao[--so],ao[so]=null;for(;t===ds;)ds=wr[--Ar],wr[Ar]=null,Vi=wr[--Ar],wr[Ar]=null,Mi=wr[--Ar],wr[Ar]=null}var Kn=null,$t=null,St=!1,ps=null,ai=!1,Hf=Error(a(519));function gs(t){var i=Error(a(418,""));throw El(br(i,t)),Hf}function Gg(t){var i=t.stateNode,s=t.type,l=t.memoizedProps;switch(i[fe]=t,i[pe]=l,s){case"dialog":ct("cancel",i),ct("close",i);break;case"iframe":case"object":case"embed":ct("load",i);break;case"video":case"audio":for(s=0;s<Fl.length;s++)ct(Fl[s],i);break;case"source":ct("error",i);break;case"img":case"image":case"link":ct("error",i),ct("load",i);break;case"details":ct("toggle",i);break;case"input":ct("invalid",i),es(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Fs(i);break;case"select":ct("invalid",i);break;case"textarea":ct("invalid",i),ts(i,l.value,l.defaultValue,l.children),Fs(i)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||l.suppressHydrationWarning===!0||lv(i.textContent,s)?(l.popover!=null&&(ct("beforetoggle",i),ct("toggle",i)),l.onScroll!=null&&ct("scroll",i),l.onScrollEnd!=null&&ct("scrollend",i),l.onClick!=null&&(i.onclick=Fc),i=!0):i=!1,i||gs(t)}function $g(t){for(Kn=t.return;Kn;)switch(Kn.tag){case 5:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:Kn=Kn.return}}function _l(t){if(t!==Kn)return!1;if(!St)return $g(t),St=!0,!1;var i=t.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||am(t.type,t.memoizedProps)),s=!s),s&&$t&&gs(t),$g(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(i===0){$t=kr(t.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++;t=t.nextSibling}$t=null}}else i===27?(i=$t,ba(t.type)?(t=um,um=null,$t=t):$t=i):$t=Kn?kr(t.stateNode.nextSibling):null;return!0}function vl(){$t=Kn=null,St=!1}function Kg(){var t=ps;return t!==null&&(Zn===null?Zn=t:Zn.push.apply(Zn,t),ps=null),t}function El(t){ps===null?ps=[t]:ps.push(t)}var Ff=X(null),ys=null,Pi=null;function oa(t,i,s){Z(Ff,i._currentValue),i._currentValue=s}function Li(t){t._currentValue=Ff.current,ie(Ff)}function Gf(t,i,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===s)break;t=t.return}}function $f(t,i,s,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var m=h.dependencies;if(m!==null){var T=h.child;m=m.firstContext;e:for(;m!==null;){var A=m;m=h;for(var P=0;P<i.length;P++)if(A.context===i[P]){m.lanes|=s,A=m.alternate,A!==null&&(A.lanes|=s),Gf(m.return,s,t),l||(T=null);break e}m=A.next}}else if(h.tag===18){if(T=h.return,T===null)throw Error(a(341));T.lanes|=s,m=T.alternate,m!==null&&(m.lanes|=s),Gf(T,s,t),T=null}else T=h.child;if(T!==null)T.return=h;else for(T=h;T!==null;){if(T===t){T=null;break}if(h=T.sibling,h!==null){h.return=T.return,T=h;break}T=T.return}h=T}}function Tl(t,i,s,l){t=null;for(var h=i,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var T=h.alternate;if(T===null)throw Error(a(387));if(T=T.memoizedProps,T!==null){var A=h.type;ar(h.pendingProps.value,T.value)||(t!==null?t.push(A):t=[A])}}else if(h===mt.current){if(T=h.alternate,T===null)throw Error(a(387));T.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Xl):t=[Xl])}h=h.return}t!==null&&$f(i,t,s,l),i.flags|=262144}function hc(t){for(t=t.firstContext;t!==null;){if(!ar(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function _s(t){ys=t,Pi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function kn(t){return Qg(ys,t)}function fc(t,i){return ys===null&&_s(t),Qg(t,i)}function Qg(t,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},Pi===null){if(t===null)throw Error(a(308));Pi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Pi=Pi.next=i;return s}var tw=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(s){return s()})}},nw=r.unstable_scheduleCallback,rw=r.unstable_NormalPriority,mn={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kf(){return{controller:new tw,data:new Map,refCount:0}}function bl(t){t.refCount--,t.refCount===0&&nw(rw,function(){t.controller.abort()})}var Sl=null,Qf=0,oo=0,lo=null;function iw(t,i){if(Sl===null){var s=Sl=[];Qf=0,oo=Xd(),lo={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Qf++,i.then(Yg,Yg),i}function Yg(){if(--Qf===0&&Sl!==null){lo!==null&&(lo.status="fulfilled");var t=Sl;Sl=null,oo=0,lo=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function aw(t,i){var s=[],l={status:"pending",value:null,reason:null,then:function(h){s.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<s.length;h++)(0,s[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<s.length;h++)(0,s[h])(void 0)}),l}var Xg=G.S;G.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&iw(t,i),Xg!==null&&Xg(t,i)};var vs=X(null);function Yf(){var t=vs.current;return t!==null?t:kt.pooledCache}function dc(t,i){i===null?Z(vs,vs.current):Z(vs,i.pool)}function Wg(){var t=Yf();return t===null?null:{parent:mn._currentValue,pool:t}}var wl=Error(a(460)),Zg=Error(a(474)),mc=Error(a(542)),Xf={then:function(){}};function Jg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function pc(){}function ey(t,i,s){switch(s=t[s],s===void 0?t.push(i):s!==i&&(i.then(pc,pc),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,ny(t),t;default:if(typeof i.status=="string")i.then(pc,pc);else{if(t=kt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,ny(t),t}throw Al=i,wl}}var Al=null;function ty(){if(Al===null)throw Error(a(459));var t=Al;return Al=null,t}function ny(t){if(t===wl||t===mc)throw Error(a(483))}var la=!1;function Wf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ua(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ca(t,i,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ct&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=oc(t),qg(t,null,s),i}return sc(t,l,i,s),oc(t)}function Rl(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,s|=l,i.lanes=s,Qr(t,s)}}function Jf(t,i){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var h=null,m=null;if(s=s.firstBaseUpdate,s!==null){do{var T={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};m===null?h=m=T:m=m.next=T,s=s.next}while(s!==null);m===null?h=m=i:m=m.next=i}else h=m=i;s={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}var ed=!1;function Cl(){if(ed){var t=lo;if(t!==null)throw t}}function Il(t,i,s,l){ed=!1;var h=t.updateQueue;la=!1;var m=h.firstBaseUpdate,T=h.lastBaseUpdate,A=h.shared.pending;if(A!==null){h.shared.pending=null;var P=A,W=P.next;P.next=null,T===null?m=W:T.next=W,T=P;var se=t.alternate;se!==null&&(se=se.updateQueue,A=se.lastBaseUpdate,A!==T&&(A===null?se.firstBaseUpdate=W:A.next=W,se.lastBaseUpdate=P))}if(m!==null){var he=h.baseState;T=0,se=W=P=null,A=m;do{var J=A.lane&-536870913,ee=J!==A.lane;if(ee?(_t&J)===J:(l&J)===J){J!==0&&J===oo&&(ed=!0),se!==null&&(se=se.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var We=t,Fe=A;J=i;var Mt=s;switch(Fe.tag){case 1:if(We=Fe.payload,typeof We=="function"){he=We.call(Mt,he,J);break e}he=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=Fe.payload,J=typeof We=="function"?We.call(Mt,he,J):We,J==null)break e;he=_({},he,J);break e;case 2:la=!0}}J=A.callback,J!==null&&(t.flags|=64,ee&&(t.flags|=8192),ee=h.callbacks,ee===null?h.callbacks=[J]:ee.push(J))}else ee={lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},se===null?(W=se=ee,P=he):se=se.next=ee,T|=J;if(A=A.next,A===null){if(A=h.shared.pending,A===null)break;ee=A,A=ee.next,ee.next=null,h.lastBaseUpdate=ee,h.shared.pending=null}}while(!0);se===null&&(P=he),h.baseState=P,h.firstBaseUpdate=W,h.lastBaseUpdate=se,m===null&&(h.shared.lanes=0),_a|=T,t.lanes=T,t.memoizedState=he}}function ry(t,i){if(typeof t!="function")throw Error(a(191,t));t.call(i)}function iy(t,i){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)ry(s[t],i)}var uo=X(null),gc=X(0);function ay(t,i){t=Hi,Z(gc,t),Z(uo,i),Hi=t|i.baseLanes}function td(){Z(gc,Hi),Z(uo,uo.current)}function nd(){Hi=gc.current,ie(uo),ie(gc)}var ha=0,it=null,Ot=null,rn=null,yc=!1,co=!1,Es=!1,_c=0,Dl=0,ho=null,sw=0;function Wt(){throw Error(a(321))}function rd(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!ar(t[s],i[s]))return!1;return!0}function id(t,i,s,l,h,m){return ha=m,it=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=t===null||t.memoizedState===null?qy:Hy,Es=!1,m=s(l,h),Es=!1,co&&(m=oy(i,s,l,h)),sy(t),m}function sy(t){G.H=wc;var i=Ot!==null&&Ot.next!==null;if(ha=0,rn=Ot=it=null,yc=!1,Dl=0,ho=null,i)throw Error(a(300));t===null||En||(t=t.dependencies,t!==null&&hc(t)&&(En=!0))}function oy(t,i,s,l){it=t;var h=0;do{if(co&&(ho=null),Dl=0,co=!1,25<=h)throw Error(a(301));if(h+=1,rn=Ot=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}G.H=dw,m=i(s,l)}while(co);return m}function ow(){var t=G.H,i=t.useState()[0];return i=typeof i.then=="function"?Nl(i):i,t=t.useState()[0],(Ot!==null?Ot.memoizedState:null)!==t&&(it.flags|=1024),i}function ad(){var t=_c!==0;return _c=0,t}function sd(t,i,s){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~s}function od(t){if(yc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}yc=!1}ha=0,rn=Ot=it=null,co=!1,Dl=_c=0,ho=null}function Xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?it.memoizedState=rn=t:rn=rn.next=t,rn}function an(){if(Ot===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var i=rn===null?it.memoizedState:rn.next;if(i!==null)rn=i,Ot=t;else{if(t===null)throw it.alternate===null?Error(a(467)):Error(a(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},rn===null?it.memoizedState=rn=t:rn=rn.next=t}return rn}function ld(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nl(t){var i=Dl;return Dl+=1,ho===null&&(ho=[]),t=ey(ho,t,i),i=it,(rn===null?i.memoizedState:rn.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?qy:Hy),t}function vc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Nl(t);if(t.$$typeof===ne)return kn(t)}throw Error(a(438,String(t)))}function ud(t){var i=null,s=it.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var l=it.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=ld(),it.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(t),l=0;l<t;l++)s[l]=R;return i.index++,s}function ki(t,i){return typeof i=="function"?i(t):i}function Ec(t){var i=an();return cd(i,Ot,t)}function cd(t,i,s){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var h=t.baseQueue,m=l.pending;if(m!==null){if(h!==null){var T=h.next;h.next=m.next,m.next=T}i.baseQueue=h=m,l.pending=null}if(m=t.baseState,h===null)t.memoizedState=m;else{i=h.next;var A=T=null,P=null,W=i,se=!1;do{var he=W.lane&-536870913;if(he!==W.lane?(_t&he)===he:(ha&he)===he){var J=W.revertLane;if(J===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),he===oo&&(se=!0);else if((ha&J)===J){W=W.next,J===oo&&(se=!0);continue}else he={lane:0,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},P===null?(A=P=he,T=m):P=P.next=he,it.lanes|=J,_a|=J;he=W.action,Es&&s(m,he),m=W.hasEagerState?W.eagerState:s(m,he)}else J={lane:he,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},P===null?(A=P=J,T=m):P=P.next=J,it.lanes|=he,_a|=he;W=W.next}while(W!==null&&W!==i);if(P===null?T=m:P.next=A,!ar(m,t.memoizedState)&&(En=!0,se&&(s=lo,s!==null)))throw s;t.memoizedState=m,t.baseState=T,t.baseQueue=P,l.lastRenderedState=m}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function hd(t){var i=an(),s=i.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var l=s.dispatch,h=s.pending,m=i.memoizedState;if(h!==null){s.pending=null;var T=h=h.next;do m=t(m,T.action),T=T.next;while(T!==h);ar(m,i.memoizedState)||(En=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),s.lastRenderedState=m}return[m,l]}function ly(t,i,s){var l=it,h=an(),m=St;if(m){if(s===void 0)throw Error(a(407));s=s()}else s=i();var T=!ar((Ot||h).memoizedState,s);T&&(h.memoizedState=s,En=!0),h=h.queue;var A=hy.bind(null,l,h,t);if(Ol(2048,8,A,[t]),h.getSnapshot!==i||T||rn!==null&&rn.memoizedState.tag&1){if(l.flags|=2048,fo(9,Tc(),cy.bind(null,l,h,s,i),null),kt===null)throw Error(a(349));m||(ha&124)!==0||uy(l,i,s)}return s}function uy(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=it.updateQueue,i===null?(i=ld(),it.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function cy(t,i,s,l){i.value=s,i.getSnapshot=l,fy(i)&&dy(t)}function hy(t,i,s){return s(function(){fy(i)&&dy(t)})}function fy(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!ar(t,s)}catch{return!0}}function dy(t){var i=ro(t,2);i!==null&&hr(i,t,2)}function fd(t){var i=Xn();if(typeof t=="function"){var s=t;if(t=s(),Es){Lt(!0);try{s()}finally{Lt(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:t},i}function my(t,i,s,l){return t.baseState=s,cd(t,Ot,typeof l=="function"?l:ki)}function lw(t,i,s,l,h){if(Sc(t))throw Error(a(485));if(t=i.action,t!==null){var m={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){m.listeners.push(T)}};G.T!==null?s(!0):m.isTransition=!1,l(m),s=i.pending,s===null?(m.next=i.pending=m,py(i,m)):(m.next=s.next,i.pending=s.next=m)}}function py(t,i){var s=i.action,l=i.payload,h=t.state;if(i.isTransition){var m=G.T,T={};G.T=T;try{var A=s(h,l),P=G.S;P!==null&&P(T,A),gy(t,i,A)}catch(W){dd(t,i,W)}finally{G.T=m}}else try{m=s(h,l),gy(t,i,m)}catch(W){dd(t,i,W)}}function gy(t,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){yy(t,i,l)},function(l){return dd(t,i,l)}):yy(t,i,s)}function yy(t,i,s){i.status="fulfilled",i.value=s,_y(i),t.state=s,i=t.pending,i!==null&&(s=i.next,s===i?t.pending=null:(s=s.next,i.next=s,py(t,s)))}function dd(t,i,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=s,_y(i),i=i.next;while(i!==l)}t.action=null}function _y(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function vy(t,i){return i}function Ey(t,i){if(St){var s=kt.formState;if(s!==null){e:{var l=it;if(St){if($t){t:{for(var h=$t,m=ai;h.nodeType!==8;){if(!m){h=null;break t}if(h=kr(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){$t=kr(h.nextSibling),l=h.data==="F!";break e}}gs(l)}l=!1}l&&(i=s[0])}}return s=Xn(),s.memoizedState=s.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:i},s.queue=l,s=zy.bind(null,it,l),l.dispatch=s,l=fd(!1),m=_d.bind(null,it,!1,l.queue),l=Xn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,s=lw.bind(null,it,h,m,s),h.dispatch=s,l.memoizedState=t,[i,s,!1]}function Ty(t){var i=an();return by(i,Ot,t)}function by(t,i,s){if(i=cd(t,i,vy)[0],t=Ec(ki)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Nl(i)}catch(T){throw T===wl?mc:T}else l=i;i=an();var h=i.queue,m=h.dispatch;return s!==i.memoizedState&&(it.flags|=2048,fo(9,Tc(),uw.bind(null,h,s),null)),[l,m,t]}function uw(t,i){t.action=i}function Sy(t){var i=an(),s=Ot;if(s!==null)return by(i,s,t);an(),i=i.memoizedState,s=an();var l=s.queue.dispatch;return s.memoizedState=t,[i,l,!1]}function fo(t,i,s,l){return t={tag:t,create:s,deps:l,inst:i,next:null},i=it.updateQueue,i===null&&(i=ld(),it.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,i.lastEffect=t),t}function Tc(){return{destroy:void 0,resource:void 0}}function wy(){return an().memoizedState}function bc(t,i,s,l){var h=Xn();l=l===void 0?null:l,it.flags|=t,h.memoizedState=fo(1|i,Tc(),s,l)}function Ol(t,i,s,l){var h=an();l=l===void 0?null:l;var m=h.memoizedState.inst;Ot!==null&&l!==null&&rd(l,Ot.memoizedState.deps)?h.memoizedState=fo(i,m,s,l):(it.flags|=t,h.memoizedState=fo(1|i,m,s,l))}function Ay(t,i){bc(8390656,8,t,i)}function Ry(t,i){Ol(2048,8,t,i)}function Cy(t,i){return Ol(4,2,t,i)}function Iy(t,i){return Ol(4,4,t,i)}function Dy(t,i){if(typeof i=="function"){t=t();var s=i(t);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Ny(t,i,s){s=s!=null?s.concat([t]):null,Ol(4,4,Dy.bind(null,i,t),s)}function md(){}function Oy(t,i){var s=an();i=i===void 0?null:i;var l=s.memoizedState;return i!==null&&rd(i,l[1])?l[0]:(s.memoizedState=[t,i],t)}function xy(t,i){var s=an();i=i===void 0?null:i;var l=s.memoizedState;if(i!==null&&rd(i,l[1]))return l[0];if(l=t(),Es){Lt(!0);try{t()}finally{Lt(!1)}}return s.memoizedState=[l,i],l}function pd(t,i,s){return s===void 0||(ha&1073741824)!==0?t.memoizedState=i:(t.memoizedState=s,t=P_(),it.lanes|=t,_a|=t,s)}function My(t,i,s,l){return ar(s,i)?s:uo.current!==null?(t=pd(t,s,l),ar(t,i)||(En=!0),t):(ha&42)===0?(En=!0,t.memoizedState=s):(t=P_(),it.lanes|=t,_a|=t,i)}function Vy(t,i,s,l,h){var m=re.p;re.p=m!==0&&8>m?m:8;var T=G.T,A={};G.T=A,_d(t,!1,i,s);try{var P=h(),W=G.S;if(W!==null&&W(A,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var se=aw(P,l);xl(t,i,se,cr(t))}else xl(t,i,l,cr(t))}catch(he){xl(t,i,{then:function(){},status:"rejected",reason:he},cr())}finally{re.p=m,G.T=T}}function cw(){}function gd(t,i,s,l){if(t.tag!==5)throw Error(a(476));var h=Py(t).queue;Vy(t,h,i,me,s===null?cw:function(){return Ly(t),s(l)})}function Py(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:me},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:s},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Ly(t){var i=Py(t).next.queue;xl(t,i,{},cr())}function yd(){return kn(Xl)}function ky(){return an().memoizedState}function Uy(){return an().memoizedState}function hw(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var s=cr();t=ua(s);var l=ca(i,t,s);l!==null&&(hr(l,i,s),Rl(l,i,s)),i={cache:Kf()},t.payload=i;return}i=i.return}}function fw(t,i,s){var l=cr();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Sc(t)?jy(i,s):(s=kf(t,i,s,l),s!==null&&(hr(s,t,l),By(s,i,l)))}function zy(t,i,s){var l=cr();xl(t,i,s,l)}function xl(t,i,s,l){var h={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Sc(t))jy(i,h);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var T=i.lastRenderedState,A=m(T,s);if(h.hasEagerState=!0,h.eagerState=A,ar(A,T))return sc(t,i,h,0),kt===null&&ac(),!1}catch{}finally{}if(s=kf(t,i,h,l),s!==null)return hr(s,t,l),By(s,i,l),!0}return!1}function _d(t,i,s,l){if(l={lane:2,revertLane:Xd(),action:l,hasEagerState:!1,eagerState:null,next:null},Sc(t)){if(i)throw Error(a(479))}else i=kf(t,s,l,2),i!==null&&hr(i,t,2)}function Sc(t){var i=t.alternate;return t===it||i!==null&&i===it}function jy(t,i){co=yc=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function By(t,i,s){if((s&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,s|=l,i.lanes=s,Qr(t,s)}}var wc={readContext:kn,use:vc,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useLayoutEffect:Wt,useInsertionEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useSyncExternalStore:Wt,useId:Wt,useHostTransitionStatus:Wt,useFormState:Wt,useActionState:Wt,useOptimistic:Wt,useMemoCache:Wt,useCacheRefresh:Wt},qy={readContext:kn,use:vc,useCallback:function(t,i){return Xn().memoizedState=[t,i===void 0?null:i],t},useContext:kn,useEffect:Ay,useImperativeHandle:function(t,i,s){s=s!=null?s.concat([t]):null,bc(4194308,4,Dy.bind(null,i,t),s)},useLayoutEffect:function(t,i){return bc(4194308,4,t,i)},useInsertionEffect:function(t,i){bc(4,2,t,i)},useMemo:function(t,i){var s=Xn();i=i===void 0?null:i;var l=t();if(Es){Lt(!0);try{t()}finally{Lt(!1)}}return s.memoizedState=[l,i],l},useReducer:function(t,i,s){var l=Xn();if(s!==void 0){var h=s(i);if(Es){Lt(!0);try{s(i)}finally{Lt(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=fw.bind(null,it,t),[l.memoizedState,t]},useRef:function(t){var i=Xn();return t={current:t},i.memoizedState=t},useState:function(t){t=fd(t);var i=t.queue,s=zy.bind(null,it,i);return i.dispatch=s,[t.memoizedState,s]},useDebugValue:md,useDeferredValue:function(t,i){var s=Xn();return pd(s,t,i)},useTransition:function(){var t=fd(!1);return t=Vy.bind(null,it,t.queue,!0,!1),Xn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,s){var l=it,h=Xn();if(St){if(s===void 0)throw Error(a(407));s=s()}else{if(s=i(),kt===null)throw Error(a(349));(_t&124)!==0||uy(l,i,s)}h.memoizedState=s;var m={value:s,getSnapshot:i};return h.queue=m,Ay(hy.bind(null,l,m,t),[t]),l.flags|=2048,fo(9,Tc(),cy.bind(null,l,m,s,i),null),s},useId:function(){var t=Xn(),i=kt.identifierPrefix;if(St){var s=Vi,l=Mi;s=(l&~(1<<32-Bt(l)-1)).toString(32)+s,i="«"+i+"R"+s,s=_c++,0<s&&(i+="H"+s.toString(32)),i+="»"}else s=sw++,i="«"+i+"r"+s.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:yd,useFormState:Ey,useActionState:Ey,useOptimistic:function(t){var i=Xn();i.memoizedState=i.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=_d.bind(null,it,!0,s),s.dispatch=i,[t,i]},useMemoCache:ud,useCacheRefresh:function(){return Xn().memoizedState=hw.bind(null,it)}},Hy={readContext:kn,use:vc,useCallback:Oy,useContext:kn,useEffect:Ry,useImperativeHandle:Ny,useInsertionEffect:Cy,useLayoutEffect:Iy,useMemo:xy,useReducer:Ec,useRef:wy,useState:function(){return Ec(ki)},useDebugValue:md,useDeferredValue:function(t,i){var s=an();return My(s,Ot.memoizedState,t,i)},useTransition:function(){var t=Ec(ki)[0],i=an().memoizedState;return[typeof t=="boolean"?t:Nl(t),i]},useSyncExternalStore:ly,useId:ky,useHostTransitionStatus:yd,useFormState:Ty,useActionState:Ty,useOptimistic:function(t,i){var s=an();return my(s,Ot,t,i)},useMemoCache:ud,useCacheRefresh:Uy},dw={readContext:kn,use:vc,useCallback:Oy,useContext:kn,useEffect:Ry,useImperativeHandle:Ny,useInsertionEffect:Cy,useLayoutEffect:Iy,useMemo:xy,useReducer:hd,useRef:wy,useState:function(){return hd(ki)},useDebugValue:md,useDeferredValue:function(t,i){var s=an();return Ot===null?pd(s,t,i):My(s,Ot.memoizedState,t,i)},useTransition:function(){var t=hd(ki)[0],i=an().memoizedState;return[typeof t=="boolean"?t:Nl(t),i]},useSyncExternalStore:ly,useId:ky,useHostTransitionStatus:yd,useFormState:Sy,useActionState:Sy,useOptimistic:function(t,i){var s=an();return Ot!==null?my(s,Ot,t,i):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:ud,useCacheRefresh:Uy},mo=null,Ml=0;function Ac(t){var i=Ml;return Ml+=1,mo===null&&(mo=[]),ey(mo,t,i)}function Vl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Rc(t,i){throw i.$$typeof===w?Error(a(525)):(t=Object.prototype.toString.call(i),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Fy(t){var i=t._init;return i(t._payload)}function Gy(t){function i(j,U){if(t){var K=j.deletions;K===null?(j.deletions=[U],j.flags|=16):K.push(U)}}function s(j,U){if(!t)return null;for(;U!==null;)i(j,U),U=U.sibling;return null}function l(j){for(var U=new Map;j!==null;)j.key!==null?U.set(j.key,j):U.set(j.index,j),j=j.sibling;return U}function h(j,U){return j=xi(j,U),j.index=0,j.sibling=null,j}function m(j,U,K){return j.index=K,t?(K=j.alternate,K!==null?(K=K.index,K<U?(j.flags|=67108866,U):K):(j.flags|=67108866,U)):(j.flags|=1048576,U)}function T(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function A(j,U,K,ue){return U===null||U.tag!==6?(U=zf(K,j.mode,ue),U.return=j,U):(U=h(U,K),U.return=j,U)}function P(j,U,K,ue){var Oe=K.type;return Oe===M?se(j,U,K.props.children,ue,K.key):U!==null&&(U.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===E&&Fy(Oe)===U.type)?(U=h(U,K.props),Vl(U,K),U.return=j,U):(U=lc(K.type,K.key,K.props,null,j.mode,ue),Vl(U,K),U.return=j,U)}function W(j,U,K,ue){return U===null||U.tag!==4||U.stateNode.containerInfo!==K.containerInfo||U.stateNode.implementation!==K.implementation?(U=jf(K,j.mode,ue),U.return=j,U):(U=h(U,K.children||[]),U.return=j,U)}function se(j,U,K,ue,Oe){return U===null||U.tag!==7?(U=fs(K,j.mode,ue,Oe),U.return=j,U):(U=h(U,K),U.return=j,U)}function he(j,U,K){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=zf(""+U,j.mode,K),U.return=j,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case S:return K=lc(U.type,U.key,U.props,null,j.mode,K),Vl(K,U),K.return=j,K;case x:return U=jf(U,j.mode,K),U.return=j,U;case E:var ue=U._init;return U=ue(U._payload),he(j,U,K)}if(qe(U)||O(U))return U=fs(U,j.mode,K,null),U.return=j,U;if(typeof U.then=="function")return he(j,Ac(U),K);if(U.$$typeof===ne)return he(j,fc(j,U),K);Rc(j,U)}return null}function J(j,U,K,ue){var Oe=U!==null?U.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Oe!==null?null:A(j,U,""+K,ue);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case S:return K.key===Oe?P(j,U,K,ue):null;case x:return K.key===Oe?W(j,U,K,ue):null;case E:return Oe=K._init,K=Oe(K._payload),J(j,U,K,ue)}if(qe(K)||O(K))return Oe!==null?null:se(j,U,K,ue,null);if(typeof K.then=="function")return J(j,U,Ac(K),ue);if(K.$$typeof===ne)return J(j,U,fc(j,K),ue);Rc(j,K)}return null}function ee(j,U,K,ue,Oe){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return j=j.get(K)||null,A(U,j,""+ue,Oe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case S:return j=j.get(ue.key===null?K:ue.key)||null,P(U,j,ue,Oe);case x:return j=j.get(ue.key===null?K:ue.key)||null,W(U,j,ue,Oe);case E:var st=ue._init;return ue=st(ue._payload),ee(j,U,K,ue,Oe)}if(qe(ue)||O(ue))return j=j.get(K)||null,se(U,j,ue,Oe,null);if(typeof ue.then=="function")return ee(j,U,K,Ac(ue),Oe);if(ue.$$typeof===ne)return ee(j,U,K,fc(U,ue),Oe);Rc(U,ue)}return null}function We(j,U,K,ue){for(var Oe=null,st=null,Pe=U,Ke=U=0,bn=null;Pe!==null&&Ke<K.length;Ke++){Pe.index>Ke?(bn=Pe,Pe=null):bn=Pe.sibling;var bt=J(j,Pe,K[Ke],ue);if(bt===null){Pe===null&&(Pe=bn);break}t&&Pe&&bt.alternate===null&&i(j,Pe),U=m(bt,U,Ke),st===null?Oe=bt:st.sibling=bt,st=bt,Pe=bn}if(Ke===K.length)return s(j,Pe),St&&ms(j,Ke),Oe;if(Pe===null){for(;Ke<K.length;Ke++)Pe=he(j,K[Ke],ue),Pe!==null&&(U=m(Pe,U,Ke),st===null?Oe=Pe:st.sibling=Pe,st=Pe);return St&&ms(j,Ke),Oe}for(Pe=l(Pe);Ke<K.length;Ke++)bn=ee(Pe,j,Ke,K[Ke],ue),bn!==null&&(t&&bn.alternate!==null&&Pe.delete(bn.key===null?Ke:bn.key),U=m(bn,U,Ke),st===null?Oe=bn:st.sibling=bn,st=bn);return t&&Pe.forEach(function(Ca){return i(j,Ca)}),St&&ms(j,Ke),Oe}function Fe(j,U,K,ue){if(K==null)throw Error(a(151));for(var Oe=null,st=null,Pe=U,Ke=U=0,bn=null,bt=K.next();Pe!==null&&!bt.done;Ke++,bt=K.next()){Pe.index>Ke?(bn=Pe,Pe=null):bn=Pe.sibling;var Ca=J(j,Pe,bt.value,ue);if(Ca===null){Pe===null&&(Pe=bn);break}t&&Pe&&Ca.alternate===null&&i(j,Pe),U=m(Ca,U,Ke),st===null?Oe=Ca:st.sibling=Ca,st=Ca,Pe=bn}if(bt.done)return s(j,Pe),St&&ms(j,Ke),Oe;if(Pe===null){for(;!bt.done;Ke++,bt=K.next())bt=he(j,bt.value,ue),bt!==null&&(U=m(bt,U,Ke),st===null?Oe=bt:st.sibling=bt,st=bt);return St&&ms(j,Ke),Oe}for(Pe=l(Pe);!bt.done;Ke++,bt=K.next())bt=ee(Pe,j,Ke,bt.value,ue),bt!==null&&(t&&bt.alternate!==null&&Pe.delete(bt.key===null?Ke:bt.key),U=m(bt,U,Ke),st===null?Oe=bt:st.sibling=bt,st=bt);return t&&Pe.forEach(function(m1){return i(j,m1)}),St&&ms(j,Ke),Oe}function Mt(j,U,K,ue){if(typeof K=="object"&&K!==null&&K.type===M&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case S:e:{for(var Oe=K.key;U!==null;){if(U.key===Oe){if(Oe=K.type,Oe===M){if(U.tag===7){s(j,U.sibling),ue=h(U,K.props.children),ue.return=j,j=ue;break e}}else if(U.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===E&&Fy(Oe)===U.type){s(j,U.sibling),ue=h(U,K.props),Vl(ue,K),ue.return=j,j=ue;break e}s(j,U);break}else i(j,U);U=U.sibling}K.type===M?(ue=fs(K.props.children,j.mode,ue,K.key),ue.return=j,j=ue):(ue=lc(K.type,K.key,K.props,null,j.mode,ue),Vl(ue,K),ue.return=j,j=ue)}return T(j);case x:e:{for(Oe=K.key;U!==null;){if(U.key===Oe)if(U.tag===4&&U.stateNode.containerInfo===K.containerInfo&&U.stateNode.implementation===K.implementation){s(j,U.sibling),ue=h(U,K.children||[]),ue.return=j,j=ue;break e}else{s(j,U);break}else i(j,U);U=U.sibling}ue=jf(K,j.mode,ue),ue.return=j,j=ue}return T(j);case E:return Oe=K._init,K=Oe(K._payload),Mt(j,U,K,ue)}if(qe(K))return We(j,U,K,ue);if(O(K)){if(Oe=O(K),typeof Oe!="function")throw Error(a(150));return K=Oe.call(K),Fe(j,U,K,ue)}if(typeof K.then=="function")return Mt(j,U,Ac(K),ue);if(K.$$typeof===ne)return Mt(j,U,fc(j,K),ue);Rc(j,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,U!==null&&U.tag===6?(s(j,U.sibling),ue=h(U,K),ue.return=j,j=ue):(s(j,U),ue=zf(K,j.mode,ue),ue.return=j,j=ue),T(j)):s(j,U)}return function(j,U,K,ue){try{Ml=0;var Oe=Mt(j,U,K,ue);return mo=null,Oe}catch(Pe){if(Pe===wl||Pe===mc)throw Pe;var st=sr(29,Pe,null,j.mode);return st.lanes=ue,st.return=j,st}finally{}}}var po=Gy(!0),$y=Gy(!1),Rr=X(null),si=null;function fa(t){var i=t.alternate;Z(pn,pn.current&1),Z(Rr,t),si===null&&(i===null||uo.current!==null||i.memoizedState!==null)&&(si=t)}function Ky(t){if(t.tag===22){if(Z(pn,pn.current),Z(Rr,t),si===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(si=t)}}else da()}function da(){Z(pn,pn.current),Z(Rr,Rr.current)}function Ui(t){ie(Rr),si===t&&(si=null),ie(pn)}var pn=X(0);function Cc(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||lm(s)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function vd(t,i,s,l){i=t.memoizedState,s=s(l,i),s=s==null?i:_({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Ed={enqueueSetState:function(t,i,s){t=t._reactInternals;var l=cr(),h=ua(l);h.payload=i,s!=null&&(h.callback=s),i=ca(t,h,l),i!==null&&(hr(i,t,l),Rl(i,t,l))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var l=cr(),h=ua(l);h.tag=1,h.payload=i,s!=null&&(h.callback=s),i=ca(t,h,l),i!==null&&(hr(i,t,l),Rl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=cr(),l=ua(s);l.tag=2,i!=null&&(l.callback=i),i=ca(t,l,s),i!==null&&(hr(i,t,s),Rl(i,t,s))}};function Qy(t,i,s,l,h,m,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,m,T):i.prototype&&i.prototype.isPureReactComponent?!gl(s,l)||!gl(h,m):!0}function Yy(t,i,s,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,l),i.state!==t&&Ed.enqueueReplaceState(i,i.state,null)}function Ts(t,i){var s=i;if("ref"in i){s={};for(var l in i)l!=="ref"&&(s[l]=i[l])}if(t=t.defaultProps){s===i&&(s=_({},s));for(var h in t)s[h]===void 0&&(s[h]=t[h])}return s}var Ic=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Xy(t){Ic(t)}function Wy(t){console.error(t)}function Zy(t){Ic(t)}function Dc(t,i){try{var s=t.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Jy(t,i,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Td(t,i,s){return s=ua(s),s.tag=3,s.payload={element:null},s.callback=function(){Dc(t,i)},s}function e_(t){return t=ua(t),t.tag=3,t}function t_(t,i,s,l){var h=s.type.getDerivedStateFromError;if(typeof h=="function"){var m=l.value;t.payload=function(){return h(m)},t.callback=function(){Jy(i,s,l)}}var T=s.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Jy(i,s,l),typeof h!="function"&&(va===null?va=new Set([this]):va.add(this));var A=l.stack;this.componentDidCatch(l.value,{componentStack:A!==null?A:""})})}function mw(t,i,s,l,h){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=s.alternate,i!==null&&Tl(i,s,h,!0),s=Rr.current,s!==null){switch(s.tag){case 13:return si===null?Gd():s.alternate===null&&Kt===0&&(Kt=3),s.flags&=-257,s.flags|=65536,s.lanes=h,l===Xf?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([l]):i.add(l),Kd(t,l,h)),!1;case 22:return s.flags|=65536,l===Xf?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([l]):s.add(l)),Kd(t,l,h)),!1}throw Error(a(435,s.tag))}return Kd(t,l,h),Gd(),!1}if(St)return i=Rr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Hf&&(t=Error(a(422),{cause:l}),El(br(t,s)))):(l!==Hf&&(i=Error(a(423),{cause:l}),El(br(i,s))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=br(l,s),h=Td(t.stateNode,l,h),Jf(t,h),Kt!==4&&(Kt=2)),!1;var m=Error(a(520),{cause:l});if(m=br(m,s),Bl===null?Bl=[m]:Bl.push(m),Kt!==4&&(Kt=2),i===null)return!0;l=br(l,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,t=h&-h,s.lanes|=t,t=Td(s.stateNode,l,t),Jf(s,t),!1;case 1:if(i=s.type,m=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(va===null||!va.has(m))))return s.flags|=65536,h&=-h,s.lanes|=h,h=e_(h),t_(h,t,s,l),Jf(s,h),!1}s=s.return}while(s!==null);return!1}var n_=Error(a(461)),En=!1;function Cn(t,i,s,l){i.child=t===null?$y(i,null,s,l):po(i,t.child,s,l)}function r_(t,i,s,l,h){s=s.render;var m=i.ref;if("ref"in l){var T={};for(var A in l)A!=="ref"&&(T[A]=l[A])}else T=l;return _s(i),l=id(t,i,s,T,m,h),A=ad(),t!==null&&!En?(sd(t,i,h),zi(t,i,h)):(St&&A&&Bf(i),i.flags|=1,Cn(t,i,l,h),i.child)}function i_(t,i,s,l,h){if(t===null){var m=s.type;return typeof m=="function"&&!Uf(m)&&m.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=m,a_(t,i,m,l,h)):(t=lc(s.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(m=t.child,!Dd(t,h)){var T=m.memoizedProps;if(s=s.compare,s=s!==null?s:gl,s(T,l)&&t.ref===i.ref)return zi(t,i,h)}return i.flags|=1,t=xi(m,l),t.ref=i.ref,t.return=i,i.child=t}function a_(t,i,s,l,h){if(t!==null){var m=t.memoizedProps;if(gl(m,l)&&t.ref===i.ref)if(En=!1,i.pendingProps=l=m,Dd(t,h))(t.flags&131072)!==0&&(En=!0);else return i.lanes=t.lanes,zi(t,i,h)}return bd(t,i,s,l,h)}function s_(t,i,s){var l=i.pendingProps,h=l.children,m=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=m!==null?m.baseLanes|s:s,t!==null){for(h=i.child=t.child,m=0;h!==null;)m=m|h.lanes|h.childLanes,h=h.sibling;i.childLanes=m&~l}else i.childLanes=0,i.child=null;return o_(t,i,l,s)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&dc(i,m!==null?m.cachePool:null),m!==null?ay(i,m):td(),Ky(i);else return i.lanes=i.childLanes=536870912,o_(t,i,m!==null?m.baseLanes|s:s,s)}else m!==null?(dc(i,m.cachePool),ay(i,m),da(),i.memoizedState=null):(t!==null&&dc(i,null),td(),da());return Cn(t,i,h,s),i.child}function o_(t,i,s,l){var h=Yf();return h=h===null?null:{parent:mn._currentValue,pool:h},i.memoizedState={baseLanes:s,cachePool:h},t!==null&&dc(i,null),td(),Ky(i),t!==null&&Tl(t,i,l,!0),null}function Nc(t,i){var s=i.ref;if(s===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(i.flags|=4194816)}}function bd(t,i,s,l,h){return _s(i),s=id(t,i,s,l,void 0,h),l=ad(),t!==null&&!En?(sd(t,i,h),zi(t,i,h)):(St&&l&&Bf(i),i.flags|=1,Cn(t,i,s,h),i.child)}function l_(t,i,s,l,h,m){return _s(i),i.updateQueue=null,s=oy(i,l,s,h),sy(t),l=ad(),t!==null&&!En?(sd(t,i,m),zi(t,i,m)):(St&&l&&Bf(i),i.flags|=1,Cn(t,i,s,m),i.child)}function u_(t,i,s,l,h){if(_s(i),i.stateNode===null){var m=io,T=s.contextType;typeof T=="object"&&T!==null&&(m=kn(T)),m=new s(l,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Ed,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=l,m.state=i.memoizedState,m.refs={},Wf(i),T=s.contextType,m.context=typeof T=="object"&&T!==null?kn(T):io,m.state=i.memoizedState,T=s.getDerivedStateFromProps,typeof T=="function"&&(vd(i,s,T,l),m.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(T=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),T!==m.state&&Ed.enqueueReplaceState(m,m.state,null),Il(i,l,m,h),Cl(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){m=i.stateNode;var A=i.memoizedProps,P=Ts(s,A);m.props=P;var W=m.context,se=s.contextType;T=io,typeof se=="object"&&se!==null&&(T=kn(se));var he=s.getDerivedStateFromProps;se=typeof he=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,se||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||W!==T)&&Yy(i,m,l,T),la=!1;var J=i.memoizedState;m.state=J,Il(i,l,m,h),Cl(),W=i.memoizedState,A||J!==W||la?(typeof he=="function"&&(vd(i,s,he,l),W=i.memoizedState),(P=la||Qy(i,s,P,l,J,W,T))?(se||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=W),m.props=l,m.state=W,m.context=T,l=P):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{m=i.stateNode,Zf(t,i),T=i.memoizedProps,se=Ts(s,T),m.props=se,he=i.pendingProps,J=m.context,W=s.contextType,P=io,typeof W=="object"&&W!==null&&(P=kn(W)),A=s.getDerivedStateFromProps,(W=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T!==he||J!==P)&&Yy(i,m,l,P),la=!1,J=i.memoizedState,m.state=J,Il(i,l,m,h),Cl();var ee=i.memoizedState;T!==he||J!==ee||la||t!==null&&t.dependencies!==null&&hc(t.dependencies)?(typeof A=="function"&&(vd(i,s,A,l),ee=i.memoizedState),(se=la||Qy(i,s,se,l,J,ee,P)||t!==null&&t.dependencies!==null&&hc(t.dependencies))?(W||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ee,P),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ee,P)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&J===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&J===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=ee),m.props=l,m.state=ee,m.context=P,l=se):(typeof m.componentDidUpdate!="function"||T===t.memoizedProps&&J===t.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&J===t.memoizedState||(i.flags|=1024),l=!1)}return m=l,Nc(t,i),l=(i.flags&128)!==0,m||l?(m=i.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,t!==null&&l?(i.child=po(i,t.child,null,h),i.child=po(i,null,s,h)):Cn(t,i,s,h),i.memoizedState=m.state,t=i.child):t=zi(t,i,h),t}function c_(t,i,s,l){return vl(),i.flags|=256,Cn(t,i,s,l),i.child}var Sd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wd(t){return{baseLanes:t,cachePool:Wg()}}function Ad(t,i,s){return t=t!==null?t.childLanes&~s:0,i&&(t|=Cr),t}function h_(t,i,s){var l=i.pendingProps,h=!1,m=(i.flags&128)!==0,T;if((T=m)||(T=t!==null&&t.memoizedState===null?!1:(pn.current&2)!==0),T&&(h=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,t===null){if(St){if(h?fa(i):da(),St){var A=$t,P;if(P=A){e:{for(P=A,A=ai;P.nodeType!==8;){if(!A){A=null;break e}if(P=kr(P.nextSibling),P===null){A=null;break e}}A=P}A!==null?(i.memoizedState={dehydrated:A,treeContext:ds!==null?{id:Mi,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},P=sr(18,null,null,0),P.stateNode=A,P.return=i,i.child=P,Kn=i,$t=null,P=!0):P=!1}P||gs(i)}if(A=i.memoizedState,A!==null&&(A=A.dehydrated,A!==null))return lm(A)?i.lanes=32:i.lanes=536870912,null;Ui(i)}return A=l.children,l=l.fallback,h?(da(),h=i.mode,A=Oc({mode:"hidden",children:A},h),l=fs(l,h,s,null),A.return=i,l.return=i,A.sibling=l,i.child=A,h=i.child,h.memoizedState=wd(s),h.childLanes=Ad(t,T,s),i.memoizedState=Sd,l):(fa(i),Rd(i,A))}if(P=t.memoizedState,P!==null&&(A=P.dehydrated,A!==null)){if(m)i.flags&256?(fa(i),i.flags&=-257,i=Cd(t,i,s)):i.memoizedState!==null?(da(),i.child=t.child,i.flags|=128,i=null):(da(),h=l.fallback,A=i.mode,l=Oc({mode:"visible",children:l.children},A),h=fs(h,A,s,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,po(i,t.child,null,s),l=i.child,l.memoizedState=wd(s),l.childLanes=Ad(t,T,s),i.memoizedState=Sd,i=h);else if(fa(i),lm(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var W=T.dgst;T=W,l=Error(a(419)),l.stack="",l.digest=T,El({value:l,source:null,stack:null}),i=Cd(t,i,s)}else if(En||Tl(t,i,s,!1),T=(s&t.childLanes)!==0,En||T){if(T=kt,T!==null&&(l=s&-s,l=(l&42)!==0?1:Yr(l),l=(l&(T.suspendedLanes|s))!==0?0:l,l!==0&&l!==P.retryLane))throw P.retryLane=l,ro(t,l),hr(T,t,l),n_;A.data==="$?"||Gd(),i=Cd(t,i,s)}else A.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=P.treeContext,$t=kr(A.nextSibling),Kn=i,St=!0,ps=null,ai=!1,t!==null&&(wr[Ar++]=Mi,wr[Ar++]=Vi,wr[Ar++]=ds,Mi=t.id,Vi=t.overflow,ds=i),i=Rd(i,l.children),i.flags|=4096);return i}return h?(da(),h=l.fallback,A=i.mode,P=t.child,W=P.sibling,l=xi(P,{mode:"hidden",children:l.children}),l.subtreeFlags=P.subtreeFlags&65011712,W!==null?h=xi(W,h):(h=fs(h,A,s,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,A=t.child.memoizedState,A===null?A=wd(s):(P=A.cachePool,P!==null?(W=mn._currentValue,P=P.parent!==W?{parent:W,pool:W}:P):P=Wg(),A={baseLanes:A.baseLanes|s,cachePool:P}),h.memoizedState=A,h.childLanes=Ad(t,T,s),i.memoizedState=Sd,l):(fa(i),s=t.child,t=s.sibling,s=xi(s,{mode:"visible",children:l.children}),s.return=i,s.sibling=null,t!==null&&(T=i.deletions,T===null?(i.deletions=[t],i.flags|=16):T.push(t)),i.child=s,i.memoizedState=null,s)}function Rd(t,i){return i=Oc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Oc(t,i){return t=sr(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Cd(t,i,s){return po(i,t.child,null,s),t=Rd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function f_(t,i,s){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Gf(t.return,i,s)}function Id(t,i,s,l,h){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:h}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=s,m.tailMode=h)}function d_(t,i,s){var l=i.pendingProps,h=l.revealOrder,m=l.tail;if(Cn(t,i,l.children,s),l=pn.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f_(t,s,i);else if(t.tag===19)f_(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(Z(pn,l),h){case"forwards":for(s=i.child,h=null;s!==null;)t=s.alternate,t!==null&&Cc(t)===null&&(h=s),s=s.sibling;s=h,s===null?(h=i.child,i.child=null):(h=s.sibling,s.sibling=null),Id(i,!1,h,s,m);break;case"backwards":for(s=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Cc(t)===null){i.child=h;break}t=h.sibling,h.sibling=s,s=h,h=t}Id(i,!0,s,null,m);break;case"together":Id(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function zi(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),_a|=i.lanes,(s&i.childLanes)===0)if(t!==null){if(Tl(t,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(a(153));if(i.child!==null){for(t=i.child,s=xi(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=xi(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function Dd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&hc(t)))}function pw(t,i,s){switch(i.tag){case 3:le(i,i.stateNode.containerInfo),oa(i,mn,t.memoizedState.cache),vl();break;case 27:case 5:Te(i);break;case 4:le(i,i.stateNode.containerInfo);break;case 10:oa(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(fa(i),i.flags|=128,null):(s&i.child.childLanes)!==0?h_(t,i,s):(fa(i),t=zi(t,i,s),t!==null?t.sibling:null);fa(i);break;case 19:var h=(t.flags&128)!==0;if(l=(s&i.childLanes)!==0,l||(Tl(t,i,s,!1),l=(s&i.childLanes)!==0),h){if(l)return d_(t,i,s);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Z(pn,pn.current),l)break;return null;case 22:case 23:return i.lanes=0,s_(t,i,s);case 24:oa(i,mn,t.memoizedState.cache)}return zi(t,i,s)}function m_(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps)En=!0;else{if(!Dd(t,s)&&(i.flags&128)===0)return En=!1,pw(t,i,s);En=(t.flags&131072)!==0}else En=!1,St&&(i.flags&1048576)!==0&&Fg(i,cc,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")Uf(l)?(t=Ts(l,t),i.tag=1,i=u_(null,i,l,t,s)):(i.tag=0,i=bd(null,i,l,t,s));else{if(l!=null){if(h=l.$$typeof,h===_e){i.tag=11,i=r_(null,i,l,t,s);break e}else if(h===N){i.tag=14,i=i_(null,i,l,t,s);break e}}throw i=Ie(l)||l,Error(a(306,i,""))}}return i;case 0:return bd(t,i,i.type,i.pendingProps,s);case 1:return l=i.type,h=Ts(l,i.pendingProps),u_(t,i,l,h,s);case 3:e:{if(le(i,i.stateNode.containerInfo),t===null)throw Error(a(387));l=i.pendingProps;var m=i.memoizedState;h=m.element,Zf(t,i),Il(i,l,null,s);var T=i.memoizedState;if(l=T.cache,oa(i,mn,l),l!==m.cache&&$f(i,[mn],s,!0),Cl(),l=T.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=c_(t,i,l,s);break e}else if(l!==h){h=br(Error(a(424)),i),El(h),i=c_(t,i,l,s);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for($t=kr(t.firstChild),Kn=i,St=!0,ps=null,ai=!0,s=$y(i,null,l,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(vl(),l===h){i=zi(t,i,s);break e}Cn(t,i,l,s)}i=i.child}return i;case 26:return Nc(t,i),t===null?(s=_v(i.type,null,i.pendingProps,null))?i.memoizedState=s:St||(s=i.type,t=i.pendingProps,l=Gc(Se.current).createElement(s),l[fe]=i,l[pe]=t,Dn(l,s,t),pt(l),i.stateNode=l):i.memoizedState=_v(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Te(i),t===null&&St&&(l=i.stateNode=pv(i.type,i.pendingProps,Se.current),Kn=i,ai=!0,h=$t,ba(i.type)?(um=h,$t=kr(l.firstChild)):$t=h),Cn(t,i,i.pendingProps.children,s),Nc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&St&&((h=l=$t)&&(l=Hw(l,i.type,i.pendingProps,ai),l!==null?(i.stateNode=l,Kn=i,$t=kr(l.firstChild),ai=!1,h=!0):h=!1),h||gs(i)),Te(i),h=i.type,m=i.pendingProps,T=t!==null?t.memoizedProps:null,l=m.children,am(h,m)?l=null:T!==null&&am(h,T)&&(i.flags|=32),i.memoizedState!==null&&(h=id(t,i,ow,null,null,s),Xl._currentValue=h),Nc(t,i),Cn(t,i,l,s),i.child;case 6:return t===null&&St&&((t=s=$t)&&(s=Fw(s,i.pendingProps,ai),s!==null?(i.stateNode=s,Kn=i,$t=null,t=!0):t=!1),t||gs(i)),null;case 13:return h_(t,i,s);case 4:return le(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=po(i,null,l,s):Cn(t,i,l,s),i.child;case 11:return r_(t,i,i.type,i.pendingProps,s);case 7:return Cn(t,i,i.pendingProps,s),i.child;case 8:return Cn(t,i,i.pendingProps.children,s),i.child;case 12:return Cn(t,i,i.pendingProps.children,s),i.child;case 10:return l=i.pendingProps,oa(i,i.type,l.value),Cn(t,i,l.children,s),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,_s(i),h=kn(h),l=l(h),i.flags|=1,Cn(t,i,l,s),i.child;case 14:return i_(t,i,i.type,i.pendingProps,s);case 15:return a_(t,i,i.type,i.pendingProps,s);case 19:return d_(t,i,s);case 31:return l=i.pendingProps,s=i.mode,l={mode:l.mode,children:l.children},t===null?(s=Oc(l,s),s.ref=i.ref,i.child=s,s.return=i,i=s):(s=xi(t.child,l),s.ref=i.ref,i.child=s,s.return=i,i=s),i;case 22:return s_(t,i,s);case 24:return _s(i),l=kn(mn),t===null?(h=Yf(),h===null&&(h=kt,m=Kf(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=s),h=m),i.memoizedState={parent:l,cache:h},Wf(i),oa(i,mn,h)):((t.lanes&s)!==0&&(Zf(t,i),Il(i,null,null,s),Cl()),h=t.memoizedState,m=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),oa(i,mn,l)):(l=m.cache,oa(i,mn,l),l!==h.cache&&$f(i,[mn],s,!0))),Cn(t,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function ji(t){t.flags|=4}function p_(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Sv(i)){if(i=Rr.current,i!==null&&((_t&4194048)===_t?si!==null:(_t&62914560)!==_t&&(_t&536870912)===0||i!==si))throw Al=Xf,Zg;t.flags|=8192}}function xc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Za():536870912,t.lanes|=i,vo|=i)}function Pl(t,i){if(!St)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ht(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(i)for(var h=t.child;h!==null;)s|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)s|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=s,i}function gw(t,i,s){var l=i.pendingProps;switch(qf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(i),null;case 1:return Ht(i),null;case 3:return s=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Li(mn),ye(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(_l(i)?ji(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Kg())),Ht(i),null;case 26:return s=i.memoizedState,t===null?(ji(i),s!==null?(Ht(i),p_(i,s)):(Ht(i),i.flags&=-16777217)):s?s!==t.memoizedState?(ji(i),Ht(i),p_(i,s)):(Ht(i),i.flags&=-16777217):(t.memoizedProps!==l&&ji(i),Ht(i),i.flags&=-16777217),null;case 27:be(i),s=Se.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ji(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return Ht(i),null}t=Ee.current,_l(i)?Gg(i):(t=pv(h,l,s),i.stateNode=t,ji(i))}return Ht(i),null;case 5:if(be(i),s=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ji(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return Ht(i),null}if(t=Ee.current,_l(i))Gg(i);else{switch(h=Gc(Se.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(s,{is:l.is}):h.createElement(s)}}t[fe]=i,t[pe]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(Dn(t,s,l),s){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ji(i)}}return Ht(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ji(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(a(166));if(t=Se.current,_l(i)){if(t=i.stateNode,s=i.memoizedProps,l=null,h=Kn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[fe]=i,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||lv(t.nodeValue,s)),t||gs(i)}else t=Gc(t).createTextNode(l),t[fe]=i,i.stateNode=t}return Ht(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=_l(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(a(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[fe]=i}else vl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ht(i),h=!1}else h=Kg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Ui(i),i):(Ui(i),null)}if(Ui(i),(i.flags&128)!==0)return i.lanes=s,i;if(s=l!==null,t=t!==null&&t.memoizedState!==null,s){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048)}return s!==t&&s&&(i.child.flags|=8192),xc(i,i.updateQueue),Ht(i),null;case 4:return ye(),t===null&&em(i.stateNode.containerInfo),Ht(i),null;case 10:return Li(i.type),Ht(i),null;case 19:if(ie(pn),h=i.memoizedState,h===null)return Ht(i),null;if(l=(i.flags&128)!==0,m=h.rendering,m===null)if(l)Pl(h,!1);else{if(Kt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(m=Cc(t),m!==null){for(i.flags|=128,Pl(h,!1),t=m.updateQueue,i.updateQueue=t,xc(i,t),i.subtreeFlags=0,t=s,s=i.child;s!==null;)Hg(s,t),s=s.sibling;return Z(pn,pn.current&1|2),i.child}t=t.sibling}h.tail!==null&&nt()>Pc&&(i.flags|=128,l=!0,Pl(h,!1),i.lanes=4194304)}else{if(!l)if(t=Cc(m),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,xc(i,t),Pl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!St)return Ht(i),null}else 2*nt()-h.renderingStartTime>Pc&&s!==536870912&&(i.flags|=128,l=!0,Pl(h,!1),i.lanes=4194304);h.isBackwards?(m.sibling=i.child,i.child=m):(t=h.last,t!==null?t.sibling=m:i.child=m,h.last=m)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=nt(),i.sibling=null,t=pn.current,Z(pn,l?t&1|2:t&1),i):(Ht(i),null);case 22:case 23:return Ui(i),nd(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(s&536870912)!==0&&(i.flags&128)===0&&(Ht(i),i.subtreeFlags&6&&(i.flags|=8192)):Ht(i),s=i.updateQueue,s!==null&&xc(i,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==s&&(i.flags|=2048),t!==null&&ie(vs),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),Li(mn),Ht(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function yw(t,i){switch(qf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Li(mn),ye(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return be(i),null;case 13:if(Ui(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(a(340));vl()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ie(pn),null;case 4:return ye(),null;case 10:return Li(i.type),null;case 22:case 23:return Ui(i),nd(),t!==null&&ie(vs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Li(mn),null;case 25:return null;default:return null}}function g_(t,i){switch(qf(i),i.tag){case 3:Li(mn),ye();break;case 26:case 27:case 5:be(i);break;case 4:ye();break;case 13:Ui(i);break;case 19:ie(pn);break;case 10:Li(i.type);break;case 22:case 23:Ui(i),nd(),t!==null&&ie(vs);break;case 24:Li(mn)}}function Ll(t,i){try{var s=i.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var h=l.next;s=h;do{if((s.tag&t)===t){l=void 0;var m=s.create,T=s.inst;l=m(),T.destroy=l}s=s.next}while(s!==h)}}catch(A){Pt(i,i.return,A)}}function ma(t,i,s){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var m=h.next;l=m;do{if((l.tag&t)===t){var T=l.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,h=i;var P=s,W=A;try{W()}catch(se){Pt(h,P,se)}}}l=l.next}while(l!==m)}}catch(se){Pt(i,i.return,se)}}function y_(t){var i=t.updateQueue;if(i!==null){var s=t.stateNode;try{iy(i,s)}catch(l){Pt(t,t.return,l)}}}function __(t,i,s){s.props=Ts(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){Pt(t,i,l)}}function kl(t,i){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(h){Pt(t,i,h)}}function oi(t,i){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(h){Pt(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(h){Pt(t,i,h)}else s.current=null}function v_(t){var i=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(h){Pt(t,t.return,h)}}function Nd(t,i,s){try{var l=t.stateNode;Uw(l,t.type,s,i),l[pe]=i}catch(h){Pt(t,t.return,h)}}function E_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ba(t.type)||t.tag===4}function Od(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||E_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ba(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xd(t,i,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(t),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Fc));else if(l!==4&&(l===27&&ba(t.type)&&(s=t.stateNode,i=null),t=t.child,t!==null))for(xd(t,i,s),t=t.sibling;t!==null;)xd(t,i,s),t=t.sibling}function Mc(t,i,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(l!==4&&(l===27&&ba(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Mc(t,i,s),t=t.sibling;t!==null;)Mc(t,i,s),t=t.sibling}function T_(t){var i=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Dn(i,l,s),i[fe]=t,i[pe]=s}catch(m){Pt(t,t.return,m)}}var Bi=!1,Zt=!1,Md=!1,b_=typeof WeakSet=="function"?WeakSet:Set,Tn=null;function _w(t,i){if(t=t.containerInfo,rm=Wc,t=Mg(t),Of(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var h=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{s.nodeType,m.nodeType}catch{s=null;break e}var T=0,A=-1,P=-1,W=0,se=0,he=t,J=null;t:for(;;){for(var ee;he!==s||h!==0&&he.nodeType!==3||(A=T+h),he!==m||l!==0&&he.nodeType!==3||(P=T+l),he.nodeType===3&&(T+=he.nodeValue.length),(ee=he.firstChild)!==null;)J=he,he=ee;for(;;){if(he===t)break t;if(J===s&&++W===h&&(A=T),J===m&&++se===l&&(P=T),(ee=he.nextSibling)!==null)break;he=J,J=he.parentNode}he=ee}s=A===-1||P===-1?null:{start:A,end:P}}else s=null}s=s||{start:0,end:0}}else s=null;for(im={focusedElem:t,selectionRange:s},Wc=!1,Tn=i;Tn!==null;)if(i=Tn,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Tn=t;else for(;Tn!==null;){switch(i=Tn,m=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,s=i,h=m.memoizedProps,m=m.memoizedState,l=s.stateNode;try{var We=Ts(s.type,h,s.elementType===s.type);t=l.getSnapshotBeforeUpdate(We,m),l.__reactInternalSnapshotBeforeUpdate=t}catch(Fe){Pt(s,s.return,Fe)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,s=t.nodeType,s===9)om(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":om(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=i.sibling,t!==null){t.return=i.return,Tn=t;break}Tn=i.return}}function S_(t,i,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:pa(t,s),l&4&&Ll(5,s);break;case 1:if(pa(t,s),l&4)if(t=s.stateNode,i===null)try{t.componentDidMount()}catch(T){Pt(s,s.return,T)}else{var h=Ts(s.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(T){Pt(s,s.return,T)}}l&64&&y_(s),l&512&&kl(s,s.return);break;case 3:if(pa(t,s),l&64&&(t=s.updateQueue,t!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{iy(t,i)}catch(T){Pt(s,s.return,T)}}break;case 27:i===null&&l&4&&T_(s);case 26:case 5:pa(t,s),i===null&&l&4&&v_(s),l&512&&kl(s,s.return);break;case 12:pa(t,s);break;case 13:pa(t,s),l&4&&R_(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=Cw.bind(null,s),Gw(t,s))));break;case 22:if(l=s.memoizedState!==null||Bi,!l){i=i!==null&&i.memoizedState!==null||Zt,h=Bi;var m=Zt;Bi=l,(Zt=i)&&!m?ga(t,s,(s.subtreeFlags&8772)!==0):pa(t,s),Bi=h,Zt=m}break;case 30:break;default:pa(t,s)}}function w_(t){var i=t.alternate;i!==null&&(t.alternate=null,w_(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Be(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var qt=null,Wn=!1;function qi(t,i,s){for(s=s.child;s!==null;)A_(t,i,s),s=s.sibling}function A_(t,i,s){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(Ge,s)}catch{}switch(s.tag){case 26:Zt||oi(s,i),qi(t,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Zt||oi(s,i);var l=qt,h=Wn;ba(s.type)&&(qt=s.stateNode,Wn=!1),qi(t,i,s),$l(s.stateNode),qt=l,Wn=h;break;case 5:Zt||oi(s,i);case 6:if(l=qt,h=Wn,qt=null,qi(t,i,s),qt=l,Wn=h,qt!==null)if(Wn)try{(qt.nodeType===9?qt.body:qt.nodeName==="HTML"?qt.ownerDocument.body:qt).removeChild(s.stateNode)}catch(m){Pt(s,i,m)}else try{qt.removeChild(s.stateNode)}catch(m){Pt(s,i,m)}break;case 18:qt!==null&&(Wn?(t=qt,dv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),eu(t)):dv(qt,s.stateNode));break;case 4:l=qt,h=Wn,qt=s.stateNode.containerInfo,Wn=!0,qi(t,i,s),qt=l,Wn=h;break;case 0:case 11:case 14:case 15:Zt||ma(2,s,i),Zt||ma(4,s,i),qi(t,i,s);break;case 1:Zt||(oi(s,i),l=s.stateNode,typeof l.componentWillUnmount=="function"&&__(s,i,l)),qi(t,i,s);break;case 21:qi(t,i,s);break;case 22:Zt=(l=Zt)||s.memoizedState!==null,qi(t,i,s),Zt=l;break;default:qi(t,i,s)}}function R_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{eu(t)}catch(s){Pt(i,i.return,s)}}function vw(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new b_),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new b_),i;default:throw Error(a(435,t.tag))}}function Vd(t,i){var s=vw(t);i.forEach(function(l){var h=Iw.bind(null,t,l);s.has(l)||(s.add(l),l.then(h,h))})}function or(t,i){var s=i.deletions;if(s!==null)for(var l=0;l<s.length;l++){var h=s[l],m=t,T=i,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(ba(A.type)){qt=A.stateNode,Wn=!1;break e}break;case 5:qt=A.stateNode,Wn=!1;break e;case 3:case 4:qt=A.stateNode.containerInfo,Wn=!0;break e}A=A.return}if(qt===null)throw Error(a(160));A_(m,T,h),qt=null,Wn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)C_(i,t),i=i.sibling}var Lr=null;function C_(t,i){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:or(i,t),lr(t),l&4&&(ma(3,t,t.return),Ll(3,t),ma(5,t,t.return));break;case 1:or(i,t),lr(t),l&512&&(Zt||s===null||oi(s,s.return)),l&64&&Bi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var h=Lr;if(or(i,t),lr(t),l&512&&(Zt||s===null||oi(s,s.return)),l&4){var m=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":m=h.getElementsByTagName("title")[0],(!m||m[$e]||m[fe]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(l),h.head.insertBefore(m,h.querySelector("head > title"))),Dn(m,l,s),m[fe]=t,pt(m),l=m;break e;case"link":var T=Tv("link","href",h).get(l+(s.href||""));if(T){for(var A=0;A<T.length;A++)if(m=T[A],m.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&m.getAttribute("rel")===(s.rel==null?null:s.rel)&&m.getAttribute("title")===(s.title==null?null:s.title)&&m.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){T.splice(A,1);break t}}m=h.createElement(l),Dn(m,l,s),h.head.appendChild(m);break;case"meta":if(T=Tv("meta","content",h).get(l+(s.content||""))){for(A=0;A<T.length;A++)if(m=T[A],m.getAttribute("content")===(s.content==null?null:""+s.content)&&m.getAttribute("name")===(s.name==null?null:s.name)&&m.getAttribute("property")===(s.property==null?null:s.property)&&m.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&m.getAttribute("charset")===(s.charSet==null?null:s.charSet)){T.splice(A,1);break t}}m=h.createElement(l),Dn(m,l,s),h.head.appendChild(m);break;default:throw Error(a(468,l))}m[fe]=t,pt(m),l=m}t.stateNode=l}else bv(h,t.type,t.stateNode);else t.stateNode=Ev(h,l,t.memoizedProps);else m!==l?(m===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):m.count--,l===null?bv(h,t.type,t.stateNode):Ev(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Nd(t,t.memoizedProps,s.memoizedProps)}break;case 27:or(i,t),lr(t),l&512&&(Zt||s===null||oi(s,s.return)),s!==null&&l&4&&Nd(t,t.memoizedProps,s.memoizedProps);break;case 5:if(or(i,t),lr(t),l&512&&(Zt||s===null||oi(s,s.return)),t.flags&32){h=t.stateNode;try{_r(h,"")}catch(ee){Pt(t,t.return,ee)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Nd(t,h,s!==null?s.memoizedProps:h)),l&1024&&(Md=!0);break;case 6:if(or(i,t),lr(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(ee){Pt(t,t.return,ee)}}break;case 3:if(Qc=null,h=Lr,Lr=$c(i.containerInfo),or(i,t),Lr=h,lr(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{eu(i.containerInfo)}catch(ee){Pt(t,t.return,ee)}Md&&(Md=!1,I_(t));break;case 4:l=Lr,Lr=$c(t.stateNode.containerInfo),or(i,t),lr(t),Lr=l;break;case 12:or(i,t),lr(t);break;case 13:or(i,t),lr(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(jd=nt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Vd(t,l)));break;case 22:h=t.memoizedState!==null;var P=s!==null&&s.memoizedState!==null,W=Bi,se=Zt;if(Bi=W||h,Zt=se||P,or(i,t),Zt=se,Bi=W,lr(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(s===null||P||Bi||Zt||bs(t)),s=null,i=t;;){if(i.tag===5||i.tag===26){if(s===null){P=s=i;try{if(m=P.stateNode,h)T=m.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=P.stateNode;var he=P.memoizedProps.style,J=he!=null&&he.hasOwnProperty("display")?he.display:null;A.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ee){Pt(P,P.return,ee)}}}else if(i.tag===6){if(s===null){P=i;try{P.stateNode.nodeValue=h?"":P.memoizedProps}catch(ee){Pt(P,P.return,ee)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Vd(t,s))));break;case 19:or(i,t),lr(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Vd(t,l)));break;case 30:break;case 21:break;default:or(i,t),lr(t)}}function lr(t){var i=t.flags;if(i&2){try{for(var s,l=t.return;l!==null;){if(E_(l)){s=l;break}l=l.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var h=s.stateNode,m=Od(t);Mc(t,m,h);break;case 5:var T=s.stateNode;s.flags&32&&(_r(T,""),s.flags&=-33);var A=Od(t);Mc(t,A,T);break;case 3:case 4:var P=s.stateNode.containerInfo,W=Od(t);xd(t,W,P);break;default:throw Error(a(161))}}catch(se){Pt(t,t.return,se)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function I_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;I_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function pa(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)S_(t,i.alternate,i),i=i.sibling}function bs(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:ma(4,i,i.return),bs(i);break;case 1:oi(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&__(i,i.return,s),bs(i);break;case 27:$l(i.stateNode);case 26:case 5:oi(i,i.return),bs(i);break;case 22:i.memoizedState===null&&bs(i);break;case 30:bs(i);break;default:bs(i)}t=t.sibling}}function ga(t,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,m=i,T=m.flags;switch(m.tag){case 0:case 11:case 15:ga(h,m,s),Ll(4,m);break;case 1:if(ga(h,m,s),l=m,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(W){Pt(l,l.return,W)}if(l=m,h=l.updateQueue,h!==null){var A=l.stateNode;try{var P=h.shared.hiddenCallbacks;if(P!==null)for(h.shared.hiddenCallbacks=null,h=0;h<P.length;h++)ry(P[h],A)}catch(W){Pt(l,l.return,W)}}s&&T&64&&y_(m),kl(m,m.return);break;case 27:T_(m);case 26:case 5:ga(h,m,s),s&&l===null&&T&4&&v_(m),kl(m,m.return);break;case 12:ga(h,m,s);break;case 13:ga(h,m,s),s&&T&4&&R_(h,m);break;case 22:m.memoizedState===null&&ga(h,m,s),kl(m,m.return);break;case 30:break;default:ga(h,m,s)}i=i.sibling}}function Pd(t,i){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&bl(s))}function Ld(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&bl(t))}function li(t,i,s,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)D_(t,i,s,l),i=i.sibling}function D_(t,i,s,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:li(t,i,s,l),h&2048&&Ll(9,i);break;case 1:li(t,i,s,l);break;case 3:li(t,i,s,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&bl(t)));break;case 12:if(h&2048){li(t,i,s,l),t=i.stateNode;try{var m=i.memoizedProps,T=m.id,A=m.onPostCommit;typeof A=="function"&&A(T,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(P){Pt(i,i.return,P)}}else li(t,i,s,l);break;case 13:li(t,i,s,l);break;case 23:break;case 22:m=i.stateNode,T=i.alternate,i.memoizedState!==null?m._visibility&2?li(t,i,s,l):Ul(t,i):m._visibility&2?li(t,i,s,l):(m._visibility|=2,go(t,i,s,l,(i.subtreeFlags&10256)!==0)),h&2048&&Pd(T,i);break;case 24:li(t,i,s,l),h&2048&&Ld(i.alternate,i);break;default:li(t,i,s,l)}}function go(t,i,s,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var m=t,T=i,A=s,P=l,W=T.flags;switch(T.tag){case 0:case 11:case 15:go(m,T,A,P,h),Ll(8,T);break;case 23:break;case 22:var se=T.stateNode;T.memoizedState!==null?se._visibility&2?go(m,T,A,P,h):Ul(m,T):(se._visibility|=2,go(m,T,A,P,h)),h&&W&2048&&Pd(T.alternate,T);break;case 24:go(m,T,A,P,h),h&&W&2048&&Ld(T.alternate,T);break;default:go(m,T,A,P,h)}i=i.sibling}}function Ul(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=t,l=i,h=l.flags;switch(l.tag){case 22:Ul(s,l),h&2048&&Pd(l.alternate,l);break;case 24:Ul(s,l),h&2048&&Ld(l.alternate,l);break;default:Ul(s,l)}i=i.sibling}}var zl=8192;function yo(t){if(t.subtreeFlags&zl)for(t=t.child;t!==null;)N_(t),t=t.sibling}function N_(t){switch(t.tag){case 26:yo(t),t.flags&zl&&t.memoizedState!==null&&i1(Lr,t.memoizedState,t.memoizedProps);break;case 5:yo(t);break;case 3:case 4:var i=Lr;Lr=$c(t.stateNode.containerInfo),yo(t),Lr=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=zl,zl=16777216,yo(t),zl=i):yo(t));break;default:yo(t)}}function O_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function jl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var l=i[s];Tn=l,M_(l,t)}O_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)x_(t),t=t.sibling}function x_(t){switch(t.tag){case 0:case 11:case 15:jl(t),t.flags&2048&&ma(9,t,t.return);break;case 3:jl(t);break;case 12:jl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Vc(t)):jl(t);break;default:jl(t)}}function Vc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var l=i[s];Tn=l,M_(l,t)}O_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:ma(8,i,i.return),Vc(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,Vc(i));break;default:Vc(i)}t=t.sibling}}function M_(t,i){for(;Tn!==null;){var s=Tn;switch(s.tag){case 0:case 11:case 15:ma(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:bl(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Tn=l;else e:for(s=t;Tn!==null;){l=Tn;var h=l.sibling,m=l.return;if(w_(l),l===s){Tn=null;break e}if(h!==null){h.return=m,Tn=h;break e}Tn=m}}}var Ew={getCacheForType:function(t){var i=kn(mn),s=i.data.get(t);return s===void 0&&(s=t(),i.data.set(t,s)),s}},Tw=typeof WeakMap=="function"?WeakMap:Map,Ct=0,kt=null,ut=null,_t=0,It=0,ur=null,ya=!1,_o=!1,kd=!1,Hi=0,Kt=0,_a=0,Ss=0,Ud=0,Cr=0,vo=0,Bl=null,Zn=null,zd=!1,jd=0,Pc=1/0,Lc=null,va=null,In=0,Ea=null,Eo=null,To=0,Bd=0,qd=null,V_=null,ql=0,Hd=null;function cr(){if((Ct&2)!==0&&_t!==0)return _t&-_t;if(G.T!==null){var t=oo;return t!==0?t:Xd()}return L()}function P_(){Cr===0&&(Cr=(_t&536870912)===0||St?Si():536870912);var t=Rr.current;return t!==null&&(t.flags|=32),Cr}function hr(t,i,s){(t===kt&&(It===2||It===9)||t.cancelPendingCommit!==null)&&(bo(t,0),Ta(t,_t,Cr,!1)),Mr(t,s),((Ct&2)===0||t!==kt)&&(t===kt&&((Ct&2)===0&&(Ss|=s),Kt===4&&Ta(t,_t,Cr,!1)),ui(t))}function L_(t,i,s){if((Ct&6)!==0)throw Error(a(327));var l=!s&&(i&124)===0&&(i&t.expiredLanes)===0||mr(t,i),h=l?ww(t,i):$d(t,i,!0),m=l;do{if(h===0){_o&&!l&&Ta(t,i,0,!1);break}else{if(s=t.current.alternate,m&&!bw(s)){h=$d(t,i,!1),m=!1;continue}if(h===2){if(m=i,t.errorRecoveryDisabledLanes&m)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var A=t;h=Bl;var P=A.current.memoizedState.isDehydrated;if(P&&(bo(A,T).flags|=256),T=$d(A,T,!1),T!==2){if(kd&&!P){A.errorRecoveryDisabledLanes|=m,Ss|=m,h=4;break e}m=Zn,Zn=h,m!==null&&(Zn===null?Zn=m:Zn.push.apply(Zn,m))}h=T}if(m=!1,h!==2)continue}}if(h===1){bo(t,0),Ta(t,i,0,!0);break}e:{switch(l=t,m=h,m){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Ta(l,i,Cr,!ya);break e;case 2:Zn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(h=jd+300-nt(),10<h)){if(Ta(l,i,Cr,!ya),bi(l,0,!0)!==0)break e;l.timeoutHandle=hv(k_.bind(null,l,s,Zn,Lc,zd,i,Cr,Ss,vo,ya,m,2,-0,0),h);break e}k_(l,s,Zn,Lc,zd,i,Cr,Ss,vo,ya,m,0,-0,0)}}break}while(!0);ui(t)}function k_(t,i,s,l,h,m,T,A,P,W,se,he,J,ee){if(t.timeoutHandle=-1,he=i.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(Yl={stylesheets:null,count:0,unsuspend:r1},N_(i),he=a1(),he!==null)){t.cancelPendingCommit=he(F_.bind(null,t,i,m,s,l,h,T,A,P,se,1,J,ee)),Ta(t,m,T,!W);return}F_(t,i,m,s,l,h,T,A,P)}function bw(t){for(var i=t;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var h=s[l],m=h.getSnapshot;h=h.value;try{if(!ar(m(),h))return!1}catch{return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ta(t,i,s,l){i&=~Ud,i&=~Ss,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var m=31-Bt(h),T=1<<m;l[m]=-1,h&=~T}s!==0&&Hn(t,s,i)}function kc(){return(Ct&6)===0?(Hl(0),!1):!0}function Fd(){if(ut!==null){if(It===0)var t=ut.return;else t=ut,Pi=ys=null,od(t),mo=null,Ml=0,t=ut;for(;t!==null;)g_(t.alternate,t),t=t.return;ut=null}}function bo(t,i){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,jw(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Fd(),kt=t,ut=s=xi(t.current,null),_t=i,It=0,ur=null,ya=!1,_o=mr(t,i),kd=!1,vo=Cr=Ud=Ss=_a=Kt=0,Zn=Bl=null,zd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Bt(l),m=1<<h;i|=t[h],l&=~m}return Hi=i,ac(),s}function U_(t,i){it=null,G.H=wc,i===wl||i===mc?(i=ty(),It=3):i===Zg?(i=ty(),It=4):It=i===n_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ur=i,ut===null&&(Kt=1,Dc(t,br(i,t.current)))}function z_(){var t=G.H;return G.H=wc,t===null?wc:t}function j_(){var t=G.A;return G.A=Ew,t}function Gd(){Kt=4,ya||(_t&4194048)!==_t&&Rr.current!==null||(_o=!0),(_a&134217727)===0&&(Ss&134217727)===0||kt===null||Ta(kt,_t,Cr,!1)}function $d(t,i,s){var l=Ct;Ct|=2;var h=z_(),m=j_();(kt!==t||_t!==i)&&(Lc=null,bo(t,i)),i=!1;var T=Kt;e:do try{if(It!==0&&ut!==null){var A=ut,P=ur;switch(It){case 8:Fd(),T=6;break e;case 3:case 2:case 9:case 6:Rr.current===null&&(i=!0);var W=It;if(It=0,ur=null,So(t,A,P,W),s&&_o){T=0;break e}break;default:W=It,It=0,ur=null,So(t,A,P,W)}}Sw(),T=Kt;break}catch(se){U_(t,se)}while(!0);return i&&t.shellSuspendCounter++,Pi=ys=null,Ct=l,G.H=h,G.A=m,ut===null&&(kt=null,_t=0,ac()),T}function Sw(){for(;ut!==null;)B_(ut)}function ww(t,i){var s=Ct;Ct|=2;var l=z_(),h=j_();kt!==t||_t!==i?(Lc=null,Pc=nt()+500,bo(t,i)):_o=mr(t,i);e:do try{if(It!==0&&ut!==null){i=ut;var m=ur;t:switch(It){case 1:It=0,ur=null,So(t,i,m,1);break;case 2:case 9:if(Jg(m)){It=0,ur=null,q_(i);break}i=function(){It!==2&&It!==9||kt!==t||(It=7),ui(t)},m.then(i,i);break e;case 3:It=7;break e;case 4:It=5;break e;case 7:Jg(m)?(It=0,ur=null,q_(i)):(It=0,ur=null,So(t,i,m,7));break;case 5:var T=null;switch(ut.tag){case 26:T=ut.memoizedState;case 5:case 27:var A=ut;if(!T||Sv(T)){It=0,ur=null;var P=A.sibling;if(P!==null)ut=P;else{var W=A.return;W!==null?(ut=W,Uc(W)):ut=null}break t}}It=0,ur=null,So(t,i,m,5);break;case 6:It=0,ur=null,So(t,i,m,6);break;case 8:Fd(),Kt=6;break e;default:throw Error(a(462))}}Aw();break}catch(se){U_(t,se)}while(!0);return Pi=ys=null,G.H=l,G.A=h,Ct=s,ut!==null?0:(kt=null,_t=0,ac(),Kt)}function Aw(){for(;ut!==null&&!He();)B_(ut)}function B_(t){var i=m_(t.alternate,t,Hi);t.memoizedProps=t.pendingProps,i===null?Uc(t):ut=i}function q_(t){var i=t,s=i.alternate;switch(i.tag){case 15:case 0:i=l_(s,i,i.pendingProps,i.type,void 0,_t);break;case 11:i=l_(s,i,i.pendingProps,i.type.render,i.ref,_t);break;case 5:od(i);default:g_(s,i),i=ut=Hg(i,Hi),i=m_(s,i,Hi)}t.memoizedProps=t.pendingProps,i===null?Uc(t):ut=i}function So(t,i,s,l){Pi=ys=null,od(i),mo=null,Ml=0;var h=i.return;try{if(mw(t,h,i,s,_t)){Kt=1,Dc(t,br(s,t.current)),ut=null;return}}catch(m){if(h!==null)throw ut=h,m;Kt=1,Dc(t,br(s,t.current)),ut=null;return}i.flags&32768?(St||l===1?t=!0:_o||(_t&536870912)!==0?t=!1:(ya=t=!0,(l===2||l===9||l===3||l===6)&&(l=Rr.current,l!==null&&l.tag===13&&(l.flags|=16384))),H_(i,t)):Uc(i)}function Uc(t){var i=t;do{if((i.flags&32768)!==0){H_(i,ya);return}t=i.return;var s=gw(i.alternate,i,Hi);if(s!==null){ut=s;return}if(i=i.sibling,i!==null){ut=i;return}ut=i=t}while(i!==null);Kt===0&&(Kt=5)}function H_(t,i){do{var s=yw(t.alternate,t);if(s!==null){s.flags&=32767,ut=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(t=t.sibling,t!==null)){ut=t;return}ut=t=s}while(t!==null);Kt=6,ut=null}function F_(t,i,s,l,h,m,T,A,P){t.cancelPendingCommit=null;do zc();while(In!==0);if((Ct&6)!==0)throw Error(a(327));if(i!==null){if(i===t.current)throw Error(a(177));if(m=i.lanes|i.childLanes,m|=Lf,na(t,s,m,T,A,P),t===kt&&(ut=kt=null,_t=0),Eo=i,Ea=t,To=s,Bd=m,qd=h,V_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Dw(Vn,function(){return Y_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=G.T,G.T=null,h=re.p,re.p=2,T=Ct,Ct|=4;try{_w(t,i,s)}finally{Ct=T,re.p=h,G.T=l}}In=1,G_(),$_(),K_()}}function G_(){if(In===1){In=0;var t=Ea,i=Eo,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=G.T,G.T=null;var l=re.p;re.p=2;var h=Ct;Ct|=4;try{C_(i,t);var m=im,T=Mg(t.containerInfo),A=m.focusedElem,P=m.selectionRange;if(T!==A&&A&&A.ownerDocument&&xg(A.ownerDocument.documentElement,A)){if(P!==null&&Of(A)){var W=P.start,se=P.end;if(se===void 0&&(se=W),"selectionStart"in A)A.selectionStart=W,A.selectionEnd=Math.min(se,A.value.length);else{var he=A.ownerDocument||document,J=he&&he.defaultView||window;if(J.getSelection){var ee=J.getSelection(),We=A.textContent.length,Fe=Math.min(P.start,We),Mt=P.end===void 0?Fe:Math.min(P.end,We);!ee.extend&&Fe>Mt&&(T=Mt,Mt=Fe,Fe=T);var j=Og(A,Fe),U=Og(A,Mt);if(j&&U&&(ee.rangeCount!==1||ee.anchorNode!==j.node||ee.anchorOffset!==j.offset||ee.focusNode!==U.node||ee.focusOffset!==U.offset)){var K=he.createRange();K.setStart(j.node,j.offset),ee.removeAllRanges(),Fe>Mt?(ee.addRange(K),ee.extend(U.node,U.offset)):(K.setEnd(U.node,U.offset),ee.addRange(K))}}}}for(he=[],ee=A;ee=ee.parentNode;)ee.nodeType===1&&he.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<he.length;A++){var ue=he[A];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Wc=!!rm,im=rm=null}finally{Ct=h,re.p=l,G.T=s}}t.current=i,In=2}}function $_(){if(In===2){In=0;var t=Ea,i=Eo,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=G.T,G.T=null;var l=re.p;re.p=2;var h=Ct;Ct|=4;try{S_(t,i.alternate,i)}finally{Ct=h,re.p=l,G.T=s}}In=3}}function K_(){if(In===4||In===3){In=0,Ne();var t=Ea,i=Eo,s=To,l=V_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?In=5:(In=0,Eo=Ea=null,Q_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(va=null),ra(s),i=i.stateNode,ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(Ge,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=G.T,h=re.p,re.p=2,G.T=null;try{for(var m=t.onRecoverableError,T=0;T<l.length;T++){var A=l[T];m(A.value,{componentStack:A.stack})}}finally{G.T=i,re.p=h}}(To&3)!==0&&zc(),ui(t),h=t.pendingLanes,(s&4194090)!==0&&(h&42)!==0?t===Hd?ql++:(ql=0,Hd=t):ql=0,Hl(0)}}function Q_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,bl(i)))}function zc(t){return G_(),$_(),K_(),Y_()}function Y_(){if(In!==5)return!1;var t=Ea,i=Bd;Bd=0;var s=ra(To),l=G.T,h=re.p;try{re.p=32>s?32:s,G.T=null,s=qd,qd=null;var m=Ea,T=To;if(In=0,Eo=Ea=null,To=0,(Ct&6)!==0)throw Error(a(331));var A=Ct;if(Ct|=4,x_(m.current),D_(m,m.current,T,s),Ct=A,Hl(0,!1),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(Ge,m)}catch{}return!0}finally{re.p=h,G.T=l,Q_(t,i)}}function X_(t,i,s){i=br(s,i),i=Td(t.stateNode,i,2),t=ca(t,i,2),t!==null&&(Mr(t,2),ui(t))}function Pt(t,i,s){if(t.tag===3)X_(t,t,s);else for(;i!==null;){if(i.tag===3){X_(i,t,s);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(va===null||!va.has(l))){t=br(s,t),s=e_(2),l=ca(i,s,2),l!==null&&(t_(s,l,i,t),Mr(l,2),ui(l));break}}i=i.return}}function Kd(t,i,s){var l=t.pingCache;if(l===null){l=t.pingCache=new Tw;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(s)||(kd=!0,h.add(s),t=Rw.bind(null,t,i,s),i.then(t,t))}function Rw(t,i,s){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,kt===t&&(_t&s)===s&&(Kt===4||Kt===3&&(_t&62914560)===_t&&300>nt()-jd?(Ct&2)===0&&bo(t,0):Ud|=s,vo===_t&&(vo=0)),ui(t)}function W_(t,i){i===0&&(i=Za()),t=ro(t,i),t!==null&&(Mr(t,i),ui(t))}function Cw(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),W_(t,s)}function Iw(t,i){var s=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(s=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(i),W_(t,s)}function Dw(t,i){return Ue(t,i)}var jc=null,wo=null,Qd=!1,Bc=!1,Yd=!1,ws=0;function ui(t){t!==wo&&t.next===null&&(wo===null?jc=wo=t:wo=wo.next=t),Bc=!0,Qd||(Qd=!0,Ow())}function Hl(t,i){if(!Yd&&Bc){Yd=!0;do for(var s=!1,l=jc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var m=0;else{var T=l.suspendedLanes,A=l.pingedLanes;m=(1<<31-Bt(42|t)+1)-1,m&=h&~(T&~A),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(s=!0,tv(l,m))}else m=_t,m=bi(l,l===kt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||mr(l,m)||(s=!0,tv(l,m));l=l.next}while(s);Yd=!1}}function Nw(){Z_()}function Z_(){Bc=Qd=!1;var t=0;ws!==0&&(zw()&&(t=ws),ws=0);for(var i=nt(),s=null,l=jc;l!==null;){var h=l.next,m=J_(l,i);m===0?(l.next=null,s===null?jc=h:s.next=h,h===null&&(wo=s)):(s=l,(t!==0||(m&3)!==0)&&(Bc=!0)),l=h}Hl(t)}function J_(t,i){for(var s=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var T=31-Bt(m),A=1<<T,P=h[T];P===-1?((A&s)===0||(A&l)!==0)&&(h[T]=ta(A,i)):P<=i&&(t.expiredLanes|=A),m&=~A}if(i=kt,s=_t,s=bi(t,t===i?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===i&&(It===2||It===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&xe(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||mr(t,s)){if(i=s&-s,i===t.callbackPriority)return i;switch(l!==null&&xe(l),ra(s)){case 2:case 8:s=Dt;break;case 32:s=Vn;break;case 268435456:s=yn;break;default:s=Vn}return l=ev.bind(null,t),s=Ue(s,l),t.callbackPriority=i,t.callbackNode=s,i}return l!==null&&l!==null&&xe(l),t.callbackPriority=2,t.callbackNode=null,2}function ev(t,i){if(In!==0&&In!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(zc()&&t.callbackNode!==s)return null;var l=_t;return l=bi(t,t===kt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(L_(t,l,i),J_(t,nt()),t.callbackNode!=null&&t.callbackNode===s?ev.bind(null,t):null)}function tv(t,i){if(zc())return null;L_(t,i,!0)}function Ow(){Bw(function(){(Ct&6)!==0?Ue(Et,Nw):Z_()})}function Xd(){return ws===0&&(ws=Si()),ws}function nv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Gs(""+t)}function rv(t,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,t.id&&s.setAttribute("form",t.id),i.parentNode.insertBefore(s,i),t=new FormData(t),s.parentNode.removeChild(s),t}function xw(t,i,s,l,h){if(i==="submit"&&s&&s.stateNode===h){var m=nv((h[pe]||null).action),T=l.submitter;T&&(i=(i=T[pe]||null)?nv(i.formAction):T.getAttribute("formAction"),i!==null&&(m=i,T=null));var A=new $s("action","action",null,l,h);t.push({event:A,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ws!==0){var P=T?rv(h,T):new FormData(h);gd(s,{pending:!0,data:P,method:h.method,action:m},null,P)}}else typeof m=="function"&&(A.preventDefault(),P=T?rv(h,T):new FormData(h),gd(s,{pending:!0,data:P,method:h.method,action:m},m,P))},currentTarget:h}]})}}for(var Wd=0;Wd<Pf.length;Wd++){var Zd=Pf[Wd],Mw=Zd.toLowerCase(),Vw=Zd[0].toUpperCase()+Zd.slice(1);Pr(Mw,"on"+Vw)}Pr(Lg,"onAnimationEnd"),Pr(kg,"onAnimationIteration"),Pr(Ug,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(WS,"onTransitionRun"),Pr(ZS,"onTransitionStart"),Pr(JS,"onTransitionCancel"),Pr(zg,"onTransitionEnd"),Fn("onMouseEnter",["mouseout","mouseover"]),Fn("onMouseLeave",["mouseout","mouseover"]),Fn("onPointerEnter",["pointerout","pointerover"]),Fn("onPointerLeave",["pointerout","pointerover"]),hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fl));function iv(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],h=l.event;l=l.listeners;e:{var m=void 0;if(i)for(var T=l.length-1;0<=T;T--){var A=l[T],P=A.instance,W=A.currentTarget;if(A=A.listener,P!==m&&h.isPropagationStopped())break e;m=A,h.currentTarget=W;try{m(h)}catch(se){Ic(se)}h.currentTarget=null,m=P}else for(T=0;T<l.length;T++){if(A=l[T],P=A.instance,W=A.currentTarget,A=A.listener,P!==m&&h.isPropagationStopped())break e;m=A,h.currentTarget=W;try{m(h)}catch(se){Ic(se)}h.currentTarget=null,m=P}}}}function ct(t,i){var s=i[je];s===void 0&&(s=i[je]=new Set);var l=t+"__bubble";s.has(l)||(av(i,t,2,!1),s.add(l))}function Jd(t,i,s){var l=0;i&&(l|=4),av(s,t,l,i)}var qc="_reactListening"+Math.random().toString(36).slice(2);function em(t){if(!t[qc]){t[qc]=!0,at.forEach(function(s){s!=="selectionchange"&&(Pw.has(s)||Jd(s,!1,t),Jd(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[qc]||(i[qc]=!0,Jd("selectionchange",!1,i))}}function av(t,i,s,l){switch(Dv(i)){case 2:var h=l1;break;case 8:h=u1;break;default:h=mm}s=h.bind(null,i,s,t),h=void 0,!Er||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,s,{capture:!0,passive:h}):t.addEventListener(i,s,!0):h!==void 0?t.addEventListener(i,s,{passive:h}):t.addEventListener(i,s,!1)}function tm(t,i,s,l,h){var m=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var A=l.stateNode.containerInfo;if(A===h)break;if(T===4)for(T=l.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===h)return;T=T.return}for(;A!==null;){if(T=Xe(A),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){l=m=T;continue e}A=A.parentNode}}l=l.return}Fu(function(){var W=m,se=vr(s),he=[];e:{var J=jg.get(t);if(J!==void 0){var ee=$s,We=t;switch(t){case"keypress":if(ei(s)===0)break e;case"keydown":case"keyup":ee=Zs;break;case"focusin":We="focus",ee=Ys;break;case"focusout":We="blur",ee=Ys;break;case"beforeblur":case"afterblur":ee=Ys;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Tr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Cf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=Zu;break;case Lg:case kg:case Ug:ee=Xs;break;case zg:ee=ec;break;case"scroll":case"scrollend":ee=Gu;break;case"wheel":ee=Js;break;case"copy":case"cut":case"paste":ee=Ws;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=ml;break;case"toggle":case"beforetoggle":ee=nc}var Fe=(i&4)!==0,Mt=!Fe&&(t==="scroll"||t==="scrollend"),j=Fe?J!==null?J+"Capture":null:J;Fe=[];for(var U=W,K;U!==null;){var ue=U;if(K=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||K===null||j===null||(ue=rs(U,j),ue!=null&&Fe.push(Gl(U,ue,K))),Mt)break;U=U.return}0<Fe.length&&(J=new ee(J,We,null,s,se),he.push({event:J,listeners:Fe}))}}if((i&7)===0){e:{if(J=t==="mouseover"||t==="pointerover",ee=t==="mouseout"||t==="pointerout",J&&s!==Ri&&(We=s.relatedTarget||s.fromElement)&&(Xe(We)||We[Ae]))break e;if((ee||J)&&(J=se.window===se?se:(J=se.ownerDocument)?J.defaultView||J.parentWindow:window,ee?(We=s.relatedTarget||s.toElement,ee=W,We=We?Xe(We):null,We!==null&&(Mt=u(We),Fe=We.tag,We!==Mt||Fe!==5&&Fe!==27&&Fe!==6)&&(We=null)):(ee=null,We=W),ee!==We)){if(Fe=Tr,ue="onMouseLeave",j="onMouseEnter",U="mouse",(t==="pointerout"||t==="pointerover")&&(Fe=ml,ue="onPointerLeave",j="onPointerEnter",U="pointer"),Mt=ee==null?J:wt(ee),K=We==null?J:wt(We),J=new Fe(ue,U+"leave",ee,s,se),J.target=Mt,J.relatedTarget=K,ue=null,Xe(se)===W&&(Fe=new Fe(j,U+"enter",We,s,se),Fe.target=K,Fe.relatedTarget=Mt,ue=Fe),Mt=ue,ee&&We)t:{for(Fe=ee,j=We,U=0,K=Fe;K;K=Ao(K))U++;for(K=0,ue=j;ue;ue=Ao(ue))K++;for(;0<U-K;)Fe=Ao(Fe),U--;for(;0<K-U;)j=Ao(j),K--;for(;U--;){if(Fe===j||j!==null&&Fe===j.alternate)break t;Fe=Ao(Fe),j=Ao(j)}Fe=null}else Fe=null;ee!==null&&sv(he,J,ee,Fe,!1),We!==null&&Mt!==null&&sv(he,Mt,We,Fe,!0)}}e:{if(J=W?wt(W):window,ee=J.nodeName&&J.nodeName.toLowerCase(),ee==="select"||ee==="input"&&J.type==="file")var Oe=Ag;else if(dn(J))if(Rg)Oe=QS;else{Oe=$S;var st=GS}else ee=J.nodeName,!ee||ee.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?W&&ol(W.elementType)&&(Oe=Ag):Oe=KS;if(Oe&&(Oe=Oe(t,W))){Oi(he,Oe,s,se);break e}st&&st(t,J,W),t==="focusout"&&W&&J.type==="number"&&W.memoizedProps.value!=null&&aa(J,"number",J.value)}switch(st=W?wt(W):window,t){case"focusin":(dn(st)||st.contentEditable==="true")&&(eo=st,xf=W,yl=null);break;case"focusout":yl=xf=eo=null;break;case"mousedown":Mf=!0;break;case"contextmenu":case"mouseup":case"dragend":Mf=!1,Vg(he,s,se);break;case"selectionchange":if(XS)break;case"keydown":case"keyup":Vg(he,s,se)}var Pe;if(ri)e:{switch(t){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else gt?te(t,s)&&(Ke="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Ke="onCompositionStart");Ke&&(v&&s.locale!=="ko"&&(gt||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&gt&&(Pe=ul()):(Jr=se,sa="value"in Jr?Jr.value:Jr.textContent,gt=!0)),st=Hc(W,Ke),0<st.length&&(Ke=new fl(Ke,t,null,s,se),he.push({event:Ke,listeners:st}),Pe?Ke.data=Pe:(Pe=ve(s),Pe!==null&&(Ke.data=Pe)))),(Pe=y?fn(t,s):yt(t,s))&&(Ke=Hc(W,"onBeforeInput"),0<Ke.length&&(st=new fl("onBeforeInput","beforeinput",null,s,se),he.push({event:st,listeners:Ke}),st.data=Pe)),xw(he,t,W,s,se)}iv(he,i)})}function Gl(t,i,s){return{instance:t,listener:i,currentTarget:s}}function Hc(t,i){for(var s=i+"Capture",l=[];t!==null;){var h=t,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=rs(t,s),h!=null&&l.unshift(Gl(t,h,m)),h=rs(t,i),h!=null&&l.push(Gl(t,h,m))),t.tag===3)return l;t=t.return}return[]}function Ao(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function sv(t,i,s,l,h){for(var m=i._reactName,T=[];s!==null&&s!==l;){var A=s,P=A.alternate,W=A.stateNode;if(A=A.tag,P!==null&&P===l)break;A!==5&&A!==26&&A!==27||W===null||(P=W,h?(W=rs(s,m),W!=null&&T.unshift(Gl(s,W,P))):h||(W=rs(s,m),W!=null&&T.push(Gl(s,W,P)))),s=s.return}T.length!==0&&t.push({event:i,listeners:T})}var Lw=/\r\n?/g,kw=/\u0000|\uFFFD/g;function ov(t){return(typeof t=="string"?t:""+t).replace(Lw,`
`).replace(kw,"")}function lv(t,i){return i=ov(i),ov(t)===i}function Fc(){}function xt(t,i,s,l,h,m){switch(s){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||_r(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&_r(t,""+l);break;case"className":Gn(t,"class",l);break;case"tabIndex":Gn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Gn(t,s,l);break;case"style":sl(t,l,m);break;case"data":if(i!=="object"){Gn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Gs(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(s==="formAction"?(i!=="input"&&xt(t,i,"name",h.name,h,null),xt(t,i,"formEncType",h.formEncType,h,null),xt(t,i,"formMethod",h.formMethod,h,null),xt(t,i,"formTarget",h.formTarget,h,null)):(xt(t,i,"encType",h.encType,h,null),xt(t,i,"method",h.method,h,null),xt(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Gs(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=Fc);break;case"onScroll":l!=null&&ct("scroll",t);break;case"onScrollEnd":l!=null&&ct("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=Gs(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":ct("beforetoggle",t),ct("toggle",t),Ln(t,"popover",l);break;case"xlinkActuate":Je(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Je(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Je(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Je(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Je(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Je(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Je(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Je(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Je(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ln(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Af.get(s)||s,Ln(t,s,l))}}function nm(t,i,s,l,h,m){switch(s){case"style":sl(t,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(h.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof l=="string"?_r(t,l):(typeof l=="number"||typeof l=="bigint")&&_r(t,""+l);break;case"onScroll":l!=null&&ct("scroll",t);break;case"onScrollEnd":l!=null&&ct("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Fc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gr.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(h=s.endsWith("Capture"),i=s.slice(2,h?s.length-7:void 0),m=t[pe]||null,m=m!=null?m[s]:null,typeof m=="function"&&t.removeEventListener(i,m,h),typeof l=="function")){typeof m!="function"&&m!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(i,l,h);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):Ln(t,s,l)}}}function Dn(t,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",t),ct("load",t);var l=!1,h=!1,m;for(m in s)if(s.hasOwnProperty(m)){var T=s[m];if(T!=null)switch(m){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:xt(t,i,m,T,s,null)}}h&&xt(t,i,"srcSet",s.srcSet,s,null),l&&xt(t,i,"src",s.src,s,null);return;case"input":ct("invalid",t);var A=m=T=h=null,P=null,W=null;for(l in s)if(s.hasOwnProperty(l)){var se=s[l];if(se!=null)switch(l){case"name":h=se;break;case"type":T=se;break;case"checked":P=se;break;case"defaultChecked":W=se;break;case"value":m=se;break;case"defaultValue":A=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,i));break;default:xt(t,i,l,se,s,null)}}es(t,m,A,P,W,T,h,!1),Fs(t);return;case"select":ct("invalid",t),l=T=m=null;for(h in s)if(s.hasOwnProperty(h)&&(A=s[h],A!=null))switch(h){case"value":m=A;break;case"defaultValue":T=A;break;case"multiple":l=A;default:xt(t,i,h,A,s,null)}i=m,s=T,t.multiple=!!l,i!=null?Ai(t,!!l,i,!1):s!=null&&Ai(t,!!l,s,!0);return;case"textarea":ct("invalid",t),m=h=l=null;for(T in s)if(s.hasOwnProperty(T)&&(A=s[T],A!=null))switch(T){case"value":l=A;break;case"defaultValue":h=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:xt(t,i,T,A,s,null)}ts(t,l,h,m),Fs(t);return;case"option":for(P in s)if(s.hasOwnProperty(P)&&(l=s[P],l!=null))switch(P){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:xt(t,i,P,l,s,null)}return;case"dialog":ct("beforetoggle",t),ct("toggle",t),ct("cancel",t),ct("close",t);break;case"iframe":case"object":ct("load",t);break;case"video":case"audio":for(l=0;l<Fl.length;l++)ct(Fl[l],t);break;case"image":ct("error",t),ct("load",t);break;case"details":ct("toggle",t);break;case"embed":case"source":case"link":ct("error",t),ct("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in s)if(s.hasOwnProperty(W)&&(l=s[W],l!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:xt(t,i,W,l,s,null)}return;default:if(ol(i)){for(se in s)s.hasOwnProperty(se)&&(l=s[se],l!==void 0&&nm(t,i,se,l,s,void 0));return}}for(A in s)s.hasOwnProperty(A)&&(l=s[A],l!=null&&xt(t,i,A,l,s,null))}function Uw(t,i,s,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,T=null,A=null,P=null,W=null,se=null;for(ee in s){var he=s[ee];if(s.hasOwnProperty(ee)&&he!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":P=he;default:l.hasOwnProperty(ee)||xt(t,i,ee,null,l,he)}}for(var J in l){var ee=l[J];if(he=s[J],l.hasOwnProperty(J)&&(ee!=null||he!=null))switch(J){case"type":m=ee;break;case"name":h=ee;break;case"checked":W=ee;break;case"defaultChecked":se=ee;break;case"value":T=ee;break;case"defaultValue":A=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(a(137,i));break;default:ee!==he&&xt(t,i,J,ee,l,he)}}ir(t,T,A,P,W,se,m,h);return;case"select":ee=T=A=J=null;for(m in s)if(P=s[m],s.hasOwnProperty(m)&&P!=null)switch(m){case"value":break;case"multiple":ee=P;default:l.hasOwnProperty(m)||xt(t,i,m,null,l,P)}for(h in l)if(m=l[h],P=s[h],l.hasOwnProperty(h)&&(m!=null||P!=null))switch(h){case"value":J=m;break;case"defaultValue":A=m;break;case"multiple":T=m;default:m!==P&&xt(t,i,h,m,l,P)}i=A,s=T,l=ee,J!=null?Ai(t,!!s,J,!1):!!l!=!!s&&(i!=null?Ai(t,!!s,i,!0):Ai(t,!!s,s?[]:"",!1));return;case"textarea":ee=J=null;for(A in s)if(h=s[A],s.hasOwnProperty(A)&&h!=null&&!l.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:xt(t,i,A,null,l,h)}for(T in l)if(h=l[T],m=s[T],l.hasOwnProperty(T)&&(h!=null||m!=null))switch(T){case"value":J=h;break;case"defaultValue":ee=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==m&&xt(t,i,T,h,l,m)}Nt(t,J,ee);return;case"option":for(var We in s)if(J=s[We],s.hasOwnProperty(We)&&J!=null&&!l.hasOwnProperty(We))switch(We){case"selected":t.selected=!1;break;default:xt(t,i,We,null,l,J)}for(P in l)if(J=l[P],ee=s[P],l.hasOwnProperty(P)&&J!==ee&&(J!=null||ee!=null))switch(P){case"selected":t.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:xt(t,i,P,J,l,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in s)J=s[Fe],s.hasOwnProperty(Fe)&&J!=null&&!l.hasOwnProperty(Fe)&&xt(t,i,Fe,null,l,J);for(W in l)if(J=l[W],ee=s[W],l.hasOwnProperty(W)&&J!==ee&&(J!=null||ee!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(a(137,i));break;default:xt(t,i,W,J,l,ee)}return;default:if(ol(i)){for(var Mt in s)J=s[Mt],s.hasOwnProperty(Mt)&&J!==void 0&&!l.hasOwnProperty(Mt)&&nm(t,i,Mt,void 0,l,J);for(se in l)J=l[se],ee=s[se],!l.hasOwnProperty(se)||J===ee||J===void 0&&ee===void 0||nm(t,i,se,J,l,ee);return}}for(var j in s)J=s[j],s.hasOwnProperty(j)&&J!=null&&!l.hasOwnProperty(j)&&xt(t,i,j,null,l,J);for(he in l)J=l[he],ee=s[he],!l.hasOwnProperty(he)||J===ee||J==null&&ee==null||xt(t,i,he,J,l,ee)}var rm=null,im=null;function Gc(t){return t.nodeType===9?t:t.ownerDocument}function uv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function am(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var sm=null;function zw(){var t=window.event;return t&&t.type==="popstate"?t===sm?!1:(sm=t,!0):(sm=null,!1)}var hv=typeof setTimeout=="function"?setTimeout:void 0,jw=typeof clearTimeout=="function"?clearTimeout:void 0,fv=typeof Promise=="function"?Promise:void 0,Bw=typeof queueMicrotask=="function"?queueMicrotask:typeof fv<"u"?function(t){return fv.resolve(null).then(t).catch(qw)}:hv;function qw(t){setTimeout(function(){throw t})}function ba(t){return t==="head"}function dv(t,i){var s=i,l=0,h=0;do{var m=s.nextSibling;if(t.removeChild(s),m&&m.nodeType===8)if(s=m.data,s==="/$"){if(0<l&&8>l){s=l;var T=t.ownerDocument;if(s&1&&$l(T.documentElement),s&2&&$l(T.body),s&4)for(s=T.head,$l(s),T=s.firstChild;T;){var A=T.nextSibling,P=T.nodeName;T[$e]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&T.rel.toLowerCase()==="stylesheet"||s.removeChild(T),T=A}}if(h===0){t.removeChild(m),eu(i);return}h--}else s==="$"||s==="$?"||s==="$!"?h++:l=s.charCodeAt(0)-48;else l=0;s=m}while(s);eu(i)}function om(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":om(s),Be(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function Hw(t,i,s,l){for(;t.nodeType===1;){var h=s;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[$e])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=kr(t.nextSibling),t===null)break}return null}function Fw(t,i,s){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=kr(t.nextSibling),t===null))return null;return t}function lm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Gw(t,i){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")i();else{var l=function(){i(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function kr(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var um=null;function mv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return t;i--}else s==="/$"&&i++}t=t.previousSibling}return null}function pv(t,i,s){switch(i=Gc(s),t){case"html":if(t=i.documentElement,!t)throw Error(a(452));return t;case"head":if(t=i.head,!t)throw Error(a(453));return t;case"body":if(t=i.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function $l(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Be(t)}var Ir=new Map,gv=new Set;function $c(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Fi=re.d;re.d={f:$w,r:Kw,D:Qw,C:Yw,L:Xw,m:Ww,X:Jw,S:Zw,M:e1};function $w(){var t=Fi.f(),i=kc();return t||i}function Kw(t){var i=lt(t);i!==null&&i.tag===5&&i.type==="form"?Ly(i):Fi.r(t)}var Ro=typeof document>"u"?null:document;function yv(t,i,s){var l=Ro;if(l&&typeof i=="string"&&i){var h=nn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof s=="string"&&(h+='[crossorigin="'+s+'"]'),gv.has(h)||(gv.add(h),t={rel:t,crossOrigin:s,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Dn(i,"link",t),pt(i),l.head.appendChild(i)))}}function Qw(t){Fi.D(t),yv("dns-prefetch",t,null)}function Yw(t,i){Fi.C(t,i),yv("preconnect",t,i)}function Xw(t,i,s){Fi.L(t,i,s);var l=Ro;if(l&&t&&i){var h='link[rel="preload"][as="'+nn(i)+'"]';i==="image"&&s&&s.imageSrcSet?(h+='[imagesrcset="'+nn(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(h+='[imagesizes="'+nn(s.imageSizes)+'"]')):h+='[href="'+nn(t)+'"]';var m=h;switch(i){case"style":m=Co(t);break;case"script":m=Io(t)}Ir.has(m)||(t=_({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:t,as:i},s),Ir.set(m,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Kl(m))||i==="script"&&l.querySelector(Ql(m))||(i=l.createElement("link"),Dn(i,"link",t),pt(i),l.head.appendChild(i)))}}function Ww(t,i){Fi.m(t,i);var s=Ro;if(s&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+nn(l)+'"][href="'+nn(t)+'"]',m=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Io(t)}if(!Ir.has(m)&&(t=_({rel:"modulepreload",href:t},i),Ir.set(m,t),s.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Ql(m)))return}l=s.createElement("link"),Dn(l,"link",t),pt(l),s.head.appendChild(l)}}}function Zw(t,i,s){Fi.S(t,i,s);var l=Ro;if(l&&t){var h=Tt(l).hoistableStyles,m=Co(t);i=i||"default";var T=h.get(m);if(!T){var A={loading:0,preload:null};if(T=l.querySelector(Kl(m)))A.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":i},s),(s=Ir.get(m))&&cm(t,s);var P=T=l.createElement("link");pt(P),Dn(P,"link",t),P._p=new Promise(function(W,se){P.onload=W,P.onerror=se}),P.addEventListener("load",function(){A.loading|=1}),P.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Kc(T,i,l)}T={type:"stylesheet",instance:T,count:1,state:A},h.set(m,T)}}}function Jw(t,i){Fi.X(t,i);var s=Ro;if(s&&t){var l=Tt(s).hoistableScripts,h=Io(t),m=l.get(h);m||(m=s.querySelector(Ql(h)),m||(t=_({src:t,async:!0},i),(i=Ir.get(h))&&hm(t,i),m=s.createElement("script"),pt(m),Dn(m,"link",t),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function e1(t,i){Fi.M(t,i);var s=Ro;if(s&&t){var l=Tt(s).hoistableScripts,h=Io(t),m=l.get(h);m||(m=s.querySelector(Ql(h)),m||(t=_({src:t,async:!0,type:"module"},i),(i=Ir.get(h))&&hm(t,i),m=s.createElement("script"),pt(m),Dn(m,"link",t),s.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(h,m))}}function _v(t,i,s,l){var h=(h=Se.current)?$c(h):null;if(!h)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=Co(s.href),s=Tt(h).hoistableStyles,l=s.get(i),l||(l={type:"style",instance:null,count:0,state:null},s.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Co(s.href);var m=Tt(h).hoistableStyles,T=m.get(t);if(T||(h=h.ownerDocument||h,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,T),(m=h.querySelector(Kl(t)))&&!m._p&&(T.instance=m,T.state.loading=5),Ir.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Ir.set(t,s),m||t1(h,t,s,T.state))),i&&l===null)throw Error(a(528,""));return T}if(i&&l!==null)throw Error(a(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Io(s),s=Tt(h).hoistableScripts,l=s.get(i),l||(l={type:"script",instance:null,count:0,state:null},s.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Co(t){return'href="'+nn(t)+'"'}function Kl(t){return'link[rel="stylesheet"]['+t+"]"}function vv(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function t1(t,i,s,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Dn(i,"link",s),pt(i),t.head.appendChild(i))}function Io(t){return'[src="'+nn(t)+'"]'}function Ql(t){return"script[async]"+t}function Ev(t,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+nn(s.href)+'"]');if(l)return i.instance=l,pt(l),l;var h=_({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),pt(l),Dn(l,"style",h),Kc(l,s.precedence,t),i.instance=l;case"stylesheet":h=Co(s.href);var m=t.querySelector(Kl(h));if(m)return i.state.loading|=4,i.instance=m,pt(m),m;l=vv(s),(h=Ir.get(h))&&cm(l,h),m=(t.ownerDocument||t).createElement("link"),pt(m);var T=m;return T._p=new Promise(function(A,P){T.onload=A,T.onerror=P}),Dn(m,"link",l),i.state.loading|=4,Kc(m,s.precedence,t),i.instance=m;case"script":return m=Io(s.src),(h=t.querySelector(Ql(m)))?(i.instance=h,pt(h),h):(l=s,(h=Ir.get(m))&&(l=_({},s),hm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),pt(h),Dn(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Kc(l,s.precedence,t));return i.instance}function Kc(t,i,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,m=h,T=0;T<l.length;T++){var A=l[T];if(A.dataset.precedence===i)m=A;else if(m!==h)break}m?m.parentNode.insertBefore(t,m.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(t,i.firstChild))}function cm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function hm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Qc=null;function Tv(t,i,s){if(Qc===null){var l=new Map,h=Qc=new Map;h.set(s,l)}else h=Qc,l=h.get(s),l||(l=new Map,h.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),h=0;h<s.length;h++){var m=s[h];if(!(m[$e]||m[fe]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var T=m.getAttribute(i)||"";T=t+T;var A=l.get(T);A?A.push(m):l.set(T,[m])}}return l}function bv(t,i,s){t=t.ownerDocument||t,t.head.insertBefore(s,i==="title"?t.querySelector("head > title"):null)}function n1(t,i,s){if(s===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Sv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Yl=null;function r1(){}function i1(t,i,s){if(Yl===null)throw Error(a(475));var l=Yl;if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Co(s.href),m=t.querySelector(Kl(h));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Yc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=m,pt(m);return}m=t.ownerDocument||t,s=vv(s),(h=Ir.get(h))&&cm(s,h),m=m.createElement("link"),pt(m);var T=m;T._p=new Promise(function(A,P){T.onload=A,T.onerror=P}),Dn(m,"link",s),i.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Yc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function a1(){if(Yl===null)throw Error(a(475));var t=Yl;return t.stylesheets&&t.count===0&&fm(t,t.stylesheets),0<t.count?function(i){var s=setTimeout(function(){if(t.stylesheets&&fm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(s)}}:null}function Yc(){if(this.count--,this.count===0){if(this.stylesheets)fm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Xc=null;function fm(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Xc=new Map,i.forEach(s1,t),Xc=null,Yc.call(t))}function s1(t,i){if(!(i.state.loading&4)){var s=Xc.get(t);if(s)var l=s.get(null);else{s=new Map,Xc.set(t,s);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var T=h[m];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(s.set(T.dataset.precedence,T),l=T)}l&&s.set(null,l)}h=i.instance,T=h.getAttribute("data-precedence"),m=s.get(T)||l,m===l&&s.set(null,h),s.set(T,h),this.count++,l=Yc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),m?m.parentNode.insertBefore(h,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Xl={$$typeof:ne,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function o1(t,i,s,l,h,m,T,A){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pr(0),this.hiddenUpdates=pr(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function wv(t,i,s,l,h,m,T,A,P,W,se,he){return t=new o1(t,i,s,T,A,P,W,he),i=1,m===!0&&(i|=24),m=sr(3,null,null,i),t.current=m,m.stateNode=t,i=Kf(),i.refCount++,t.pooledCache=i,i.refCount++,m.memoizedState={element:l,isDehydrated:s,cache:i},Wf(m),t}function Av(t){return t?(t=io,t):io}function Rv(t,i,s,l,h,m){h=Av(h),l.context===null?l.context=h:l.pendingContext=h,l=ua(i),l.payload={element:s},m=m===void 0?null:m,m!==null&&(l.callback=m),s=ca(t,l,i),s!==null&&(hr(s,t,i),Rl(s,t,i))}function Cv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function dm(t,i){Cv(t,i),(t=t.alternate)&&Cv(t,i)}function Iv(t){if(t.tag===13){var i=ro(t,67108864);i!==null&&hr(i,t,67108864),dm(t,67108864)}}var Wc=!0;function l1(t,i,s,l){var h=G.T;G.T=null;var m=re.p;try{re.p=2,mm(t,i,s,l)}finally{re.p=m,G.T=h}}function u1(t,i,s,l){var h=G.T;G.T=null;var m=re.p;try{re.p=8,mm(t,i,s,l)}finally{re.p=m,G.T=h}}function mm(t,i,s,l){if(Wc){var h=pm(l);if(h===null)tm(t,i,l,Zc,s),Nv(t,l);else if(h1(h,t,i,s,l))l.stopPropagation();else if(Nv(t,l),i&4&&-1<c1.indexOf(t)){for(;h!==null;){var m=lt(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var T=tr(m.pendingLanes);if(T!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var P=1<<31-Bt(T);A.entanglements[1]|=P,T&=~P}ui(m),(Ct&6)===0&&(Pc=nt()+500,Hl(0))}}break;case 13:A=ro(m,2),A!==null&&hr(A,m,2),kc(),dm(m,2)}if(m=pm(l),m===null&&tm(t,i,l,Zc,s),m===h)break;h=m}h!==null&&l.stopPropagation()}else tm(t,i,l,null,s)}}function pm(t){return t=vr(t),gm(t)}var Zc=null;function gm(t){if(Zc=null,t=Xe(t),t!==null){var i=u(t);if(i===null)t=null;else{var s=i.tag;if(s===13){if(t=f(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Zc=t,null}function Dv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ye()){case Et:return 2;case Dt:return 8;case Vn:case Gt:return 32;case yn:return 268435456;default:return 32}default:return 32}}var ym=!1,Sa=null,wa=null,Aa=null,Wl=new Map,Zl=new Map,Ra=[],c1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nv(t,i){switch(t){case"focusin":case"focusout":Sa=null;break;case"dragenter":case"dragleave":wa=null;break;case"mouseover":case"mouseout":Aa=null;break;case"pointerover":case"pointerout":Wl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(i.pointerId)}}function Jl(t,i,s,l,h,m){return t===null||t.nativeEvent!==m?(t={blockedOn:i,domEventName:s,eventSystemFlags:l,nativeEvent:m,targetContainers:[h]},i!==null&&(i=lt(i),i!==null&&Iv(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function h1(t,i,s,l,h){switch(i){case"focusin":return Sa=Jl(Sa,t,i,s,l,h),!0;case"dragenter":return wa=Jl(wa,t,i,s,l,h),!0;case"mouseover":return Aa=Jl(Aa,t,i,s,l,h),!0;case"pointerover":var m=h.pointerId;return Wl.set(m,Jl(Wl.get(m)||null,t,i,s,l,h)),!0;case"gotpointercapture":return m=h.pointerId,Zl.set(m,Jl(Zl.get(m)||null,t,i,s,l,h)),!0}return!1}function Ov(t){var i=Xe(t.target);if(i!==null){var s=u(i);if(s!==null){if(i=s.tag,i===13){if(i=f(s),i!==null){t.blockedOn=i,F(t.priority,function(){if(s.tag===13){var l=cr();l=Yr(l);var h=ro(s,l);h!==null&&hr(h,s,l),dm(s,l)}});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=pm(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);Ri=l,s.target.dispatchEvent(l),Ri=null}else return i=lt(s),i!==null&&Iv(i),t.blockedOn=s,!1;i.shift()}return!0}function xv(t,i,s){Jc(t)&&s.delete(i)}function f1(){ym=!1,Sa!==null&&Jc(Sa)&&(Sa=null),wa!==null&&Jc(wa)&&(wa=null),Aa!==null&&Jc(Aa)&&(Aa=null),Wl.forEach(xv),Zl.forEach(xv)}function eh(t,i){t.blockedOn===i&&(t.blockedOn=null,ym||(ym=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,f1)))}var th=null;function Mv(t){th!==t&&(th=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){th===t&&(th=null);for(var i=0;i<t.length;i+=3){var s=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(gm(l||s)===null)continue;break}var m=lt(s);m!==null&&(t.splice(i,3),i-=3,gd(m,{pending:!0,data:h,method:s.method,action:l},l,h))}}))}function eu(t){function i(P){return eh(P,t)}Sa!==null&&eh(Sa,t),wa!==null&&eh(wa,t),Aa!==null&&eh(Aa,t),Wl.forEach(i),Zl.forEach(i);for(var s=0;s<Ra.length;s++){var l=Ra[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ra.length&&(s=Ra[0],s.blockedOn===null);)Ov(s),s.blockedOn===null&&Ra.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var h=s[l],m=s[l+1],T=h[pe]||null;if(typeof m=="function")T||Mv(s);else if(T){var A=null;if(m&&m.hasAttribute("formAction")){if(h=m,T=m[pe]||null)A=T.formAction;else if(gm(h)!==null)continue}else A=T.action;typeof A=="function"?s[l+1]=A:(s.splice(l,3),l-=3),Mv(s)}}}function _m(t){this._internalRoot=t}nh.prototype.render=_m.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(a(409));var s=i.current,l=cr();Rv(s,l,t,i,null,null)},nh.prototype.unmount=_m.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Rv(t.current,2,null,t,null,null),kc(),i[Ae]=null}};function nh(t){this._internalRoot=t}nh.prototype.unstable_scheduleHydration=function(t){if(t){var i=L();t={blockedOn:null,target:t,priority:i};for(var s=0;s<Ra.length&&i!==0&&i<Ra[s].priority;s++);Ra.splice(s,0,t),s===0&&Ov(t)}};var Vv=e.version;if(Vv!=="19.1.0")throw Error(a(527,Vv,"19.1.0"));re.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=p(i),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var d1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{Ge=rh.inject(d1),ze=rh}catch{}}return nu.createRoot=function(t,i){if(!o(t))throw Error(a(299));var s=!1,l="",h=Xy,m=Wy,T=Zy,A=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks)),i=wv(t,1,!1,null,null,s,l,h,m,T,A,null),t[Ae]=i.current,em(t),new _m(i)},nu.hydrateRoot=function(t,i,s){if(!o(t))throw Error(a(299));var l=!1,h="",m=Xy,T=Wy,A=Zy,P=null,W=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(T=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(P=s.unstable_transitionCallbacks),s.formState!==void 0&&(W=s.formState)),i=wv(t,1,!0,i,s??null,l,h,m,T,A,P,W),i.context=Av(null),s=i.current,l=cr(),l=Yr(l),h=ua(l),h.callback=null,ca(s,h,l),s=l,i.current.lanes=s,Mr(i,s),ui(i),t[Ae]=i.current,em(t),new nh(i)},nu.version="19.1.0",nu}var Fv;function S1(){if(Fv)return Em.exports;Fv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Em.exports=b1(),Em.exports}var w1=S1(),z=bp(),ru={},Gv;function A1(){if(Gv)return ru;Gv=1,Object.defineProperty(ru,"__esModule",{value:!0}),ru.parse=f,ru.serialize=g;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function f(S,x){const M=new u,Q=S.length;if(Q<2)return M;const H=x?.decode||_;let q=0;do{const ae=S.indexOf("=",q);if(ae===-1)break;const ne=S.indexOf(";",q),_e=ne===-1?Q:ne;if(ae>_e){q=S.lastIndexOf(";",ae-1)+1;continue}const oe=d(S,q,ae),k=p(S,ae,oe),N=S.slice(oe,k);if(M[N]===void 0){let E=d(S,ae+1,_e),b=p(S,_e,E);const R=H(S.slice(E,b));M[N]=R}q=_e+1}while(q<Q);return M}function d(S,x,M){do{const Q=S.charCodeAt(x);if(Q!==32&&Q!==9)return x}while(++x<M);return M}function p(S,x,M){for(;x>M;){const Q=S.charCodeAt(--x);if(Q!==32&&Q!==9)return x+1}return M}function g(S,x,M){const Q=M?.encode||encodeURIComponent;if(!r.test(S))throw new TypeError(`argument name is invalid: ${S}`);const H=Q(x);if(!e.test(H))throw new TypeError(`argument val is invalid: ${x}`);let q=S+"="+H;if(!M)return q;if(M.maxAge!==void 0){if(!Number.isInteger(M.maxAge))throw new TypeError(`option maxAge is invalid: ${M.maxAge}`);q+="; Max-Age="+M.maxAge}if(M.domain){if(!n.test(M.domain))throw new TypeError(`option domain is invalid: ${M.domain}`);q+="; Domain="+M.domain}if(M.path){if(!a.test(M.path))throw new TypeError(`option path is invalid: ${M.path}`);q+="; Path="+M.path}if(M.expires){if(!w(M.expires)||!Number.isFinite(M.expires.valueOf()))throw new TypeError(`option expires is invalid: ${M.expires}`);q+="; Expires="+M.expires.toUTCString()}if(M.httpOnly&&(q+="; HttpOnly"),M.secure&&(q+="; Secure"),M.partitioned&&(q+="; Partitioned"),M.priority)switch(typeof M.priority=="string"?M.priority.toLowerCase():void 0){case"low":q+="; Priority=Low";break;case"medium":q+="; Priority=Medium";break;case"high":q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${M.priority}`)}if(M.sameSite)switch(typeof M.sameSite=="string"?M.sameSite.toLowerCase():M.sameSite){case!0:case"strict":q+="; SameSite=Strict";break;case"lax":q+="; SameSite=Lax";break;case"none":q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${M.sameSite}`)}return q}function _(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function w(S){return o.call(S)==="[object Date]"}return ru}A1();/**
 * react-router v7.6.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var G0=r=>{throw TypeError(r)},R1=(r,e,n)=>e.has(r)||G0("Cannot "+n),Am=(r,e,n)=>(R1(r,e,"read from private field"),n?n.call(r):e.get(r)),C1=(r,e,n)=>e.has(r)?G0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,n),$v="popstate";function I1(r={}){function e(a,o){let{pathname:u,search:f,hash:d}=a.location;return Eu("",{pathname:u,search:f,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(a,o){return typeof o=="string"?o:qa(o)}return N1(e,n,null,r)}function ot(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Yt(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function D1(){return Math.random().toString(36).substring(2,10)}function Kv(r,e){return{usr:r.state,key:r.key,idx:e}}function Eu(r,e,n=null,a){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Xa(e):e,state:n,key:e&&e.key||a||D1()}}function qa({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function Xa(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let a=r.indexOf("?");a>=0&&(e.search=r.substring(a),r=r.substring(0,a)),r&&(e.pathname=r)}return e}function N1(r,e,n,a={}){let{window:o=document.defaultView,v5Compat:u=!1}=a,f=o.history,d="POP",p=null,g=_();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function _(){return(f.state||{idx:null}).idx}function w(){d="POP";let H=_(),q=H==null?null:H-g;g=H,p&&p({action:d,location:Q.location,delta:q})}function S(H,q){d="PUSH";let ae=Eu(Q.location,H,q);g=_()+1;let ne=Kv(ae,g),_e=Q.createHref(ae);try{f.pushState(ne,"",_e)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;o.location.assign(_e)}u&&p&&p({action:d,location:Q.location,delta:1})}function x(H,q){d="REPLACE";let ae=Eu(Q.location,H,q);g=_();let ne=Kv(ae,g),_e=Q.createHref(ae);f.replaceState(ne,"",_e),u&&p&&p({action:d,location:Q.location,delta:0})}function M(H){return $0(H)}let Q={get action(){return d},get location(){return r(o,f)},listen(H){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener($v,w),p=H,()=>{o.removeEventListener($v,w),p=null}},createHref(H){return e(o,H)},createURL:M,encodeLocation(H){let q=M(H);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:S,replace:x,go(H){return f.go(H)}};return Q}function $0(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ot(n,"No window.location.(origin|href) available to create URL");let a=typeof r=="string"?r:qa(r);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}var lu,Qv=class{constructor(r){if(C1(this,lu,new Map),r)for(let[e,n]of r)this.set(e,n)}get(r){if(Am(this,lu).has(r))return Am(this,lu).get(r);if(r.defaultValue!==void 0)return r.defaultValue;throw new Error("No value found for context")}set(r,e){Am(this,lu).set(r,e)}};lu=new WeakMap;var O1=new Set(["lazy","caseSensitive","path","id","index","children"]);function x1(r){return O1.has(r)}var M1=new Set(["lazy","caseSensitive","path","id","index","unstable_middleware","children"]);function V1(r){return M1.has(r)}function P1(r){return r.index===!0}function Ch(r,e,n=[],a={}){return r.map((o,u)=>{let f=[...n,String(u)],d=typeof o.id=="string"?o.id:f.join("-");if(ot(o.index!==!0||!o.children,"Cannot specify children on an index route"),ot(!a[d],`Found a route id collision on id "${d}".  Route id's must be globally unique within Data Router usages`),P1(o)){let p={...o,...e(o),id:d};return a[d]=p,p}else{let p={...o,...e(o),id:d,children:void 0};return a[d]=p,o.children&&(p.children=Ch(o.children,e,f,a)),p}})}function Na(r,e,n="/"){return dh(r,e,n,!1)}function dh(r,e,n,a){let o=typeof e=="string"?Xa(e):e,u=xr(o.pathname||"/",n);if(u==null)return null;let f=K0(r);k1(f);let d=null;for(let p=0;d==null&&p<f.length;++p){let g=Q1(u);d=$1(f[p],g,a)}return d}function L1(r,e){let{route:n,pathname:a,params:o}=r;return{id:n.id,pathname:a,params:o,data:e[n.id],handle:n.handle}}function K0(r,e=[],n=[],a=""){let o=(u,f,d)=>{let p={relativePath:d===void 0?u.path||"":d,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};p.relativePath.startsWith("/")&&(ot(p.relativePath.startsWith(a),`Absolute route path "${p.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(a.length));let g=fi([a,p.relativePath]),_=n.concat(p);u.children&&u.children.length>0&&(ot(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),K0(u.children,e,_,g)),!(u.path==null&&!u.index)&&e.push({path:g,score:F1(g,u.index),routesMeta:_})};return r.forEach((u,f)=>{if(u.path===""||!u.path?.includes("?"))o(u,f);else for(let d of Q0(u.path))o(u,f,d)}),e}function Q0(r){let e=r.split("/");if(e.length===0)return[];let[n,...a]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(a.length===0)return o?[u,""]:[u];let f=Q0(a.join("/")),d=[];return d.push(...f.map(p=>p===""?u:[u,p].join("/"))),o&&d.push(...f),d.map(p=>r.startsWith("/")&&p===""?"/":p)}function k1(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:G1(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var U1=/^:[\w-]+$/,z1=3,j1=2,B1=1,q1=10,H1=-2,Yv=r=>r==="*";function F1(r,e){let n=r.split("/"),a=n.length;return n.some(Yv)&&(a+=H1),e&&(a+=j1),n.filter(o=>!Yv(o)).reduce((o,u)=>o+(U1.test(u)?z1:u===""?B1:q1),a)}function G1(r,e){return r.length===e.length&&r.slice(0,-1).every((a,o)=>a===e[o])?r[r.length-1]-e[e.length-1]:0}function $1(r,e,n=!1){let{routesMeta:a}=r,o={},u="/",f=[];for(let d=0;d<a.length;++d){let p=a[d],g=d===a.length-1,_=u==="/"?e:e.slice(u.length)||"/",w=Ih({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),S=p.route;if(!w&&g&&n&&!a[a.length-1].route.index&&(w=Ih({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!w)return null;Object.assign(o,w.params),f.push({params:o,pathname:fi([u,w.pathname]),pathnameBase:W1(fi([u,w.pathnameBase])),route:S}),w.pathnameBase!=="/"&&(u=fi([u,w.pathnameBase]))}return f}function Ih(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,a]=K1(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],f=u.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:a.reduce((g,{paramName:_,isOptional:w},S)=>{if(_==="*"){let M=d[S]||"";f=u.slice(0,u.length-M.length).replace(/(.)\/+$/,"$1")}const x=d[S];return w&&!x?g[_]=void 0:g[_]=(x||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:r}}function K1(r,e=!1,n=!0){Yt(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let a=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,d,p)=>(a.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(a.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function Q1(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yt(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function xr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=r.charAt(n);return a&&a!=="/"?null:r.slice(n)||"/"}function Y1(r,e="/"){let{pathname:n,search:a="",hash:o=""}=typeof r=="string"?Xa(r):r;return{pathname:n?n.startsWith("/")?n:X1(n,e):e,search:Z1(a),hash:J1(o)}}function X1(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Rm(r,e,n,a){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Y0(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Wh(r){let e=Y0(r);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function Zh(r,e,n,a=!1){let o;typeof r=="string"?o=Xa(r):(o={...r},ot(!o.pathname||!o.pathname.includes("?"),Rm("?","pathname","search",o)),ot(!o.pathname||!o.pathname.includes("#"),Rm("#","pathname","hash",o)),ot(!o.search||!o.search.includes("#"),Rm("#","search","hash",o)));let u=r===""||o.pathname==="",f=u?"/":o.pathname,d;if(f==null)d=n;else{let w=e.length-1;if(!a&&f.startsWith("..")){let S=f.split("/");for(;S[0]==="..";)S.shift(),w-=1;o.pathname=S.join("/")}d=w>=0?e[w]:"/"}let p=Y1(o,d),g=f&&f!=="/"&&f.endsWith("/"),_=(u||f===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var fi=r=>r.join("/").replace(/\/\/+/g,"/"),W1=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Z1=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,J1=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,Dh=class{constructor(r,e,n,a=!1){this.status=r,this.statusText=e||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Tu(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var X0=["POST","PUT","PATCH","DELETE"],eA=new Set(X0),tA=["GET",...X0],nA=new Set(tA),rA=new Set([301,302,303,307,308]),iA=new Set([307,308]),Cm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},aA={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},iu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Sp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sA=r=>({hasErrorBoundary:!!r.hasErrorBoundary}),W0="remix-router-transitions",Z0=Symbol("ResetLoaderData");function oA(r){const e=r.window?r.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";ot(r.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=r.hydrationRouteProperties||[],o=r.mapRouteProperties||sA,u={},f=Ch(r.routes,o,void 0,u),d,p=r.basename||"/",g=r.dataStrategy||fA,_={unstable_middleware:!1,...r.future},w=null,S=new Set,x=null,M=null,Q=null,H=r.hydrationData!=null,q=Na(f,r.history.location,p),ae=!1,ne=null,_e;if(q==null&&!r.patchRoutesOnNavigation){let L=Dr(404,{pathname:r.history.location.pathname}),{matches:F,route:Y}=oE(f);_e=!0,q=F,ne={[Y.id]:L}}else if(q&&!r.hydrationData&&Hn(q,f,r.history.location.pathname).active&&(q=null),q)if(q.some(L=>L.route.lazy))_e=!1;else if(!q.some(L=>L.route.loader))_e=!0;else{let L=r.hydrationData?r.hydrationData.loaderData:null,F=r.hydrationData?r.hydrationData.errors:null;if(F){let Y=q.findIndex(fe=>F[fe.route.id]!==void 0);_e=q.slice(0,Y+1).every(fe=>!Gm(fe.route,L,F))}else _e=q.every(Y=>!Gm(Y.route,L,F))}else{_e=!1,q=[];let L=Hn(null,f,r.history.location.pathname);L.active&&L.matches&&(ae=!0,q=L.matches)}let oe,k={historyAction:r.history.action,location:r.history.location,matches:q,initialized:_e,navigation:Cm,restoreScrollPosition:r.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:r.hydrationData&&r.hydrationData.loaderData||{},actionData:r.hydrationData&&r.hydrationData.actionData||null,errors:r.hydrationData&&r.hydrationData.errors||ne,fetchers:new Map,blockers:new Map},N="POP",E=!1,b,R=!1,D=new Map,O=null,I=!1,Ie=!1,qe=new Set,G=new Map,re=0,me=-1,ge=new Map,V=new Set,X=new Map,ie=new Map,Z=new Set,Ee=new Map,De,Se=null;function mt(){if(w=r.history.listen(({action:L,location:F,delta:Y})=>{if(De){De(),De=void 0;return}Yt(Ee.size===0||Y!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let fe=ta({currentLocation:k.location,nextLocation:F,historyAction:L});if(fe&&Y!=null){let pe=new Promise(Ae=>{De=Ae});r.history.go(Y*-1),mr(fe,{state:"blocked",location:F,proceed(){mr(fe,{state:"proceeding",proceed:void 0,reset:void 0,location:F}),pe.then(()=>r.history.go(Y))},reset(){let Ae=new Map(k.blockers);Ae.set(fe,iu),Te({blockers:Ae})}});return}return xe(L,F)}),n){SA(e,D);let L=()=>wA(e,D);e.addEventListener("pagehide",L),O=()=>e.removeEventListener("pagehide",L)}return k.initialized||xe("POP",k.location,{initialHydration:!0}),oe}function le(){w&&w(),O&&O(),S.clear(),b&&b.abort(),k.fetchers.forEach((L,F)=>Bt(F)),k.blockers.forEach((L,F)=>bi(F))}function ye(L){return S.add(L),()=>S.delete(L)}function Te(L,F={}){k={...k,...L};let Y=[],fe=[];k.fetchers.forEach((pe,Ae)=>{pe.state==="idle"&&(Z.has(Ae)?Y.push(Ae):fe.push(Ae))}),Z.forEach(pe=>{!k.fetchers.has(pe)&&!G.has(pe)&&Y.push(pe)}),[...S].forEach(pe=>pe(k,{deletedFetchers:Y,viewTransitionOpts:F.viewTransitionOpts,flushSync:F.flushSync===!0})),Y.forEach(pe=>Bt(pe)),fe.forEach(pe=>k.fetchers.delete(pe))}function be(L,F,{flushSync:Y}={}){let fe=k.actionData!=null&&k.navigation.formMethod!=null&&dr(k.navigation.formMethod)&&k.navigation.state==="loading"&&L.state?._isRedirect!==!0,pe;F.actionData?Object.keys(F.actionData).length>0?pe=F.actionData:pe=null:fe?pe=k.actionData:pe=null;let Ae=F.loaderData?aE(k.loaderData,F.loaderData,F.matches||[],F.errors):k.loaderData,je=k.blockers;je.size>0&&(je=new Map(je),je.forEach((Me,$e)=>je.set($e,iu)));let Ce=E===!0||k.navigation.formMethod!=null&&dr(k.navigation.formMethod)&&L.state?._isRedirect!==!0;d&&(f=d,d=void 0),I||N==="POP"||(N==="PUSH"?r.history.push(L,L.state):N==="REPLACE"&&r.history.replace(L,L.state));let Ve;if(N==="POP"){let Me=D.get(k.location.pathname);Me&&Me.has(L.pathname)?Ve={currentLocation:k.location,nextLocation:L}:D.has(L.pathname)&&(Ve={currentLocation:L,nextLocation:k.location})}else if(R){let Me=D.get(k.location.pathname);Me?Me.add(L.pathname):(Me=new Set([L.pathname]),D.set(k.location.pathname,Me)),Ve={currentLocation:k.location,nextLocation:L}}Te({...F,actionData:pe,loaderData:Ae,historyAction:N,location:L,initialized:!0,navigation:Cm,revalidation:"idle",restoreScrollPosition:na(L,F.matches||k.matches),preventScrollReset:Ce,blockers:je},{viewTransitionOpts:Ve,flushSync:Y===!0}),N="POP",E=!1,R=!1,I=!1,Ie=!1,Se?.resolve(),Se=null}async function Le(L,F){if(typeof L=="number"){r.history.go(L);return}let Y=Fm(k.location,k.matches,p,L,F?.fromRouteId,F?.relative),{path:fe,submission:pe,error:Ae}=Xv(!1,Y,F),je=k.location,Ce=Eu(k.location,fe,F&&F.state);Ce={...Ce,...r.history.encodeLocation(Ce)};let Ve=F&&F.replace!=null?F.replace:void 0,Me="PUSH";Ve===!0?Me="REPLACE":Ve===!1||pe!=null&&dr(pe.formMethod)&&pe.formAction===k.location.pathname+k.location.search&&(Me="REPLACE");let $e=F&&"preventScrollReset"in F?F.preventScrollReset===!0:void 0,Be=(F&&F.flushSync)===!0,Xe=ta({currentLocation:je,nextLocation:Ce,historyAction:Me});if(Xe){mr(Xe,{state:"blocked",location:Ce,proceed(){mr(Xe,{state:"proceeding",proceed:void 0,reset:void 0,location:Ce}),Le(L,F)},reset(){let lt=new Map(k.blockers);lt.set(Xe,iu),Te({blockers:lt})}});return}await xe(Me,Ce,{submission:pe,pendingError:Ae,preventScrollReset:$e,replace:F&&F.replace,enableViewTransition:F&&F.viewTransition,flushSync:Be})}function Ue(){Se||(Se=AA()),un(),Te({revalidation:"loading"});let L=Se.promise;return k.navigation.state==="submitting"?L:k.navigation.state==="idle"?(xe(k.historyAction,k.location,{startUninterruptedRevalidation:!0}),L):(xe(N||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:R===!0}),L)}async function xe(L,F,Y){b&&b.abort(),b=null,N=L,I=(Y&&Y.startUninterruptedRevalidation)===!0,Mr(k.location,k.matches),E=(Y&&Y.preventScrollReset)===!0,R=(Y&&Y.enableViewTransition)===!0;let fe=d||f,pe=Y&&Y.overrideNavigation,Ae=Y?.initialHydration&&k.matches&&k.matches.length>0&&!ae?k.matches:Na(fe,F,p),je=(Y&&Y.flushSync)===!0;if(Ae&&k.initialized&&!Ie&&_A(k.location,F)&&!(Y&&Y.submission&&dr(Y.submission.formMethod))){be(F,{matches:Ae},{flushSync:je});return}let Ce=Hn(Ae,fe,F.pathname);if(Ce.active&&Ce.matches&&(Ae=Ce.matches),!Ae){let{error:Tt,notFoundMatches:pt,route:at}=Si(F.pathname);be(F,{matches:pt,loaderData:{},errors:{[at.id]:Tt}},{flushSync:je});return}b=new AbortController;let Ve=No(r.history,F,b.signal,Y&&Y.submission),Me=new Qv(r.unstable_getContext?await r.unstable_getContext():void 0),$e;if(Y&&Y.pendingError)$e=[Rs(Ae).route.id,{type:"error",error:Y.pendingError}];else if(Y&&Y.submission&&dr(Y.submission.formMethod)){let Tt=await He(Ve,F,Y.submission,Ae,Me,Ce.active,Y&&Y.initialHydration===!0,{replace:Y.replace,flushSync:je});if(Tt.shortCircuited)return;if(Tt.pendingActionResult){let[pt,at]=Tt.pendingActionResult;if(fr(at)&&Tu(at.error)&&at.error.status===404){b=null,be(F,{matches:Tt.matches,loaderData:{},errors:{[pt]:at.error}});return}}Ae=Tt.matches||Ae,$e=Tt.pendingActionResult,pe=Im(F,Y.submission),je=!1,Ce.active=!1,Ve=No(r.history,Ve.url,Ve.signal)}let{shortCircuited:Be,matches:Xe,loaderData:lt,errors:wt}=await Ne(Ve,F,Ae,Me,Ce.active,pe,Y&&Y.submission,Y&&Y.fetcherSubmission,Y&&Y.replace,Y&&Y.initialHydration===!0,je,$e);Be||(b=null,be(F,{matches:Xe||Ae,...sE($e),loaderData:lt,errors:wt}))}async function He(L,F,Y,fe,pe,Ae,je,Ce={}){un();let Ve=TA(F,Y);if(Te({navigation:Ve},{flushSync:Ce.flushSync===!0}),Ae){let Be=await Qr(fe,F.pathname,L.signal);if(Be.type==="aborted")return{shortCircuited:!0};if(Be.type==="error"){let Xe=Rs(Be.partialMatches).route.id;return{matches:Be.partialMatches,pendingActionResult:[Xe,{type:"error",error:Be.error}]}}else if(Be.matches)fe=Be.matches;else{let{notFoundMatches:Xe,error:lt,route:wt}=Si(F.pathname);return{matches:Xe,pendingActionResult:[wt.id,{type:"error",error:lt}]}}}let Me,$e=uu(fe,F);if(!$e.route.action&&!$e.route.lazy)Me={type:"error",error:Dr(405,{method:L.method,pathname:F.pathname,routeId:$e.route.id})};else{let Be=Po(o,u,L,fe,$e,je?[]:a,pe),Xe=await yn(L,Be,pe,null);if(Me=Xe[$e.route.id],!Me){for(let lt of fe)if(Xe[lt.route.id]){Me=Xe[lt.route.id];break}}if(L.signal.aborted)return{shortCircuited:!0}}if(Cs(Me)){let Be;return Ce&&Ce.replace!=null?Be=Ce.replace:Be=nE(Me.response.headers.get("Location"),new URL(L.url),p)===k.location.pathname+k.location.search,await Gt(L,Me,!0,{submission:Y,replace:Be}),{shortCircuited:!0}}if(fr(Me)){let Be=Rs(fe,$e.route.id);return(Ce&&Ce.replace)!==!0&&(N="PUSH"),{matches:fe,pendingActionResult:[Be.route.id,Me,$e.route.id]}}return{matches:fe,pendingActionResult:[$e.route.id,Me]}}async function Ne(L,F,Y,fe,pe,Ae,je,Ce,Ve,Me,$e,Be){let Xe=Ae||Im(F,je),lt=je||Ce||uE(Xe),wt=!I&&!Me;if(pe){if(wt){let tn=nt(Be);Te({navigation:Xe,...tn!==void 0?{actionData:tn}:{}},{flushSync:$e})}let Je=await Qr(Y,F.pathname,L.signal);if(Je.type==="aborted")return{shortCircuited:!0};if(Je.type==="error"){let tn=Rs(Je.partialMatches).route.id;return{matches:Je.partialMatches,loaderData:{},errors:{[tn]:Je.error}}}else if(Je.matches)Y=Je.matches;else{let{error:tn,notFoundMatches:rr,route:Yn}=Si(F.pathname);return{matches:rr,loaderData:{},errors:{[Yn.id]:tn}}}}let Tt=d||f,{dsMatches:pt,revalidatingFetchers:at}=Wv(L,fe,o,u,r.history,k,Y,lt,F,Me?[]:a,Me===!0,Ie,qe,Z,X,V,Tt,p,r.patchRoutesOnNavigation!=null,Be);if(me=++re,!r.dataStrategy&&!pt.some(Je=>Je.shouldLoad)&&at.length===0){let Je=Pn();return be(F,{matches:Y,loaderData:{},errors:Be&&fr(Be[1])?{[Be[0]]:Be[1].error}:null,...sE(Be),...Je?{fetchers:new Map(k.fetchers)}:{}},{flushSync:$e}),{shortCircuited:!0}}if(wt){let Je={};if(!pe){Je.navigation=Xe;let tn=nt(Be);tn!==void 0&&(Je.actionData=tn)}at.length>0&&(Je.fetchers=Ye(at)),Te(Je,{flushSync:$e})}at.forEach(Je=>{cn(Je.key),Je.controller&&G.set(Je.key,Je.controller)});let gr=()=>at.forEach(Je=>cn(Je.key));b&&b.signal.addEventListener("abort",gr);let{loaderResults:hn,fetcherResults:Fn}=await zt(pt,at,L,fe);if(L.signal.aborted)return{shortCircuited:!0};b&&b.signal.removeEventListener("abort",gr),at.forEach(Je=>G.delete(Je.key));let wn=ih(hn);if(wn)return await Gt(L,wn.result,!0,{replace:Ve}),{shortCircuited:!0};if(wn=ih(Fn),wn)return V.add(wn.key),await Gt(L,wn.result,!0,{replace:Ve}),{shortCircuited:!0};let{loaderData:Xr,errors:nr}=iE(k,Y,hn,Be,at,Fn);Me&&k.errors&&(nr={...k.errors,...nr});let ia=Pn(),Ln=er(me),Gn=ia||Ln||at.length>0;return{matches:Y,loaderData:Xr,errors:nr,...Gn?{fetchers:new Map(k.fetchers)}:{}}}function nt(L){if(L&&!fr(L[1]))return{[L[0]]:L[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function Ye(L){return L.forEach(F=>{let Y=k.fetchers.get(F.key),fe=au(void 0,Y?Y.data:void 0);k.fetchers.set(F.key,fe)}),new Map(k.fetchers)}async function Et(L,F,Y,fe){cn(L);let pe=(fe&&fe.flushSync)===!0,Ae=d||f,je=Fm(k.location,k.matches,p,Y,F,fe?.relative),Ce=Na(Ae,je,p),Ve=Hn(Ce,Ae,je);if(Ve.active&&Ve.matches&&(Ce=Ve.matches),!Ce){ze(L,F,Dr(404,{pathname:je}),{flushSync:pe});return}let{path:Me,submission:$e,error:Be}=Xv(!0,je,fe);if(Be){ze(L,F,Be,{flushSync:pe});return}let Xe=uu(Ce,Me),lt=new Qv(r.unstable_getContext?await r.unstable_getContext():void 0),wt=(fe&&fe.preventScrollReset)===!0;if($e&&dr($e.formMethod)){await Dt(L,F,Me,Xe,Ce,lt,Ve.active,pe,wt,$e);return}X.set(L,{routeId:F,path:Me}),await Vn(L,F,Me,Xe,Ce,lt,Ve.active,pe,wt,$e)}async function Dt(L,F,Y,fe,pe,Ae,je,Ce,Ve,Me){un(),X.delete(L);function $e(Vt){if(!Vt.route.action&&!Vt.route.lazy){let yr=Dr(405,{method:Me.formMethod,pathname:Y,routeId:F});return ze(L,F,yr,{flushSync:Ce}),!0}return!1}if(!je&&$e(fe))return;let Be=k.fetchers.get(L);Ge(L,bA(Me,Be),{flushSync:Ce});let Xe=new AbortController,lt=No(r.history,Y,Xe.signal,Me);if(je){let Vt=await Qr(pe,Y,lt.signal,L);if(Vt.type==="aborted")return;if(Vt.type==="error"){ze(L,F,Vt.error,{flushSync:Ce});return}else if(Vt.matches){if(pe=Vt.matches,fe=uu(pe,Y),$e(fe))return}else{ze(L,F,Dr(404,{pathname:Y}),{flushSync:Ce});return}}G.set(L,Xe);let wt=re,Tt=Po(o,u,lt,pe,fe,a,Ae),at=(await yn(lt,Tt,Ae,L))[fe.route.id];if(lt.signal.aborted){G.get(L)===Xe&&G.delete(L);return}if(Z.has(L)){if(Cs(at)||fr(at)){Ge(L,Da(void 0));return}}else{if(Cs(at))if(G.delete(L),me>wt){Ge(L,Da(void 0));return}else return V.add(L),Ge(L,au(Me)),Gt(lt,at,!1,{fetcherSubmission:Me,preventScrollReset:Ve});if(fr(at)){ze(L,F,at.error);return}}let gr=k.navigation.location||k.location,hn=No(r.history,gr,Xe.signal),Fn=d||f,wn=k.navigation.state!=="idle"?Na(Fn,k.navigation.location,p):k.matches;ot(wn,"Didn't find any matches after fetcher action");let Xr=++re;ge.set(L,Xr);let nr=au(Me,at.data);k.fetchers.set(L,nr);let{dsMatches:ia,revalidatingFetchers:Ln}=Wv(hn,Ae,o,u,r.history,k,wn,Me,gr,a,!1,Ie,qe,Z,X,V,Fn,p,r.patchRoutesOnNavigation!=null,[fe.route.id,at]);Ln.filter(Vt=>Vt.key!==L).forEach(Vt=>{let yr=Vt.key,wi=k.fetchers.get(yr),An=au(void 0,wi?wi.data:void 0);k.fetchers.set(yr,An),cn(yr),Vt.controller&&G.set(yr,Vt.controller)}),Te({fetchers:new Map(k.fetchers)});let Gn=()=>Ln.forEach(Vt=>cn(Vt.key));Xe.signal.addEventListener("abort",Gn);let{loaderResults:Je,fetcherResults:tn}=await zt(ia,Ln,hn,Ae);if(Xe.signal.aborted)return;if(Xe.signal.removeEventListener("abort",Gn),ge.delete(L),G.delete(L),Ln.forEach(Vt=>G.delete(Vt.key)),k.fetchers.has(L)){let Vt=Da(at.data);k.fetchers.set(L,Vt)}let rr=ih(Je);if(rr)return Gt(hn,rr.result,!1,{preventScrollReset:Ve});if(rr=ih(tn),rr)return V.add(rr.key),Gt(hn,rr.result,!1,{preventScrollReset:Ve});let{loaderData:Yn,errors:Wr}=iE(k,wn,Je,void 0,Ln,tn);er(Xr),k.navigation.state==="loading"&&Xr>me?(ot(N,"Expected pending action"),b&&b.abort(),be(k.navigation.location,{matches:wn,loaderData:Yn,errors:Wr,fetchers:new Map(k.fetchers)})):(Te({errors:Wr,loaderData:aE(k.loaderData,Yn,wn,Wr),fetchers:new Map(k.fetchers)}),Ie=!1)}async function Vn(L,F,Y,fe,pe,Ae,je,Ce,Ve,Me){let $e=k.fetchers.get(L);Ge(L,au(Me,$e?$e.data:void 0),{flushSync:Ce});let Be=new AbortController,Xe=No(r.history,Y,Be.signal);if(je){let at=await Qr(pe,Y,Xe.signal,L);if(at.type==="aborted")return;if(at.type==="error"){ze(L,F,at.error,{flushSync:Ce});return}else if(at.matches)pe=at.matches,fe=uu(pe,Y);else{ze(L,F,Dr(404,{pathname:Y}),{flushSync:Ce});return}}G.set(L,Be);let lt=re,wt=Po(o,u,Xe,pe,fe,a,Ae),pt=(await yn(Xe,wt,Ae,L))[fe.route.id];if(G.get(L)===Be&&G.delete(L),!Xe.signal.aborted){if(Z.has(L)){Ge(L,Da(void 0));return}if(Cs(pt))if(me>lt){Ge(L,Da(void 0));return}else{V.add(L),await Gt(Xe,pt,!1,{preventScrollReset:Ve});return}if(fr(pt)){ze(L,F,pt.error);return}Ge(L,Da(pt.data))}}async function Gt(L,F,Y,{submission:fe,fetcherSubmission:pe,preventScrollReset:Ae,replace:je}={}){F.response.headers.has("X-Remix-Revalidate")&&(Ie=!0);let Ce=F.response.headers.get("Location");ot(Ce,"Expected a Location header on the redirect Response"),Ce=nE(Ce,new URL(L.url),p);let Ve=Eu(k.location,Ce,{_isRedirect:!0});if(n){let wt=!1;if(F.response.headers.has("X-Remix-Reload-Document"))wt=!0;else if(Sp.test(Ce)){const Tt=$0(Ce,!0);wt=Tt.origin!==e.location.origin||xr(Tt.pathname,p)==null}if(wt){je?e.location.replace(Ce):e.location.assign(Ce);return}}b=null;let Me=je===!0||F.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:$e,formAction:Be,formEncType:Xe}=k.navigation;!fe&&!pe&&$e&&Be&&Xe&&(fe=uE(k.navigation));let lt=fe||pe;if(iA.has(F.response.status)&&lt&&dr(lt.formMethod))await xe(Me,Ve,{submission:{...lt,formAction:Ce},preventScrollReset:Ae||E,enableViewTransition:Y?R:void 0});else{let wt=Im(Ve,fe);await xe(Me,Ve,{overrideNavigation:wt,fetcherSubmission:pe,preventScrollReset:Ae||E,enableViewTransition:Y?R:void 0})}}async function yn(L,F,Y,fe){let pe,Ae={};try{pe=await dA(g,L,F,fe,Y,!1)}catch(je){return F.filter(Ce=>Ce.shouldLoad).forEach(Ce=>{Ae[Ce.route.id]={type:"error",error:je}}),Ae}if(L.signal.aborted)return Ae;for(let[je,Ce]of Object.entries(pe))if(vA(Ce)){let Ve=Ce.result;Ae[je]={type:"redirect",response:gA(Ve,L,je,F,p)}}else Ae[je]=await pA(Ce);return Ae}async function zt(L,F,Y,fe){let pe=yn(Y,L,fe,null),Ae=Promise.all(F.map(async Ve=>{if(Ve.matches&&Ve.match&&Ve.request&&Ve.controller){let $e=(await yn(Ve.request,Ve.matches,fe,Ve.key))[Ve.match.route.id];return{[Ve.key]:$e}}else return Promise.resolve({[Ve.key]:{type:"error",error:Dr(404,{pathname:Ve.path})}})})),je=await pe,Ce=(await Ae).reduce((Ve,Me)=>Object.assign(Ve,Me),{});return{loaderResults:je,fetcherResults:Ce}}function un(){Ie=!0,X.forEach((L,F)=>{G.has(F)&&qe.add(F),cn(F)})}function Ge(L,F,Y={}){k.fetchers.set(L,F),Te({fetchers:new Map(k.fetchers)},{flushSync:(Y&&Y.flushSync)===!0})}function ze(L,F,Y,fe={}){let pe=Rs(k.matches,F);Bt(L),Te({errors:{[pe.route.id]:Y},fetchers:new Map(k.fetchers)},{flushSync:(fe&&fe.flushSync)===!0})}function Lt(L){return ie.set(L,(ie.get(L)||0)+1),Z.has(L)&&Z.delete(L),k.fetchers.get(L)||aA}function Bt(L){let F=k.fetchers.get(L);G.has(L)&&!(F&&F.state==="loading"&&ge.has(L))&&cn(L),X.delete(L),ge.delete(L),V.delete(L),Z.delete(L),qe.delete(L),k.fetchers.delete(L)}function Ti(L){let F=(ie.get(L)||0)-1;F<=0?(ie.delete(L),Z.add(L)):ie.set(L,F),Te({fetchers:new Map(k.fetchers)})}function cn(L){let F=G.get(L);F&&(F.abort(),G.delete(L))}function Xt(L){for(let F of L){let Y=Lt(F),fe=Da(Y.data);k.fetchers.set(F,fe)}}function Pn(){let L=[],F=!1;for(let Y of V){let fe=k.fetchers.get(Y);ot(fe,`Expected fetcher: ${Y}`),fe.state==="loading"&&(V.delete(Y),L.push(Y),F=!0)}return Xt(L),F}function er(L){let F=[];for(let[Y,fe]of ge)if(fe<L){let pe=k.fetchers.get(Y);ot(pe,`Expected fetcher: ${Y}`),pe.state==="loading"&&(cn(Y),ge.delete(Y),F.push(Y))}return Xt(F),F.length>0}function tr(L,F){let Y=k.blockers.get(L)||iu;return Ee.get(L)!==F&&Ee.set(L,F),Y}function bi(L){k.blockers.delete(L),Ee.delete(L)}function mr(L,F){let Y=k.blockers.get(L)||iu;ot(Y.state==="unblocked"&&F.state==="blocked"||Y.state==="blocked"&&F.state==="blocked"||Y.state==="blocked"&&F.state==="proceeding"||Y.state==="blocked"&&F.state==="unblocked"||Y.state==="proceeding"&&F.state==="unblocked",`Invalid blocker state transition: ${Y.state} -> ${F.state}`);let fe=new Map(k.blockers);fe.set(L,F),Te({blockers:fe})}function ta({currentLocation:L,nextLocation:F,historyAction:Y}){if(Ee.size===0)return;Ee.size>1&&Yt(!1,"A router only supports one blocker at a time");let fe=Array.from(Ee.entries()),[pe,Ae]=fe[fe.length-1],je=k.blockers.get(pe);if(!(je&&je.state==="proceeding")&&Ae({currentLocation:L,nextLocation:F,historyAction:Y}))return pe}function Si(L){let F=Dr(404,{pathname:L}),Y=d||f,{matches:fe,route:pe}=oE(Y);return{notFoundMatches:fe,route:pe,error:F}}function Za(L,F,Y){if(x=L,Q=F,M=Y||null,!H&&k.navigation===Cm){H=!0;let fe=na(k.location,k.matches);fe!=null&&Te({restoreScrollPosition:fe})}return()=>{x=null,Q=null,M=null}}function pr(L,F){return M&&M(L,F.map(fe=>L1(fe,k.loaderData)))||L.key}function Mr(L,F){if(x&&Q){let Y=pr(L,F);x[Y]=Q()}}function na(L,F){if(x){let Y=pr(L,F),fe=x[Y];if(typeof fe=="number")return fe}return null}function Hn(L,F,Y){if(r.patchRoutesOnNavigation)if(L){if(Object.keys(L[0].params).length>0)return{active:!0,matches:dh(F,Y,p,!0)}}else return{active:!0,matches:dh(F,Y,p,!0)||[]};return{active:!1,matches:null}}async function Qr(L,F,Y,fe){if(!r.patchRoutesOnNavigation)return{type:"success",matches:L};let pe=L;for(;;){let Ae=d==null,je=d||f,Ce=u;try{await r.patchRoutesOnNavigation({signal:Y,path:F,matches:pe,fetcherKey:fe,patch:($e,Be)=>{Y.aborted||Zv($e,Be,je,Ce,o)}})}catch($e){return{type:"error",error:$e,partialMatches:pe}}finally{Ae&&!Y.aborted&&(f=[...f])}if(Y.aborted)return{type:"aborted"};let Ve=Na(je,F,p);if(Ve)return{type:"success",matches:Ve};let Me=dh(je,F,p,!0);if(!Me||pe.length===Me.length&&pe.every(($e,Be)=>$e.route.id===Me[Be].route.id))return{type:"success",matches:null};pe=Me}}function Yr(L){u={},d=Ch(L,o,void 0,u)}function ra(L,F){let Y=d==null;Zv(L,F,d||f,u,o),Y&&(f=[...f],Te({}))}return oe={get basename(){return p},get future(){return _},get state(){return k},get routes(){return f},get window(){return e},initialize:mt,subscribe:ye,enableScrollRestoration:Za,navigate:Le,fetch:Et,revalidate:Ue,createHref:L=>r.history.createHref(L),encodeLocation:L=>r.history.encodeLocation(L),getFetcher:Lt,deleteFetcher:Ti,dispose:le,getBlocker:tr,deleteBlocker:bi,patchRoutes:ra,_internalFetchControllers:G,_internalSetRoutes:Yr},oe}function lA(r){return r!=null&&("formData"in r&&r.formData!=null||"body"in r&&r.body!==void 0)}function Fm(r,e,n,a,o,u){let f,d;if(o){f=[];for(let g of e)if(f.push(g),g.route.id===o){d=g;break}}else f=e,d=e[e.length-1];let p=Zh(a||".",Wh(f),xr(r.pathname,n)||r.pathname,u==="path");if(a==null&&(p.search=r.search,p.hash=r.hash),(a==null||a===""||a===".")&&d){let g=wp(p.search);if(d.route.index&&!g)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&g){let _=new URLSearchParams(p.search),w=_.getAll("index");_.delete("index"),w.filter(x=>x).forEach(x=>_.append("index",x));let S=_.toString();p.search=S?`?${S}`:""}}return n!=="/"&&(p.pathname=p.pathname==="/"?n:fi([n,p.pathname])),qa(p)}function Xv(r,e,n){if(!n||!lA(n))return{path:e};if(n.formMethod&&!EA(n.formMethod))return{path:e,error:Dr(405,{method:n.formMethod})};let a=()=>({path:e,error:Dr(400,{type:"invalid-body"})}),u=(n.formMethod||"get").toUpperCase(),f=iT(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!dr(u))return a();let w=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((S,[x,M])=>`${S}${x}=${M}
`,""):String(n.body);return{path:e,submission:{formMethod:u,formAction:f,formEncType:n.formEncType,formData:void 0,json:void 0,text:w}}}else if(n.formEncType==="application/json"){if(!dr(u))return a();try{let w=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:u,formAction:f,formEncType:n.formEncType,formData:void 0,json:w,text:void 0}}}catch{return a()}}}ot(typeof FormData=="function","FormData is not available in this environment");let d,p;if(n.formData)d=Km(n.formData),p=n.formData;else if(n.body instanceof FormData)d=Km(n.body),p=n.body;else if(n.body instanceof URLSearchParams)d=n.body,p=rE(d);else if(n.body==null)d=new URLSearchParams,p=new FormData;else try{d=new URLSearchParams(n.body),p=rE(d)}catch{return a()}let g={formMethod:u,formAction:f,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(dr(g.formMethod))return{path:e,submission:g};let _=Xa(e);return r&&_.search&&wp(_.search)&&d.append("index",""),_.search=`?${d}`,{path:qa(_),submission:g}}function Wv(r,e,n,a,o,u,f,d,p,g,_,w,S,x,M,Q,H,q,ae,ne){let _e=ne?fr(ne[1])?ne[1].error:ne[1].data:void 0,oe=o.createURL(u.location),k=o.createURL(p),N;if(_&&u.errors){let I=Object.keys(u.errors)[0];N=f.findIndex(Ie=>Ie.route.id===I)}else if(ne&&fr(ne[1])){let I=ne[0];N=f.findIndex(Ie=>Ie.route.id===I)-1}let E=ne?ne[1].statusCode:void 0,b=E&&E>=400,R={currentUrl:oe,currentParams:u.matches[0]?.params||{},nextUrl:k,nextParams:f[0].params,...d,actionResult:_e,actionStatus:E},D=f.map((I,Ie)=>{let{route:qe}=I,G=null;if(N!=null&&Ie>N?G=!1:qe.lazy?G=!0:qe.loader==null?G=!1:_?G=Gm(qe,u.loaderData,u.errors):uA(u.loaderData,u.matches[Ie],I)&&(G=!0),G!==null)return $m(n,a,r,I,g,e,G);let re=b?!1:w||oe.pathname+oe.search===k.pathname+k.search||oe.search!==k.search||cA(u.matches[Ie],I),me={...R,defaultShouldRevalidate:re},ge=Nh(I,me);return $m(n,a,r,I,g,e,ge,me)}),O=[];return M.forEach((I,Ie)=>{if(_||!f.some(ie=>ie.route.id===I.routeId)||x.has(Ie))return;let qe=u.fetchers.get(Ie),G=qe&&qe.state!=="idle"&&qe.data===void 0,re=Na(H,I.path,q);if(!re){if(ae&&G)return;O.push({key:Ie,routeId:I.routeId,path:I.path,matches:null,match:null,request:null,controller:null});return}if(Q.has(Ie))return;let me=uu(re,I.path),ge=new AbortController,V=No(o,I.path,ge.signal),X=null;if(S.has(Ie))S.delete(Ie),X=Po(n,a,V,re,me,g,e);else if(G)w&&(X=Po(n,a,V,re,me,g,e));else{let ie={...R,defaultShouldRevalidate:b?!1:w};Nh(me,ie)&&(X=Po(n,a,V,re,me,g,e,ie))}X&&O.push({key:Ie,routeId:I.routeId,path:I.path,matches:X,match:me,request:V,controller:ge})}),{dsMatches:D,revalidatingFetchers:O}}function Gm(r,e,n){if(r.lazy)return!0;if(!r.loader)return!1;let a=e!=null&&r.id in e,o=n!=null&&n[r.id]!==void 0;return!a&&o?!1:typeof r.loader=="function"&&r.loader.hydrate===!0?!0:!a&&!o}function uA(r,e,n){let a=!e||n.route.id!==e.route.id,o=!r.hasOwnProperty(n.route.id);return a||o}function cA(r,e){let n=r.route.path;return r.pathname!==e.pathname||n!=null&&n.endsWith("*")&&r.params["*"]!==e.params["*"]}function Nh(r,e){if(r.route.shouldRevalidate){let n=r.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function Zv(r,e,n,a,o){let u;if(r){let p=a[r];ot(p,`No route found to patch children into: routeId = ${r}`),p.children||(p.children=[]),u=p.children}else u=n;let f=e.filter(p=>!u.some(g=>J0(p,g))),d=Ch(f,o,[r||"_","patch",String(u?.length||"0")],a);u.push(...d)}function J0(r,e){return"id"in r&&"id"in e&&r.id===e.id?!0:r.index===e.index&&r.path===e.path&&r.caseSensitive===e.caseSensitive?(!r.children||r.children.length===0)&&(!e.children||e.children.length===0)?!0:r.children.every((n,a)=>e.children?.some(o=>J0(n,o))):!1}var Jv=new WeakMap,eT=({key:r,route:e,manifest:n,mapRouteProperties:a})=>{let o=n[e.id];if(ot(o,"No route found in manifest"),!o.lazy||typeof o.lazy!="object")return;let u=o.lazy[r];if(!u)return;let f=Jv.get(o);f||(f={},Jv.set(o,f));let d=f[r];if(d)return d;let p=(async()=>{let g=x1(r),w=o[r]!==void 0&&r!=="hasErrorBoundary";if(g)Yt(!g,"Route property "+r+" is not a supported lazy route property. This property will be ignored."),f[r]=Promise.resolve();else if(w)Yt(!1,`Route "${o.id}" has a static property "${r}" defined. The lazy property will be ignored.`);else{let S=await u();S!=null&&(Object.assign(o,{[r]:S}),Object.assign(o,a(o)))}typeof o.lazy=="object"&&(o.lazy[r]=void 0,Object.values(o.lazy).every(S=>S===void 0)&&(o.lazy=void 0))})();return f[r]=p,p},eE=new WeakMap;function hA(r,e,n,a,o){let u=n[r.id];if(ot(u,"No route found in manifest"),!r.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof r.lazy=="function"){let _=eE.get(u);if(_)return{lazyRoutePromise:_,lazyHandlerPromise:_};let w=(async()=>{ot(typeof r.lazy=="function","No lazy route function found");let S=await r.lazy(),x={};for(let M in S){let Q=S[M];if(Q===void 0)continue;let H=V1(M),ae=u[M]!==void 0&&M!=="hasErrorBoundary";H?Yt(!H,"Route property "+M+" is not a supported property to be returned from a lazy route function. This property will be ignored."):ae?Yt(!ae,`Route "${u.id}" has a static property "${M}" defined but its lazy function is also returning a value for this property. The lazy route property "${M}" will be ignored.`):x[M]=Q}Object.assign(u,x),Object.assign(u,{...a(u),lazy:void 0})})();return eE.set(u,w),w.catch(()=>{}),{lazyRoutePromise:w,lazyHandlerPromise:w}}let f=Object.keys(r.lazy),d=[],p;for(let _ of f){if(o&&o.includes(_))continue;let w=eT({key:_,route:r,manifest:n,mapRouteProperties:a});w&&(d.push(w),_===e&&(p=w))}let g=d.length>0?Promise.all(d).then(()=>{}):void 0;return g?.catch(()=>{}),p?.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:p}}async function tE(r){let e=r.matches.filter(o=>o.shouldLoad),n={};return(await Promise.all(e.map(o=>o.resolve()))).forEach((o,u)=>{n[e[u].route.id]=o}),n}async function fA(r){return r.matches.some(e=>e.route.unstable_middleware)?tT(r,!1,()=>tE(r),(e,n)=>({[n]:{type:"error",result:e}})):tE(r)}async function tT(r,e,n,a){let{matches:o,request:u,params:f,context:d}=r,p={handlerResult:void 0};try{let g=o.flatMap(w=>w.route.unstable_middleware?w.route.unstable_middleware.map(S=>[w.route.id,S]):[]),_=await nT({request:u,params:f,context:d},g,e,p,n);return e?_:p.handlerResult}catch(g){if(!p.middlewareError)throw g;let _=await a(p.middlewareError.error,p.middlewareError.routeId);return p.handlerResult?Object.assign(p.handlerResult,_):_}}async function nT(r,e,n,a,o,u=0){let{request:f}=r;if(f.signal.aborted)throw f.signal.reason?f.signal.reason:new Error(`Request aborted without an \`AbortSignal.reason\`: ${f.method} ${f.url}`);let d=e[u];if(!d)return a.handlerResult=await o(),a.handlerResult;let[p,g]=d,_=!1,w,S=async()=>{if(_)throw new Error("You may only call `next()` once per middleware");_=!0,await nT(r,e,n,a,o,u+1)};try{let x=await g({request:r.request,params:r.params,context:r.context},S);return _?x===void 0?w:x:S()}catch(x){throw a.middlewareError?a.middlewareError.error!==x&&(a.middlewareError={routeId:p,error:x}):a.middlewareError={routeId:p,error:x},x}}function rT(r,e,n,a,o){let u=eT({key:"unstable_middleware",route:a.route,manifest:e,mapRouteProperties:r}),f=hA(a.route,dr(n.method)?"action":"loader",e,r,o);return{middleware:u,route:f.lazyRoutePromise,handler:f.lazyHandlerPromise}}function $m(r,e,n,a,o,u,f,d=null){let p=!1,g=rT(r,e,n,a,o);return{...a,_lazyPromises:g,shouldLoad:f,unstable_shouldRevalidateArgs:d,unstable_shouldCallHandler(_){return p=!0,d?typeof _=="boolean"?Nh(a,{...d,defaultShouldRevalidate:_}):Nh(a,d):f},resolve(_){return p||f||_&&n.method==="GET"&&(a.route.lazy||a.route.loader)?mA({request:n,match:a,lazyHandlerPromise:g?.handler,lazyRoutePromise:g?.route,handlerOverride:_,scopedContext:u}):Promise.resolve({type:"data",result:void 0})}}}function Po(r,e,n,a,o,u,f,d=null){return a.map(p=>p.route.id!==o.route.id?{...p,shouldLoad:!1,unstable_shouldRevalidateArgs:d,unstable_shouldCallHandler:()=>!1,_lazyPromises:rT(r,e,n,p,u),resolve:()=>Promise.resolve({type:"data",result:void 0})}:$m(r,e,n,p,u,f,!0,d))}async function dA(r,e,n,a,o,u){n.some(g=>g._lazyPromises?.middleware)&&await Promise.all(n.map(g=>g._lazyPromises?.middleware));let f={request:e,params:n[0].params,context:o,matches:n},p=await r({...f,fetcherKey:a,unstable_runClientMiddleware:g=>{let _=f;return tT(_,!1,()=>g({..._,fetcherKey:a,unstable_runClientMiddleware:()=>{throw new Error("Cannot call `unstable_runClientMiddleware()` from within an `unstable_runClientMiddleware` handler")}}),(w,S)=>({[S]:{type:"error",result:w}}))}});try{await Promise.all(n.flatMap(g=>[g._lazyPromises?.handler,g._lazyPromises?.route]))}catch{}return p}async function mA({request:r,match:e,lazyHandlerPromise:n,lazyRoutePromise:a,handlerOverride:o,scopedContext:u}){let f,d,p=dr(r.method),g=p?"action":"loader",_=w=>{let S,x=new Promise((H,q)=>S=q);d=()=>S(),r.signal.addEventListener("abort",d);let M=H=>typeof w!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${g}" [routeId: ${e.route.id}]`)):w({request:r,params:e.params,context:u},...H!==void 0?[H]:[]),Q=(async()=>{try{return{type:"data",result:await(o?o(q=>M(q)):M())}}catch(H){return{type:"error",result:H}}})();return Promise.race([Q,x])};try{let w=p?e.route.action:e.route.loader;if(n||a)if(w){let S,[x]=await Promise.all([_(w).catch(M=>{S=M}),n,a]);if(S!==void 0)throw S;f=x}else{await n;let S=p?e.route.action:e.route.loader;if(S)[f]=await Promise.all([_(S),a]);else if(g==="action"){let x=new URL(r.url),M=x.pathname+x.search;throw Dr(405,{method:r.method,pathname:M,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(w)f=await _(w);else{let S=new URL(r.url),x=S.pathname+S.search;throw Dr(404,{pathname:x})}}catch(w){return{type:"error",result:w}}finally{d&&r.signal.removeEventListener("abort",d)}return f}async function pA(r){let{result:e,type:n}=r;if(aT(e)){let a;try{let o=e.headers.get("Content-Type");o&&/\bapplication\/json\b/.test(o)?e.body==null?a=null:a=await e.json():a=await e.text()}catch(o){return{type:"error",error:o}}return n==="error"?{type:"error",error:new Dh(e.status,e.statusText,a),statusCode:e.status,headers:e.headers}:{type:"data",data:a,statusCode:e.status,headers:e.headers}}return n==="error"?lE(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new Dh(e.init?.status||500,void 0,e.data),statusCode:Tu(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Tu(e)?e.status:void 0}:lE(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function gA(r,e,n,a,o){let u=r.headers.get("Location");if(ot(u,"Redirects returned/thrown from loaders/actions must have a Location header"),!Sp.test(u)){let f=a.slice(0,a.findIndex(d=>d.route.id===n)+1);u=Fm(new URL(e.url),f,o,u),r.headers.set("Location",u)}return r}function nE(r,e,n){if(Sp.test(r)){let a=r,o=a.startsWith("//")?new URL(e.protocol+a):new URL(a),u=xr(o.pathname,n)!=null;if(o.origin===e.origin&&u)return o.pathname+o.search+o.hash}return r}function No(r,e,n,a){let o=r.createURL(iT(e)).toString(),u={signal:n};if(a&&dr(a.formMethod)){let{formMethod:f,formEncType:d}=a;u.method=f.toUpperCase(),d==="application/json"?(u.headers=new Headers({"Content-Type":d}),u.body=JSON.stringify(a.json)):d==="text/plain"?u.body=a.text:d==="application/x-www-form-urlencoded"&&a.formData?u.body=Km(a.formData):u.body=a.formData}return new Request(o,u)}function Km(r){let e=new URLSearchParams;for(let[n,a]of r.entries())e.append(n,typeof a=="string"?a:a.name);return e}function rE(r){let e=new FormData;for(let[n,a]of r.entries())e.append(n,a);return e}function yA(r,e,n,a=!1,o=!1){let u={},f=null,d,p=!1,g={},_=n&&fr(n[1])?n[1].error:void 0;return r.forEach(w=>{if(!(w.route.id in e))return;let S=w.route.id,x=e[S];if(ot(!Cs(x),"Cannot handle redirect results in processLoaderData"),fr(x)){let M=x.error;if(_!==void 0&&(M=_,_=void 0),f=f||{},o)f[S]=M;else{let Q=Rs(r,S);f[Q.route.id]==null&&(f[Q.route.id]=M)}a||(u[S]=Z0),p||(p=!0,d=Tu(x.error)?x.error.status:500),x.headers&&(g[S]=x.headers)}else u[S]=x.data,x.statusCode&&x.statusCode!==200&&!p&&(d=x.statusCode),x.headers&&(g[S]=x.headers)}),_!==void 0&&n&&(f={[n[0]]:_},n[2]&&(u[n[2]]=void 0)),{loaderData:u,errors:f,statusCode:d||200,loaderHeaders:g}}function iE(r,e,n,a,o,u){let{loaderData:f,errors:d}=yA(e,n,a);return o.filter(p=>!p.matches||p.matches.some(g=>g.shouldLoad)).forEach(p=>{let{key:g,match:_,controller:w}=p,S=u[g];if(ot(S,"Did not find corresponding fetcher result"),!(w&&w.signal.aborted))if(fr(S)){let x=Rs(r.matches,_?.route.id);d&&d[x.route.id]||(d={...d,[x.route.id]:S.error}),r.fetchers.delete(g)}else if(Cs(S))ot(!1,"Unhandled fetcher revalidation redirect");else{let x=Da(S.data);r.fetchers.set(g,x)}}),{loaderData:f,errors:d}}function aE(r,e,n,a){let o=Object.entries(e).filter(([,u])=>u!==Z0).reduce((u,[f,d])=>(u[f]=d,u),{});for(let u of n){let f=u.route.id;if(!e.hasOwnProperty(f)&&r.hasOwnProperty(f)&&u.route.loader&&(o[f]=r[f]),a&&a.hasOwnProperty(f))break}return o}function sE(r){return r?fr(r[1])?{actionData:{}}:{actionData:{[r[0]]:r[1].data}}:{}}function Rs(r,e){return(e?r.slice(0,r.findIndex(a=>a.route.id===e)+1):[...r]).reverse().find(a=>a.route.hasErrorBoundary===!0)||r[0]}function oE(r){let e=r.length===1?r[0]:r.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Dr(r,{pathname:e,routeId:n,method:a,type:o,message:u}={}){let f="Unknown Server Error",d="Unknown @remix-run/router error";return r===400?(f="Bad Request",a&&e&&n?d=`You made a ${a} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:o==="invalid-body"&&(d="Unable to encode submission body")):r===403?(f="Forbidden",d=`Route "${n}" does not match URL "${e}"`):r===404?(f="Not Found",d=`No route matches URL "${e}"`):r===405&&(f="Method Not Allowed",a&&e&&n?d=`You made a ${a.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:a&&(d=`Invalid request method "${a.toUpperCase()}"`)),new Dh(r||500,f,new Error(d),!0)}function ih(r){let e=Object.entries(r);for(let n=e.length-1;n>=0;n--){let[a,o]=e[n];if(Cs(o))return{key:a,result:o}}}function iT(r){let e=typeof r=="string"?Xa(r):r;return qa({...e,hash:""})}function _A(r,e){return r.pathname!==e.pathname||r.search!==e.search?!1:r.hash===""?e.hash!=="":r.hash===e.hash?!0:e.hash!==""}function vA(r){return aT(r.result)&&rA.has(r.result.status)}function fr(r){return r.type==="error"}function Cs(r){return(r&&r.type)==="redirect"}function lE(r){return typeof r=="object"&&r!=null&&"type"in r&&"data"in r&&"init"in r&&r.type==="DataWithResponseInit"}function aT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.headers=="object"&&typeof r.body<"u"}function EA(r){return nA.has(r.toUpperCase())}function dr(r){return eA.has(r.toUpperCase())}function wp(r){return new URLSearchParams(r).getAll("index").some(e=>e==="")}function uu(r,e){let n=typeof e=="string"?Xa(e).search:e.search;if(r[r.length-1].route.index&&wp(n||""))return r[r.length-1];let a=Y0(r);return a[a.length-1]}function uE(r){let{formMethod:e,formAction:n,formEncType:a,text:o,formData:u,json:f}=r;if(!(!e||!n||!a)){if(o!=null)return{formMethod:e,formAction:n,formEncType:a,formData:void 0,json:void 0,text:o};if(u!=null)return{formMethod:e,formAction:n,formEncType:a,formData:u,json:void 0,text:void 0};if(f!==void 0)return{formMethod:e,formAction:n,formEncType:a,formData:void 0,json:f,text:void 0}}}function Im(r,e){return e?{state:"loading",location:r,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:r,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function TA(r,e){return{state:"submitting",location:r,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function au(r,e){return r?{state:"loading",formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function bA(r,e){return{state:"submitting",formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text,data:e?e.data:void 0}}function Da(r){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function SA(r,e){try{let n=r.sessionStorage.getItem(W0);if(n){let a=JSON.parse(n);for(let[o,u]of Object.entries(a||{}))u&&Array.isArray(u)&&e.set(o,new Set(u||[]))}}catch{}}function wA(r,e){if(e.size>0){let n={};for(let[a,o]of e)n[a]=[...o];try{r.sessionStorage.setItem(W0,JSON.stringify(n))}catch(a){Yt(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function AA(){let r,e,n=new Promise((a,o)=>{r=async u=>{a(u);try{await n}catch{}},e=async u=>{o(u);try{await n}catch{}}});return{promise:n,resolve:r,reject:e}}var Us=z.createContext(null);Us.displayName="DataRouter";var Nu=z.createContext(null);Nu.displayName="DataRouterState";var Ap=z.createContext({isTransitioning:!1});Ap.displayName="ViewTransition";var sT=z.createContext(new Map);sT.displayName="Fetchers";var RA=z.createContext(null);RA.displayName="Await";var $r=z.createContext(null);$r.displayName="Navigation";var Jh=z.createContext(null);Jh.displayName="Location";var Kr=z.createContext({outlet:null,matches:[],isDataRoute:!1});Kr.displayName="Route";var Rp=z.createContext(null);Rp.displayName="RouteError";function CA(r,{relative:e}={}){ot(Yo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=z.useContext($r),{hash:o,pathname:u,search:f}=Ou(r,{relative:e}),d=u;return n!=="/"&&(d=u==="/"?n:fi([n,u])),a.createHref({pathname:d,search:f,hash:o})}function Yo(){return z.useContext(Jh)!=null}function Ji(){return ot(Yo(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Jh).location}var oT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lT(r){z.useContext($r).static||z.useLayoutEffect(r)}function zs(){let{isDataRoute:r}=z.useContext(Kr);return r?qA():IA()}function IA(){ot(Yo(),"useNavigate() may be used only in the context of a <Router> component.");let r=z.useContext(Us),{basename:e,navigator:n}=z.useContext($r),{matches:a}=z.useContext(Kr),{pathname:o}=Ji(),u=JSON.stringify(Wh(a)),f=z.useRef(!1);return lT(()=>{f.current=!0}),z.useCallback((p,g={})=>{if(Yt(f.current,oT),!f.current)return;if(typeof p=="number"){n.go(p);return}let _=Zh(p,JSON.parse(u),o,g.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:fi([e,_.pathname])),(g.replace?n.replace:n.push)(_,g.state,g)},[e,n,u,o,r])}var DA=z.createContext(null);function NA(r){let e=z.useContext(Kr).outlet;return e&&z.createElement(DA.Provider,{value:r},e)}function Ou(r,{relative:e}={}){let{matches:n}=z.useContext(Kr),{pathname:a}=Ji(),o=JSON.stringify(Wh(n));return z.useMemo(()=>Zh(r,JSON.parse(o),a,e==="path"),[r,o,a,e])}function OA(r,e,n,a){ot(Yo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=z.useContext($r),{matches:u}=z.useContext(Kr),f=u[u.length-1],d=f?f.params:{},p=f?f.pathname:"/",g=f?f.pathnameBase:"/",_=f&&f.route;{let q=_&&_.path||"";uT(p,!_||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let w=Ji(),S;S=w;let x=S.pathname||"/",M=x;if(g!=="/"){let q=g.replace(/^\//,"").split("/");M="/"+x.replace(/^\//,"").split("/").slice(q.length).join("/")}let Q=Na(r,{pathname:M});return Yt(_||Q!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Yt(Q==null||Q[Q.length-1].route.element!==void 0||Q[Q.length-1].route.Component!==void 0||Q[Q.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),LA(Q&&Q.map(q=>Object.assign({},q,{params:Object.assign({},d,q.params),pathname:fi([g,o.encodeLocation?o.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?g:fi([g,o.encodeLocation?o.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),u,n,a)}function xA(){let r=BA(),e=Tu(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=z.createElement(z.Fragment,null,z.createElement("p",null,"💿 Hey developer 👋"),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:u},"ErrorBoundary")," or"," ",z.createElement("code",{style:u},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),n?z.createElement("pre",{style:o},n):null,f)}var MA=z.createElement(xA,null),VA=class extends z.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?z.createElement(Kr.Provider,{value:this.props.routeContext},z.createElement(Rp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function PA({routeContext:r,match:e,children:n}){let a=z.useContext(Us);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(Kr.Provider,{value:r},n)}function LA(r,e=[],n=null,a=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let o=r,u=n?.errors;if(u!=null){let p=o.findIndex(g=>g.route.id&&u?.[g.route.id]!==void 0);ot(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let f=!1,d=-1;if(n)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:_,errors:w}=n,S=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!w||w[g.route.id]===void 0);if(g.route.lazy||S){f=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,g,_)=>{let w,S=!1,x=null,M=null;n&&(w=u&&g.route.id?u[g.route.id]:void 0,x=g.route.errorElement||MA,f&&(d<0&&_===0?(uT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,M=null):d===_&&(S=!0,M=g.route.hydrateFallbackElement||null)));let Q=e.concat(o.slice(0,_+1)),H=()=>{let q;return w?q=x:S?q=M:g.route.Component?q=z.createElement(g.route.Component,null):g.route.element?q=g.route.element:q=p,z.createElement(PA,{match:g,routeContext:{outlet:p,matches:Q,isDataRoute:n!=null},children:q})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?z.createElement(VA,{location:n.location,revalidation:n.revalidation,component:x,error:w,children:H(),routeContext:{outlet:null,matches:Q,isDataRoute:!0}}):H()},null)}function Cp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kA(r){let e=z.useContext(Us);return ot(e,Cp(r)),e}function UA(r){let e=z.useContext(Nu);return ot(e,Cp(r)),e}function zA(r){let e=z.useContext(Kr);return ot(e,Cp(r)),e}function Ip(r){let e=zA(r),n=e.matches[e.matches.length-1];return ot(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function jA(){return Ip("useRouteId")}function BA(){let r=z.useContext(Rp),e=UA("useRouteError"),n=Ip("useRouteError");return r!==void 0?r:e.errors?.[n]}function qA(){let{router:r}=kA("useNavigate"),e=Ip("useNavigate"),n=z.useRef(!1);return lT(()=>{n.current=!0}),z.useCallback(async(o,u={})=>{Yt(n.current,oT),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var cE={};function uT(r,e,n){!e&&!cE[r]&&(cE[r]=!0,Yt(!1,n))}var hE={};function fE(r,e){!r&&!hE[e]&&(hE[e]=!0,console.warn(e))}function HA(r){let e={hasErrorBoundary:r.hasErrorBoundary||r.ErrorBoundary!=null||r.errorElement!=null};return r.Component&&(r.element&&Yt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:z.createElement(r.Component),Component:void 0})),r.HydrateFallback&&(r.hydrateFallbackElement&&Yt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:z.createElement(r.HydrateFallback),HydrateFallback:void 0})),r.ErrorBoundary&&(r.errorElement&&Yt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:z.createElement(r.ErrorBoundary),ErrorBoundary:void 0})),e}var FA=["HydrateFallback","hydrateFallbackElement"],GA=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",e(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",n(a))}})}};function $A({router:r,flushSync:e}){let[n,a]=z.useState(r.state),[o,u]=z.useState(),[f,d]=z.useState({isTransitioning:!1}),[p,g]=z.useState(),[_,w]=z.useState(),[S,x]=z.useState(),M=z.useRef(new Map),Q=z.useCallback((ne,{deletedFetchers:_e,flushSync:oe,viewTransitionOpts:k})=>{ne.fetchers.forEach((E,b)=>{E.data!==void 0&&M.current.set(b,E.data)}),_e.forEach(E=>M.current.delete(E)),fE(oe===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let N=r.window!=null&&r.window.document!=null&&typeof r.window.document.startViewTransition=="function";if(fE(k==null||N,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!k||!N){e&&oe?e(()=>a(ne)):z.startTransition(()=>a(ne));return}if(e&&oe){e(()=>{_&&(p&&p.resolve(),_.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:k.currentLocation,nextLocation:k.nextLocation})});let E=r.window.document.startViewTransition(()=>{e(()=>a(ne))});E.finished.finally(()=>{e(()=>{g(void 0),w(void 0),u(void 0),d({isTransitioning:!1})})}),e(()=>w(E));return}_?(p&&p.resolve(),_.skipTransition(),x({state:ne,currentLocation:k.currentLocation,nextLocation:k.nextLocation})):(u(ne),d({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}))},[r.window,e,_,p]);z.useLayoutEffect(()=>r.subscribe(Q),[r,Q]),z.useEffect(()=>{f.isTransitioning&&!f.flushSync&&g(new GA)},[f]),z.useEffect(()=>{if(p&&o&&r.window){let ne=o,_e=p.promise,oe=r.window.document.startViewTransition(async()=>{z.startTransition(()=>a(ne)),await _e});oe.finished.finally(()=>{g(void 0),w(void 0),u(void 0),d({isTransitioning:!1})}),w(oe)}},[o,p,r.window]),z.useEffect(()=>{p&&o&&n.location.key===o.location.key&&p.resolve()},[p,_,n.location,o]),z.useEffect(()=>{!f.isTransitioning&&S&&(u(S.state),d({isTransitioning:!0,flushSync:!1,currentLocation:S.currentLocation,nextLocation:S.nextLocation}),x(void 0))},[f.isTransitioning,S]);let H=z.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:ne=>r.navigate(ne),push:(ne,_e,oe)=>r.navigate(ne,{state:_e,preventScrollReset:oe?.preventScrollReset}),replace:(ne,_e,oe)=>r.navigate(ne,{replace:!0,state:_e,preventScrollReset:oe?.preventScrollReset})}),[r]),q=r.basename||"/",ae=z.useMemo(()=>({router:r,navigator:H,static:!1,basename:q}),[r,H,q]);return z.createElement(z.Fragment,null,z.createElement(Us.Provider,{value:ae},z.createElement(Nu.Provider,{value:n},z.createElement(sT.Provider,{value:M.current},z.createElement(Ap.Provider,{value:f},z.createElement(XA,{basename:q,location:n.location,navigationType:n.historyAction,navigator:H},z.createElement(KA,{routes:r.routes,future:r.future,state:n})))))),null)}var KA=z.memo(QA);function QA({routes:r,future:e,state:n}){return OA(r,void 0,n,e)}function cT({to:r,replace:e,state:n,relative:a}){ot(Yo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=z.useContext($r);Yt(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=z.useContext(Kr),{pathname:f}=Ji(),d=zs(),p=Zh(r,Wh(u),f,a==="path"),g=JSON.stringify(p);return z.useEffect(()=>{d(JSON.parse(g),{replace:e,state:n,relative:a})},[d,g,a,e,n]),null}function YA(r){return NA(r.context)}function XA({basename:r="/",children:e=null,location:n,navigationType:a="POP",navigator:o,static:u=!1}){ot(!Yo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=r.replace(/^\/*/,"/"),d=z.useMemo(()=>({basename:f,navigator:o,static:u,future:{}}),[f,o,u]);typeof n=="string"&&(n=Xa(n));let{pathname:p="/",search:g="",hash:_="",state:w=null,key:S="default"}=n,x=z.useMemo(()=>{let M=xr(p,f);return M==null?null:{location:{pathname:M,search:g,hash:_,state:w,key:S},navigationType:a}},[f,p,g,_,w,S,a]);return Yt(x!=null,`<Router basename="${f}"> is not able to match the URL "${p}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:z.createElement($r.Provider,{value:d},z.createElement(Jh.Provider,{children:e,value:x}))}var mh="get",ph="application/x-www-form-urlencoded";function ef(r){return r!=null&&typeof r.tagName=="string"}function WA(r){return ef(r)&&r.tagName.toLowerCase()==="button"}function ZA(r){return ef(r)&&r.tagName.toLowerCase()==="form"}function JA(r){return ef(r)&&r.tagName.toLowerCase()==="input"}function eR(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function tR(r,e){return r.button===0&&(!e||e==="_self")&&!eR(r)}function Qm(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((e,n)=>{let a=r[n];return e.concat(Array.isArray(a)?a.map(o=>[n,o]):[[n,a]])},[]))}function nR(r,e){let n=Qm(r);return e&&e.forEach((a,o)=>{n.has(o)||e.getAll(o).forEach(u=>{n.append(o,u)})}),n}var ah=null;function rR(){if(ah===null)try{new FormData(document.createElement("form"),0),ah=!1}catch{ah=!0}return ah}var iR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dm(r){return r!=null&&!iR.has(r)?(Yt(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ph}"`),null):r}function aR(r,e){let n,a,o,u,f;if(ZA(r)){let d=r.getAttribute("action");a=d?xr(d,e):null,n=r.getAttribute("method")||mh,o=Dm(r.getAttribute("enctype"))||ph,u=new FormData(r)}else if(WA(r)||JA(r)&&(r.type==="submit"||r.type==="image")){let d=r.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||d.getAttribute("action");if(a=p?xr(p,e):null,n=r.getAttribute("formmethod")||d.getAttribute("method")||mh,o=Dm(r.getAttribute("formenctype"))||Dm(d.getAttribute("enctype"))||ph,u=new FormData(d,r),!rR()){let{name:g,type:_,value:w}=r;if(_==="image"){let S=g?`${g}.`:"";u.append(`${S}x`,"0"),u.append(`${S}y`,"0")}else g&&u.append(g,w)}}else{if(ef(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=mh,a=null,o=ph,f=r}return u&&o==="text/plain"&&(f=u,u=void 0),{action:a,method:n.toLowerCase(),encType:o,formData:u,body:f}}function Dp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function sR(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function oR(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function lR(r,e,n){let a=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let f=await sR(u,n);return f.links?f.links():[]}return[]}));return fR(a.flat(1).filter(oR).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function dE(r,e,n,a,o,u){let f=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,d=(p,g)=>n[g].pathname!==p.pathname||n[g].route.path?.endsWith("*")&&n[g].params["*"]!==p.params["*"];return u==="assets"?e.filter((p,g)=>f(p,g)||d(p,g)):u==="data"?e.filter((p,g)=>{let _=a.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(f(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let w=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function uR(r,e,{includeHydrateFallback:n}={}){return cR(r.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function cR(r){return[...new Set(r)]}function hR(r){let e={},n=Object.keys(r).sort();for(let a of n)e[a]=r[a];return e}function fR(r,e){let n=new Set;return new Set(e),r.reduce((a,o)=>{let u=JSON.stringify(hR(o));return n.has(u)||(n.add(u),a.push({key:u,link:o})),a},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var dR=new Set([100,101,204,205]);function mR(r,e){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname="_root.data":e&&xr(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function hT(){let r=z.useContext(Us);return Dp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function pR(){let r=z.useContext(Nu);return Dp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Np=z.createContext(void 0);Np.displayName="FrameworkContext";function fT(){let r=z.useContext(Np);return Dp(r,"You must render this element inside a <HydratedRouter> element"),r}function gR(r,e){let n=z.useContext(Np),[a,o]=z.useState(!1),[u,f]=z.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:w}=e,S=z.useRef(null);z.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let Q=q=>{q.forEach(ae=>{f(ae.isIntersecting)})},H=new IntersectionObserver(Q,{threshold:.5});return S.current&&H.observe(S.current),()=>{H.disconnect()}}},[r]),z.useEffect(()=>{if(a){let Q=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(Q)}}},[a]);let x=()=>{o(!0)},M=()=>{o(!1),f(!1)};return n?r!=="intent"?[u,S,{}]:[u,S,{onFocus:su(d,x),onBlur:su(p,M),onMouseEnter:su(g,x),onMouseLeave:su(_,M),onTouchStart:su(w,x)}]:[!1,S,{}]}function su(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function yR({page:r,...e}){let{router:n}=hT(),a=z.useMemo(()=>Na(n.routes,r,n.basename),[n.routes,r,n.basename]);return a?z.createElement(vR,{page:r,matches:a,...e}):null}function _R(r){let{manifest:e,routeModules:n}=fT(),[a,o]=z.useState([]);return z.useEffect(()=>{let u=!1;return lR(r,e,n).then(f=>{u||o(f)}),()=>{u=!0}},[r,e,n]),a}function vR({page:r,matches:e,...n}){let a=Ji(),{manifest:o,routeModules:u}=fT(),{basename:f}=hT(),{loaderData:d,matches:p}=pR(),g=z.useMemo(()=>dE(r,e,p,o,a,"data"),[r,e,p,o,a]),_=z.useMemo(()=>dE(r,e,p,o,a,"assets"),[r,e,p,o,a]),w=z.useMemo(()=>{if(r===a.pathname+a.search+a.hash)return[];let M=new Set,Q=!1;if(e.forEach(q=>{let ae=o.routes[q.route.id];!ae||!ae.hasLoader||(!g.some(ne=>ne.route.id===q.route.id)&&q.route.id in d&&u[q.route.id]?.shouldRevalidate||ae.hasClientLoader?Q=!0:M.add(q.route.id))}),M.size===0)return[];let H=mR(r,f);return Q&&M.size>0&&H.searchParams.set("_routes",e.filter(q=>M.has(q.route.id)).map(q=>q.route.id).join(",")),[H.pathname+H.search]},[f,d,a,o,g,e,r,u]),S=z.useMemo(()=>uR(_,o),[_,o]),x=_R(_);return z.createElement(z.Fragment,null,w.map(M=>z.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),S.map(M=>z.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),x.map(({key:M,link:Q})=>z.createElement("link",{key:M,...Q})))}function ER(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var dT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{dT&&(window.__reactRouterVersion="7.6.2")}catch{}function TR(r,e){return oA({basename:e?.basename,unstable_getContext:e?.unstable_getContext,future:e?.future,history:I1({window:e?.window}),hydrationData:bR(),routes:r,mapRouteProperties:HA,hydrationRouteProperties:FA,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function bR(){let r=window?.__staticRouterHydrationData;return r&&r.errors&&(r={...r,errors:SR(r.errors)}),r}function SR(r){if(!r)return null;let e=Object.entries(r),n={};for(let[a,o]of e)if(o&&o.__type==="RouteErrorResponse")n[a]=new Dh(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let u=window[o.__subType];if(typeof u=="function")try{let f=new u(o.message);f.stack="",n[a]=f}catch{}}if(n[a]==null){let u=new Error(o.message);u.stack="",n[a]=u}}else n[a]=o;return n}var mT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tf=z.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:o,reloadDocument:u,replace:f,state:d,target:p,to:g,preventScrollReset:_,viewTransition:w,...S},x){let{basename:M}=z.useContext($r),Q=typeof g=="string"&&mT.test(g),H,q=!1;if(typeof g=="string"&&Q&&(H=g,dT))try{let b=new URL(window.location.href),R=g.startsWith("//")?new URL(b.protocol+g):new URL(g),D=xr(R.pathname,M);R.origin===b.origin&&D!=null?g=D+R.search+R.hash:q=!0}catch{Yt(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ae=CA(g,{relative:o}),[ne,_e,oe]=gR(a,S),k=CR(g,{replace:f,state:d,target:p,preventScrollReset:_,relative:o,viewTransition:w});function N(b){e&&e(b),b.defaultPrevented||k(b)}let E=z.createElement("a",{...S,...oe,href:H||ae,onClick:q||u?e:N,ref:ER(x,_e),target:p,"data-discover":!Q&&n==="render"?"true":void 0});return ne&&!Q?z.createElement(z.Fragment,null,E,z.createElement(yR,{page:ae})):E});tf.displayName="Link";var wR=z.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:o=!1,style:u,to:f,viewTransition:d,children:p,...g},_){let w=Ou(f,{relative:g.relative}),S=Ji(),x=z.useContext(Nu),{navigator:M,basename:Q}=z.useContext($r),H=x!=null&&xR(w)&&d===!0,q=M.encodeLocation?M.encodeLocation(w).pathname:w.pathname,ae=S.pathname,ne=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(ae=ae.toLowerCase(),ne=ne?ne.toLowerCase():null,q=q.toLowerCase()),ne&&Q&&(ne=xr(ne,Q)||ne);const _e=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let oe=ae===q||!o&&ae.startsWith(q)&&ae.charAt(_e)==="/",k=ne!=null&&(ne===q||!o&&ne.startsWith(q)&&ne.charAt(q.length)==="/"),N={isActive:oe,isPending:k,isTransitioning:H},E=oe?e:void 0,b;typeof a=="function"?b=a(N):b=[a,oe?"active":null,k?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let R=typeof u=="function"?u(N):u;return z.createElement(tf,{...g,"aria-current":E,className:b,ref:_,style:R,to:f,viewTransition:d},typeof p=="function"?p(N):p)});wR.displayName="NavLink";var AR=z.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:o,state:u,method:f=mh,action:d,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:w,...S},x)=>{let M=NR(),Q=OR(d,{relative:g}),H=f.toLowerCase()==="get"?"get":"post",q=typeof d=="string"&&mT.test(d),ae=ne=>{if(p&&p(ne),ne.defaultPrevented)return;ne.preventDefault();let _e=ne.nativeEvent.submitter,oe=_e?.getAttribute("formmethod")||f;M(_e||ne.currentTarget,{fetcherKey:e,method:oe,navigate:n,replace:o,state:u,relative:g,preventScrollReset:_,viewTransition:w})};return z.createElement("form",{ref:x,method:H,action:Q,onSubmit:a?p:ae,...S,"data-discover":!q&&r==="render"?"true":void 0})});AR.displayName="Form";function RR(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pT(r){let e=z.useContext(Us);return ot(e,RR(r)),e}function CR(r,{target:e,replace:n,state:a,preventScrollReset:o,relative:u,viewTransition:f}={}){let d=zs(),p=Ji(),g=Ou(r,{relative:u});return z.useCallback(_=>{if(tR(_,e)){_.preventDefault();let w=n!==void 0?n:qa(p)===qa(g);d(r,{replace:w,state:a,preventScrollReset:o,relative:u,viewTransition:f})}},[p,d,g,n,a,e,r,o,u,f])}function gT(r){Yt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=z.useRef(Qm(r)),n=z.useRef(!1),a=Ji(),o=z.useMemo(()=>nR(a.search,n.current?null:e.current),[a.search]),u=zs(),f=z.useCallback((d,p)=>{const g=Qm(typeof d=="function"?d(o):d);n.current=!0,u("?"+g,p)},[u,o]);return[o,f]}var IR=0,DR=()=>`__${String(++IR)}__`;function NR(){let{router:r}=pT("useSubmit"),{basename:e}=z.useContext($r),n=jA();return z.useCallback(async(a,o={})=>{let{action:u,method:f,encType:d,formData:p,body:g}=aR(a,e);if(o.navigate===!1){let _=o.fetcherKey||DR();await r.fetch(_,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||d,flushSync:o.flushSync})}else await r.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||f,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function OR(r,{relative:e}={}){let{basename:n}=z.useContext($r),a=z.useContext(Kr);ot(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),u={...Ou(r||".",{relative:e})},f=Ji();if(r==null){u.search=f.search;let d=new URLSearchParams(u.search),p=d.getAll("index");if(p.some(_=>_==="")){d.delete("index"),p.filter(w=>w).forEach(w=>d.append("index",w));let _=d.toString();u.search=_?`?${_}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:fi([n,u.pathname])),qa(u)}function xR(r,e={}){let n=z.useContext(Ap);ot(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=pT("useViewTransitionState"),o=Ou(r,{relative:e.relative});if(!n.isTransitioning)return!1;let u=xr(n.currentLocation.pathname,a)||n.currentLocation.pathname,f=xr(n.nextLocation.pathname,a)||n.nextLocation.pathname;return Ih(o.pathname,f)!=null||Ih(o.pathname,u)!=null}[...dR];var MR=F0();/**
 * react-router v7.6.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function VR(r){return z.createElement($A,{flushSync:MR.flushSync,...r})}const PR=()=>{};var mE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=function(r){const e=[];let n=0;for(let a=0;a<r.length;a++){let o=r.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},LR=function(r){const e=[];let n=0,a=0;for(;n<r.length;){const o=r[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],d=r[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|d&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],f=r[n++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},_T={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,d=f?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,_=u>>2,w=(u&3)<<4|d>>4;let S=(d&15)<<2|g>>6,x=g&63;p||(x=64,f||(S=64)),a.push(n[_],n[w],n[S],n[x])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(yT(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):LR(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],d=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const w=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||d==null||g==null||w==null)throw new kR;const S=u<<2|d>>4;if(a.push(S),g!==64){const x=d<<4&240|g>>2;if(a.push(x),w!==64){const M=g<<6&192|w;a.push(M)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class kR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UR=function(r){const e=yT(r);return _T.encodeByteArray(e,!0)},Oh=function(r){return UR(r).replace(/\./g,"")},vT=function(r){try{return _T.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=()=>zR().__FIREBASE_DEFAULTS__,BR=()=>{if(typeof process>"u"||typeof mE>"u")return;const r=mE.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},qR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&vT(r[1]);return e&&JSON.parse(e)},nf=()=>{try{return PR()||jR()||BR()||qR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},ET=r=>nf()?.emulatorHosts?.[r],HR=r=>{const e=ET(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},TT=()=>nf()?.config,bT=r=>nf()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ST(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Oh(JSON.stringify(n)),Oh(JSON.stringify(f)),""].join(".")}const mu={};function $R(){const r={prod:[],emulator:[]};for(const e of Object.keys(mu))mu[e]?r.emulator.push(e):r.prod.push(e);return r}function KR(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let pE=!1;function wT(r,e){if(typeof window>"u"||typeof document>"u"||!Xo(window.location.host)||mu[r]===e||mu[r]||pE)return;mu[r]=e;function n(S){return`__firebase__banner__${S}`}const a="__firebase__banner",u=$R().prod.length>0;function f(){const S=document.getElementById(a);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,x){S.setAttribute("width","24"),S.setAttribute("id",x),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{pE=!0,f()},S}function _(S,x){S.setAttribute("id",x),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function w(){const S=KR(a),x=n("text"),M=document.getElementById(x)||document.createElement("span"),Q=n("learnmore"),H=document.getElementById(Q)||document.createElement("a"),q=n("preprendIcon"),ae=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ne=S.element;d(ne),_(H,Q);const _e=g();p(ae,q),ne.append(ae,M,H,_e),document.body.appendChild(ne)}u?(M.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function YR(){const r=nf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function ZR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JR(){const r=qn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function eC(){return!YR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tC(){try{return typeof indexedDB=="object"}catch{return!1}}function nC(){return new Promise((r,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="FirebaseError";class ea extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=rC,Object.setPrototypeOf(this,ea.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xu.prototype.create)}}class xu{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?iC(u,a):"Error",d=`${this.serviceName}: ${f} (${o}).`;return new ea(o,d,a)}}function iC(r,e){return r.replace(aC,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const aC=/\{\$([^}]+)}/g;function sC(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function xs(r,e){if(r===e)return!0;const n=Object.keys(r),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const u=r[o],f=e[o];if(gE(u)&&gE(f)){if(!xs(u,f))return!1}else if(u!==f)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function gE(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(r){const e=[];for(const[n,a]of Object.entries(r))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function oC(r,e){const n=new lC(r,e);return n.subscribe.bind(n)}class lC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let o;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");uC(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:a},o.next===void 0&&(o.next=Nm),o.error===void 0&&(o.error=Nm),o.complete===void 0&&(o.complete=Nm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uC(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Nm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(r){return r&&r._delegate?r._delegate:r}class Ms{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new FR;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fC(e))try{this.getOrInitializeService({instanceIdentifier:As})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=As){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=As){return this.instances.has(e)}getOptions(e=As){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[u,f]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(u);a===d&&f.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:hC(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=As){return this.component?this.component.multipleInstances?e:As:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hC(r){return r===As?void 0:r}function fC(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ht||(ht={}));const mC={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},pC=ht.INFO,gC={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},yC=(r,e,...n)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),o=gC[e];if(o)console[o](`[${a}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Op{constructor(e){this.name=e,this._logLevel=pC,this._logHandler=yC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ht))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...e),this._logHandler(this,ht.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...e),this._logHandler(this,ht.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...e),this._logHandler(this,ht.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...e),this._logHandler(this,ht.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...e),this._logHandler(this,ht.ERROR,...e)}}const _C=(r,e)=>e.some(n=>r instanceof n);let yE,_E;function vC(){return yE||(yE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EC(){return _E||(_E=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AT=new WeakMap,Ym=new WeakMap,RT=new WeakMap,Om=new WeakMap,xp=new WeakMap;function TC(r){const e=new Promise((n,a)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(La(r.result)),o()},f=()=>{a(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&AT.set(n,r)}).catch(()=>{}),xp.set(e,r),e}function bC(r){if(Ym.has(r))return;const e=new Promise((n,a)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{a(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});Ym.set(r,e)}let Xm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Ym.get(r);if(e==="objectStoreNames")return r.objectStoreNames||RT.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return La(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function SC(r){Xm=r(Xm)}function wC(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=r.call(xm(this),e,...n);return RT.set(a,e.sort?e.sort():[e]),La(a)}:EC().includes(r)?function(...e){return r.apply(xm(this),e),La(AT.get(this))}:function(...e){return La(r.apply(xm(this),e))}}function AC(r){return typeof r=="function"?wC(r):(r instanceof IDBTransaction&&bC(r),_C(r,vC())?new Proxy(r,Xm):r)}function La(r){if(r instanceof IDBRequest)return TC(r);if(Om.has(r))return Om.get(r);const e=AC(r);return e!==r&&(Om.set(r,e),xp.set(e,r)),e}const xm=r=>xp.get(r);function RC(r,e,{blocked:n,upgrade:a,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),d=La(f);return a&&f.addEventListener("upgradeneeded",p=>{a(La(f.result),p.oldVersion,p.newVersion,La(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),d.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const CC=["get","getKey","getAll","getAllKeys","count"],IC=["put","add","delete","clear"],Mm=new Map;function vE(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Mm.get(e))return Mm.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=IC.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||CC.includes(n)))return;const u=async function(f,...d){const p=this.transaction(f,o?"readwrite":"readonly");let g=p.store;return a&&(g=g.index(d.shift())),(await Promise.all([g[n](...d),o&&p.done]))[0]};return Mm.set(e,u),u}SC(r=>({...r,get:(e,n,a)=>vE(e,n)||r.get(e,n,a),has:(e,n)=>!!vE(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NC(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function NC(r){return r.getComponent()?.type==="VERSION"}const Wm="@firebase/app",EE="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new Op("@firebase/app"),OC="@firebase/app-compat",xC="@firebase/analytics-compat",MC="@firebase/analytics",VC="@firebase/app-check-compat",PC="@firebase/app-check",LC="@firebase/auth",kC="@firebase/auth-compat",UC="@firebase/database",zC="@firebase/data-connect",jC="@firebase/database-compat",BC="@firebase/functions",qC="@firebase/functions-compat",HC="@firebase/installations",FC="@firebase/installations-compat",GC="@firebase/messaging",$C="@firebase/messaging-compat",KC="@firebase/performance",QC="@firebase/performance-compat",YC="@firebase/remote-config",XC="@firebase/remote-config-compat",WC="@firebase/storage",ZC="@firebase/storage-compat",JC="@firebase/firestore",eI="@firebase/ai",tI="@firebase/firestore-compat",nI="firebase",rI="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="[DEFAULT]",iI={[Wm]:"fire-core",[OC]:"fire-core-compat",[MC]:"fire-analytics",[xC]:"fire-analytics-compat",[PC]:"fire-app-check",[VC]:"fire-app-check-compat",[LC]:"fire-auth",[kC]:"fire-auth-compat",[UC]:"fire-rtdb",[zC]:"fire-data-connect",[jC]:"fire-rtdb-compat",[BC]:"fire-fn",[qC]:"fire-fn-compat",[HC]:"fire-iid",[FC]:"fire-iid-compat",[GC]:"fire-fcm",[$C]:"fire-fcm-compat",[KC]:"fire-perf",[QC]:"fire-perf-compat",[YC]:"fire-rc",[XC]:"fire-rc-compat",[WC]:"fire-gcs",[ZC]:"fire-gcs-compat",[JC]:"fire-fst",[tI]:"fire-fst-compat",[eI]:"fire-vertex","fire-js":"fire-js",[nI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new Map,aI=new Map,Jm=new Map;function TE(r,e){try{r.container.addComponent(e)}catch(n){Yi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Bo(r){const e=r.name;if(Jm.has(e))return Yi.debug(`There were multiple attempts to register component ${e}.`),!1;Jm.set(e,r);for(const n of xh.values())TE(n,r);for(const n of aI.values())TE(n,r);return!0}function Mp(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function jr(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ka=new xu("app","Firebase",sI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ka.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=rI;function CT(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const a={name:Zm,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw ka.create("bad-app-name",{appName:String(o)});if(n||(n=TT()),!n)throw ka.create("no-options");const u=xh.get(o);if(u){if(xs(n,u.options)&&xs(a,u.config))return u;throw ka.create("duplicate-app",{appName:o})}const f=new dC(o);for(const p of Jm.values())f.addComponent(p);const d=new oI(n,a,f);return xh.set(o,d),d}function IT(r=Zm){const e=xh.get(r);if(!e&&r===Zm&&TT())return CT();if(!e)throw ka.create("no-app",{appName:r});return e}function Ua(r,e,n){let a=iI[r]??r;n&&(a+=`-${n}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${a}" with version "${e}":`];o&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yi.warn(f.join(" "));return}Bo(new Ms(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="firebase-heartbeat-database",uI=1,bu="firebase-heartbeat-store";let Vm=null;function DT(){return Vm||(Vm=RC(lI,uI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(bu)}catch(n){console.warn(n)}}}}).catch(r=>{throw ka.create("idb-open",{originalErrorMessage:r.message})})),Vm}async function cI(r){try{const n=(await DT()).transaction(bu),a=await n.objectStore(bu).get(NT(r));return await n.done,a}catch(e){if(e instanceof ea)Yi.warn(e.message);else{const n=ka.create("idb-get",{originalErrorMessage:e?.message});Yi.warn(n.message)}}}async function bE(r,e){try{const a=(await DT()).transaction(bu,"readwrite");await a.objectStore(bu).put(e,NT(r)),await a.done}catch(n){if(n instanceof ea)Yi.warn(n.message);else{const a=ka.create("idb-set",{originalErrorMessage:n?.message});Yi.warn(a.message)}}}function NT(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=1024,fI=30;class dI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pI(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=SE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:n}),this._heartbeatsCache.heartbeats.length>fI){const o=gI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Yi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=SE(),{heartbeatsToSend:n,unsentEntries:a}=mI(this._heartbeatsCache.heartbeats),o=Oh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Yi.warn(e),""}}}function SE(){return new Date().toISOString().substring(0,10)}function mI(r,e=hI){const n=[];let a=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),wE(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),wE(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class pI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tC()?nC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return bE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return bE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function wE(r){return Oh(JSON.stringify({version:2,heartbeats:r})).length}function gI(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let a=1;a<r.length;a++)r[a].date<n&&(n=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(r){Bo(new Ms("platform-logger",e=>new DC(e),"PRIVATE")),Bo(new Ms("heartbeat",e=>new dI(e),"PRIVATE")),Ua(Wm,EE,r),Ua(Wm,EE,"esm2020"),Ua("fire-js","")}yI("");var AE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var za,OT;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,E){function b(){}b.prototype=E.prototype,N.D=E.prototype,N.prototype=new b,N.prototype.constructor=N,N.C=function(R,D,O){for(var I=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)I[Ie-2]=arguments[Ie];return E.prototype[D].apply(R,I)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,n),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,E,b){b||(b=0);var R=Array(16);if(typeof E=="string")for(var D=0;16>D;++D)R[D]=E.charCodeAt(b++)|E.charCodeAt(b++)<<8|E.charCodeAt(b++)<<16|E.charCodeAt(b++)<<24;else for(D=0;16>D;++D)R[D]=E[b++]|E[b++]<<8|E[b++]<<16|E[b++]<<24;E=N.g[0],b=N.g[1],D=N.g[2];var O=N.g[3],I=E+(O^b&(D^O))+R[0]+3614090360&4294967295;E=b+(I<<7&4294967295|I>>>25),I=O+(D^E&(b^D))+R[1]+3905402710&4294967295,O=E+(I<<12&4294967295|I>>>20),I=D+(b^O&(E^b))+R[2]+606105819&4294967295,D=O+(I<<17&4294967295|I>>>15),I=b+(E^D&(O^E))+R[3]+3250441966&4294967295,b=D+(I<<22&4294967295|I>>>10),I=E+(O^b&(D^O))+R[4]+4118548399&4294967295,E=b+(I<<7&4294967295|I>>>25),I=O+(D^E&(b^D))+R[5]+1200080426&4294967295,O=E+(I<<12&4294967295|I>>>20),I=D+(b^O&(E^b))+R[6]+2821735955&4294967295,D=O+(I<<17&4294967295|I>>>15),I=b+(E^D&(O^E))+R[7]+4249261313&4294967295,b=D+(I<<22&4294967295|I>>>10),I=E+(O^b&(D^O))+R[8]+1770035416&4294967295,E=b+(I<<7&4294967295|I>>>25),I=O+(D^E&(b^D))+R[9]+2336552879&4294967295,O=E+(I<<12&4294967295|I>>>20),I=D+(b^O&(E^b))+R[10]+4294925233&4294967295,D=O+(I<<17&4294967295|I>>>15),I=b+(E^D&(O^E))+R[11]+2304563134&4294967295,b=D+(I<<22&4294967295|I>>>10),I=E+(O^b&(D^O))+R[12]+1804603682&4294967295,E=b+(I<<7&4294967295|I>>>25),I=O+(D^E&(b^D))+R[13]+4254626195&4294967295,O=E+(I<<12&4294967295|I>>>20),I=D+(b^O&(E^b))+R[14]+2792965006&4294967295,D=O+(I<<17&4294967295|I>>>15),I=b+(E^D&(O^E))+R[15]+1236535329&4294967295,b=D+(I<<22&4294967295|I>>>10),I=E+(D^O&(b^D))+R[1]+4129170786&4294967295,E=b+(I<<5&4294967295|I>>>27),I=O+(b^D&(E^b))+R[6]+3225465664&4294967295,O=E+(I<<9&4294967295|I>>>23),I=D+(E^b&(O^E))+R[11]+643717713&4294967295,D=O+(I<<14&4294967295|I>>>18),I=b+(O^E&(D^O))+R[0]+3921069994&4294967295,b=D+(I<<20&4294967295|I>>>12),I=E+(D^O&(b^D))+R[5]+3593408605&4294967295,E=b+(I<<5&4294967295|I>>>27),I=O+(b^D&(E^b))+R[10]+38016083&4294967295,O=E+(I<<9&4294967295|I>>>23),I=D+(E^b&(O^E))+R[15]+3634488961&4294967295,D=O+(I<<14&4294967295|I>>>18),I=b+(O^E&(D^O))+R[4]+3889429448&4294967295,b=D+(I<<20&4294967295|I>>>12),I=E+(D^O&(b^D))+R[9]+568446438&4294967295,E=b+(I<<5&4294967295|I>>>27),I=O+(b^D&(E^b))+R[14]+3275163606&4294967295,O=E+(I<<9&4294967295|I>>>23),I=D+(E^b&(O^E))+R[3]+4107603335&4294967295,D=O+(I<<14&4294967295|I>>>18),I=b+(O^E&(D^O))+R[8]+1163531501&4294967295,b=D+(I<<20&4294967295|I>>>12),I=E+(D^O&(b^D))+R[13]+2850285829&4294967295,E=b+(I<<5&4294967295|I>>>27),I=O+(b^D&(E^b))+R[2]+4243563512&4294967295,O=E+(I<<9&4294967295|I>>>23),I=D+(E^b&(O^E))+R[7]+1735328473&4294967295,D=O+(I<<14&4294967295|I>>>18),I=b+(O^E&(D^O))+R[12]+2368359562&4294967295,b=D+(I<<20&4294967295|I>>>12),I=E+(b^D^O)+R[5]+4294588738&4294967295,E=b+(I<<4&4294967295|I>>>28),I=O+(E^b^D)+R[8]+2272392833&4294967295,O=E+(I<<11&4294967295|I>>>21),I=D+(O^E^b)+R[11]+1839030562&4294967295,D=O+(I<<16&4294967295|I>>>16),I=b+(D^O^E)+R[14]+4259657740&4294967295,b=D+(I<<23&4294967295|I>>>9),I=E+(b^D^O)+R[1]+2763975236&4294967295,E=b+(I<<4&4294967295|I>>>28),I=O+(E^b^D)+R[4]+1272893353&4294967295,O=E+(I<<11&4294967295|I>>>21),I=D+(O^E^b)+R[7]+4139469664&4294967295,D=O+(I<<16&4294967295|I>>>16),I=b+(D^O^E)+R[10]+3200236656&4294967295,b=D+(I<<23&4294967295|I>>>9),I=E+(b^D^O)+R[13]+681279174&4294967295,E=b+(I<<4&4294967295|I>>>28),I=O+(E^b^D)+R[0]+3936430074&4294967295,O=E+(I<<11&4294967295|I>>>21),I=D+(O^E^b)+R[3]+3572445317&4294967295,D=O+(I<<16&4294967295|I>>>16),I=b+(D^O^E)+R[6]+76029189&4294967295,b=D+(I<<23&4294967295|I>>>9),I=E+(b^D^O)+R[9]+3654602809&4294967295,E=b+(I<<4&4294967295|I>>>28),I=O+(E^b^D)+R[12]+3873151461&4294967295,O=E+(I<<11&4294967295|I>>>21),I=D+(O^E^b)+R[15]+530742520&4294967295,D=O+(I<<16&4294967295|I>>>16),I=b+(D^O^E)+R[2]+3299628645&4294967295,b=D+(I<<23&4294967295|I>>>9),I=E+(D^(b|~O))+R[0]+4096336452&4294967295,E=b+(I<<6&4294967295|I>>>26),I=O+(b^(E|~D))+R[7]+1126891415&4294967295,O=E+(I<<10&4294967295|I>>>22),I=D+(E^(O|~b))+R[14]+2878612391&4294967295,D=O+(I<<15&4294967295|I>>>17),I=b+(O^(D|~E))+R[5]+4237533241&4294967295,b=D+(I<<21&4294967295|I>>>11),I=E+(D^(b|~O))+R[12]+1700485571&4294967295,E=b+(I<<6&4294967295|I>>>26),I=O+(b^(E|~D))+R[3]+2399980690&4294967295,O=E+(I<<10&4294967295|I>>>22),I=D+(E^(O|~b))+R[10]+4293915773&4294967295,D=O+(I<<15&4294967295|I>>>17),I=b+(O^(D|~E))+R[1]+2240044497&4294967295,b=D+(I<<21&4294967295|I>>>11),I=E+(D^(b|~O))+R[8]+1873313359&4294967295,E=b+(I<<6&4294967295|I>>>26),I=O+(b^(E|~D))+R[15]+4264355552&4294967295,O=E+(I<<10&4294967295|I>>>22),I=D+(E^(O|~b))+R[6]+2734768916&4294967295,D=O+(I<<15&4294967295|I>>>17),I=b+(O^(D|~E))+R[13]+1309151649&4294967295,b=D+(I<<21&4294967295|I>>>11),I=E+(D^(b|~O))+R[4]+4149444226&4294967295,E=b+(I<<6&4294967295|I>>>26),I=O+(b^(E|~D))+R[11]+3174756917&4294967295,O=E+(I<<10&4294967295|I>>>22),I=D+(E^(O|~b))+R[2]+718787259&4294967295,D=O+(I<<15&4294967295|I>>>17),I=b+(O^(D|~E))+R[9]+3951481745&4294967295,N.g[0]=N.g[0]+E&4294967295,N.g[1]=N.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+O&4294967295}a.prototype.u=function(N,E){E===void 0&&(E=N.length);for(var b=E-this.blockSize,R=this.B,D=this.h,O=0;O<E;){if(D==0)for(;O<=b;)o(this,N,O),O+=this.blockSize;if(typeof N=="string"){for(;O<E;)if(R[D++]=N.charCodeAt(O++),D==this.blockSize){o(this,R),D=0;break}}else for(;O<E;)if(R[D++]=N[O++],D==this.blockSize){o(this,R),D=0;break}}this.h=D,this.o+=E},a.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var E=1;E<N.length-8;++E)N[E]=0;var b=8*this.o;for(E=N.length-8;E<N.length;++E)N[E]=b&255,b/=256;for(this.u(N),N=Array(16),E=b=0;4>E;++E)for(var R=0;32>R;R+=8)N[b++]=this.g[E]>>>R&255;return N};function u(N,E){var b=d;return Object.prototype.hasOwnProperty.call(b,N)?b[N]:b[N]=E(N)}function f(N,E){this.h=E;for(var b=[],R=!0,D=N.length-1;0<=D;D--){var O=N[D]|0;R&&O==E||(b[D]=O,R=!1)}this.g=b}var d={};function p(N){return-128<=N&&128>N?u(N,function(E){return new f([E|0],0>E?-1:0)}):new f([N|0],0>N?-1:0)}function g(N){if(isNaN(N)||!isFinite(N))return w;if(0>N)return H(g(-N));for(var E=[],b=1,R=0;N>=b;R++)E[R]=N/b|0,b*=4294967296;return new f(E,0)}function _(N,E){if(N.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(N.charAt(0)=="-")return H(_(N.substring(1),E));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=g(Math.pow(E,8)),R=w,D=0;D<N.length;D+=8){var O=Math.min(8,N.length-D),I=parseInt(N.substring(D,D+O),E);8>O?(O=g(Math.pow(E,O)),R=R.j(O).add(g(I))):(R=R.j(b),R=R.add(g(I)))}return R}var w=p(0),S=p(1),x=p(16777216);r=f.prototype,r.m=function(){if(Q(this))return-H(this).m();for(var N=0,E=1,b=0;b<this.g.length;b++){var R=this.i(b);N+=(0<=R?R:4294967296+R)*E,E*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(M(this))return"0";if(Q(this))return"-"+H(this).toString(N);for(var E=g(Math.pow(N,6)),b=this,R="";;){var D=_e(b,E).g;b=q(b,D.j(E));var O=((0<b.g.length?b.g[0]:b.h)>>>0).toString(N);if(b=D,M(b))return O+R;for(;6>O.length;)O="0"+O;R=O+R}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function M(N){if(N.h!=0)return!1;for(var E=0;E<N.g.length;E++)if(N.g[E]!=0)return!1;return!0}function Q(N){return N.h==-1}r.l=function(N){return N=q(this,N),Q(N)?-1:M(N)?0:1};function H(N){for(var E=N.g.length,b=[],R=0;R<E;R++)b[R]=~N.g[R];return new f(b,~N.h).add(S)}r.abs=function(){return Q(this)?H(this):this},r.add=function(N){for(var E=Math.max(this.g.length,N.g.length),b=[],R=0,D=0;D<=E;D++){var O=R+(this.i(D)&65535)+(N.i(D)&65535),I=(O>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);R=I>>>16,O&=65535,I&=65535,b[D]=I<<16|O}return new f(b,b[b.length-1]&-2147483648?-1:0)};function q(N,E){return N.add(H(E))}r.j=function(N){if(M(this)||M(N))return w;if(Q(this))return Q(N)?H(this).j(H(N)):H(H(this).j(N));if(Q(N))return H(this.j(H(N)));if(0>this.l(x)&&0>N.l(x))return g(this.m()*N.m());for(var E=this.g.length+N.g.length,b=[],R=0;R<2*E;R++)b[R]=0;for(R=0;R<this.g.length;R++)for(var D=0;D<N.g.length;D++){var O=this.i(R)>>>16,I=this.i(R)&65535,Ie=N.i(D)>>>16,qe=N.i(D)&65535;b[2*R+2*D]+=I*qe,ae(b,2*R+2*D),b[2*R+2*D+1]+=O*qe,ae(b,2*R+2*D+1),b[2*R+2*D+1]+=I*Ie,ae(b,2*R+2*D+1),b[2*R+2*D+2]+=O*Ie,ae(b,2*R+2*D+2)}for(R=0;R<E;R++)b[R]=b[2*R+1]<<16|b[2*R];for(R=E;R<2*E;R++)b[R]=0;return new f(b,0)};function ae(N,E){for(;(N[E]&65535)!=N[E];)N[E+1]+=N[E]>>>16,N[E]&=65535,E++}function ne(N,E){this.g=N,this.h=E}function _e(N,E){if(M(E))throw Error("division by zero");if(M(N))return new ne(w,w);if(Q(N))return E=_e(H(N),E),new ne(H(E.g),H(E.h));if(Q(E))return E=_e(N,H(E)),new ne(H(E.g),E.h);if(30<N.g.length){if(Q(N)||Q(E))throw Error("slowDivide_ only works with positive integers.");for(var b=S,R=E;0>=R.l(N);)b=oe(b),R=oe(R);var D=k(b,1),O=k(R,1);for(R=k(R,2),b=k(b,2);!M(R);){var I=O.add(R);0>=I.l(N)&&(D=D.add(b),O=I),R=k(R,1),b=k(b,1)}return E=q(N,D.j(E)),new ne(D,E)}for(D=w;0<=N.l(E);){for(b=Math.max(1,Math.floor(N.m()/E.m())),R=Math.ceil(Math.log(b)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),O=g(b),I=O.j(E);Q(I)||0<I.l(N);)b-=R,O=g(b),I=O.j(E);M(O)&&(O=S),D=D.add(O),N=q(N,I)}return new ne(D,N)}r.A=function(N){return _e(this,N).h},r.and=function(N){for(var E=Math.max(this.g.length,N.g.length),b=[],R=0;R<E;R++)b[R]=this.i(R)&N.i(R);return new f(b,this.h&N.h)},r.or=function(N){for(var E=Math.max(this.g.length,N.g.length),b=[],R=0;R<E;R++)b[R]=this.i(R)|N.i(R);return new f(b,this.h|N.h)},r.xor=function(N){for(var E=Math.max(this.g.length,N.g.length),b=[],R=0;R<E;R++)b[R]=this.i(R)^N.i(R);return new f(b,this.h^N.h)};function oe(N){for(var E=N.g.length+1,b=[],R=0;R<E;R++)b[R]=N.i(R)<<1|N.i(R-1)>>>31;return new f(b,N.h)}function k(N,E){var b=E>>5;E%=32;for(var R=N.g.length-b,D=[],O=0;O<R;O++)D[O]=0<E?N.i(O+b)>>>E|N.i(O+b+1)<<32-E:N.i(O+b);return new f(D,N.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,OT=a,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=_,za=f}).apply(typeof AE<"u"?AE:typeof self<"u"?self:typeof window<"u"?window:{});var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xT,cu,MT,gh,ep,VT,PT,LT;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,v){return c==Array.prototype||c==Object.prototype||(c[y]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof sh=="object"&&sh];for(var y=0;y<c.length;++y){var v=c[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var a=n(this);function o(c,y){if(y)e:{var v=a;c=c.split(".");for(var C=0;C<c.length-1;C++){var $=c[C];if(!($ in v))break e;v=v[$]}c=c[c.length-1],C=v[c],y=y(C),y!=C&&y!=null&&e(v,c,{configurable:!0,writable:!0,value:y})}}function u(c,y){c instanceof String&&(c+="");var v=0,C=!1,$={next:function(){if(!C&&v<c.length){var te=v++;return{value:y(te,c[te]),done:!1}}return C=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}o("Array.prototype.values",function(c){return c||function(){return u(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},d=this||self;function p(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function g(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function _(c,y,v){return c.call.apply(c.bind,arguments)}function w(c,y,v){if(!c)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,C),c.apply(y,$)}}return function(){return c.apply(y,arguments)}}function S(c,y,v){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:w,S.apply(null,arguments)}function x(c,y){var v=Array.prototype.slice.call(arguments,1);return function(){var C=v.slice();return C.push.apply(C,arguments),c.apply(this,C)}}function M(c,y){function v(){}v.prototype=y.prototype,c.aa=y.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(C,$,te){for(var ve=Array(arguments.length-2),gt=2;gt<arguments.length;gt++)ve[gt-2]=arguments[gt];return y.prototype[$].apply(C,ve)}}function Q(c){const y=c.length;if(0<y){const v=Array(y);for(let C=0;C<y;C++)v[C]=c[C];return v}return[]}function H(c,y){for(let v=1;v<arguments.length;v++){const C=arguments[v];if(p(C)){const $=c.length||0,te=C.length||0;c.length=$+te;for(let ve=0;ve<te;ve++)c[$+ve]=C[ve]}else c.push(C)}}class q{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ae(c){return/^[\s\xa0]*$/.test(c)}function ne(){var c=d.navigator;return c&&(c=c.userAgent)?c:""}function _e(c){return _e[" "](c),c}_e[" "]=function(){};var oe=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function k(c,y,v){for(const C in c)y.call(v,c[C],C,c)}function N(c,y){for(const v in c)y.call(void 0,c[v],v,c)}function E(c){const y={};for(const v in c)y[v]=c[v];return y}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(c,y){let v,C;for(let $=1;$<arguments.length;$++){C=arguments[$];for(v in C)c[v]=C[v];for(let te=0;te<b.length;te++)v=b[te],Object.prototype.hasOwnProperty.call(C,v)&&(c[v]=C[v])}}function D(c){var y=1;c=c.split(":");const v=[];for(;0<y&&c.length;)v.push(c.shift()),y--;return c.length&&v.push(c.join(":")),v}function O(c){d.setTimeout(()=>{throw c},0)}function I(){var c=ge;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class Ie{constructor(){this.h=this.g=null}add(y,v){const C=qe.get();C.set(y,v),this.h?this.h.next=C:this.g=C,this.h=C}}var qe=new q(()=>new G,c=>c.reset());class G{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let re,me=!1,ge=new Ie,V=()=>{const c=d.Promise.resolve(void 0);re=()=>{c.then(X)}};var X=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(v){O(v)}var y=qe;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}me=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};d.addEventListener("test",v,y),d.removeEventListener("test",v,y)}catch{}return c}();function De(c,y){if(Z.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,C=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(oe){e:{try{_e(y.nodeName);var $=!0;break e}catch{}$=!1}$||(y=null)}}else v=="mouseover"?y=c.fromElement:v=="mouseout"&&(y=c.toElement);this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Se[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&De.aa.h.call(this)}}M(De,Z);var Se={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var mt="closure_listenable_"+(1e6*Math.random()|0),le=0;function ye(c,y,v,C,$){this.listener=c,this.proxy=null,this.src=y,this.type=v,this.capture=!!C,this.ha=$,this.key=++le,this.da=this.fa=!1}function Te(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function be(c){this.src=c,this.g={},this.h=0}be.prototype.add=function(c,y,v,C,$){var te=c.toString();c=this.g[te],c||(c=this.g[te]=[],this.h++);var ve=Ue(c,y,C,$);return-1<ve?(y=c[ve],v||(y.fa=!1)):(y=new ye(y,this.src,te,!!C,$),y.fa=v,c.push(y)),y};function Le(c,y){var v=y.type;if(v in c.g){var C=c.g[v],$=Array.prototype.indexOf.call(C,y,void 0),te;(te=0<=$)&&Array.prototype.splice.call(C,$,1),te&&(Te(y),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Ue(c,y,v,C){for(var $=0;$<c.length;++$){var te=c[$];if(!te.da&&te.listener==y&&te.capture==!!v&&te.ha==C)return $}return-1}var xe="closure_lm_"+(1e6*Math.random()|0),He={};function Ne(c,y,v,C,$){if(Array.isArray(y)){for(var te=0;te<y.length;te++)Ne(c,y[te],v,C,$);return null}return v=un(v),c&&c[mt]?c.K(y,v,g(C)?!!C.capture:!1,$):nt(c,y,v,!1,C,$)}function nt(c,y,v,C,$,te){if(!y)throw Error("Invalid event type");var ve=g($)?!!$.capture:!!$,gt=yn(c);if(gt||(c[xe]=gt=new be(c)),v=gt.add(y,v,C,ve,te),v.proxy)return v;if(C=Ye(),v.proxy=C,C.src=c,C.listener=v,c.addEventListener)Ee||($=ve),$===void 0&&($=!1),c.addEventListener(y.toString(),C,$);else if(c.attachEvent)c.attachEvent(Vn(y.toString()),C);else if(c.addListener&&c.removeListener)c.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ye(){function c(v){return y.call(c.src,c.listener,v)}const y=Gt;return c}function Et(c,y,v,C,$){if(Array.isArray(y))for(var te=0;te<y.length;te++)Et(c,y[te],v,C,$);else C=g(C)?!!C.capture:!!C,v=un(v),c&&c[mt]?(c=c.i,y=String(y).toString(),y in c.g&&(te=c.g[y],v=Ue(te,v,C,$),-1<v&&(Te(te[v]),Array.prototype.splice.call(te,v,1),te.length==0&&(delete c.g[y],c.h--)))):c&&(c=yn(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Ue(y,v,C,$)),(v=-1<c?y[c]:null)&&Dt(v))}function Dt(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[mt])Le(y.i,c);else{var v=c.type,C=c.proxy;y.removeEventListener?y.removeEventListener(v,C,c.capture):y.detachEvent?y.detachEvent(Vn(v),C):y.addListener&&y.removeListener&&y.removeListener(C),(v=yn(y))?(Le(v,c),v.h==0&&(v.src=null,y[xe]=null)):Te(c)}}}function Vn(c){return c in He?He[c]:He[c]="on"+c}function Gt(c,y){if(c.da)c=!0;else{y=new De(y,this);var v=c.listener,C=c.ha||c.src;c.fa&&Dt(c),c=v.call(C,y)}return c}function yn(c){return c=c[xe],c instanceof be?c:null}var zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function un(c){return typeof c=="function"?c:(c[zt]||(c[zt]=function(y){return c.handleEvent(y)}),c[zt])}function Ge(){ie.call(this),this.i=new be(this),this.M=this,this.F=null}M(Ge,ie),Ge.prototype[mt]=!0,Ge.prototype.removeEventListener=function(c,y,v,C){Et(this,c,y,v,C)};function ze(c,y){var v,C=c.F;if(C)for(v=[];C;C=C.F)v.push(C);if(c=c.M,C=y.type||y,typeof y=="string")y=new Z(y,c);else if(y instanceof Z)y.target=y.target||c;else{var $=y;y=new Z(C,c),R(y,$)}if($=!0,v)for(var te=v.length-1;0<=te;te--){var ve=y.g=v[te];$=Lt(ve,C,!0,y)&&$}if(ve=y.g=c,$=Lt(ve,C,!0,y)&&$,$=Lt(ve,C,!1,y)&&$,v)for(te=0;te<v.length;te++)ve=y.g=v[te],$=Lt(ve,C,!1,y)&&$}Ge.prototype.N=function(){if(Ge.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var v=c.g[y],C=0;C<v.length;C++)Te(v[C]);delete c.g[y],c.h--}}this.F=null},Ge.prototype.K=function(c,y,v,C){return this.i.add(String(c),y,!1,v,C)},Ge.prototype.L=function(c,y,v,C){return this.i.add(String(c),y,!0,v,C)};function Lt(c,y,v,C){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var $=!0,te=0;te<y.length;++te){var ve=y[te];if(ve&&!ve.da&&ve.capture==v){var gt=ve.listener,fn=ve.ha||ve.src;ve.fa&&Le(c.i,ve),$=gt.call(fn,C)!==!1&&$}}return $&&!C.defaultPrevented}function Bt(c,y,v){if(typeof c=="function")v&&(c=S(c,v));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(c,y||0)}function Ti(c){c.g=Bt(()=>{c.g=null,c.i&&(c.i=!1,Ti(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class cn extends ie{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ti(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xt(c){ie.call(this),this.h=c,this.g={}}M(Xt,ie);var Pn=[];function er(c){k(c.g,function(y,v){this.g.hasOwnProperty(v)&&Dt(y)},c),c.g={}}Xt.prototype.N=function(){Xt.aa.N.call(this),er(this)},Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tr=d.JSON.stringify,bi=d.JSON.parse,mr=class{stringify(c){return d.JSON.stringify(c,void 0)}parse(c){return d.JSON.parse(c,void 0)}};function ta(){}ta.prototype.h=null;function Si(c){return c.h||(c.h=c.i())}function Za(){}var pr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mr(){Z.call(this,"d")}M(Mr,Z);function na(){Z.call(this,"c")}M(na,Z);var Hn={},Qr=null;function Yr(){return Qr=Qr||new Ge}Hn.La="serverreachability";function ra(c){Z.call(this,Hn.La,c)}M(ra,Z);function L(c){const y=Yr();ze(y,new ra(y))}Hn.STAT_EVENT="statevent";function F(c,y){Z.call(this,Hn.STAT_EVENT,c),this.stat=y}M(F,Z);function Y(c){const y=Yr();ze(y,new F(y,c))}Hn.Ma="timingevent";function fe(c,y){Z.call(this,Hn.Ma,c),this.size=y}M(fe,Z);function pe(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){c()},y)}function Ae(){this.g=!0}Ae.prototype.xa=function(){this.g=!1};function je(c,y,v,C,$,te){c.info(function(){if(c.g)if(te)for(var ve="",gt=te.split("&"),fn=0;fn<gt.length;fn++){var yt=gt[fn].split("=");if(1<yt.length){var vn=yt[0];yt=yt[1];var dn=vn.split("_");ve=2<=dn.length&&dn[1]=="type"?ve+(vn+"="+yt+"&"):ve+(vn+"=redacted&")}}else ve=null;else ve=te;return"XMLHTTP REQ ("+C+") [attempt "+$+"]: "+y+`
`+v+`
`+ve})}function Ce(c,y,v,C,$,te,ve){c.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+$+"]: "+y+`
`+v+`
`+te+" "+ve})}function Ve(c,y,v,C){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+$e(c,v)+(C?" "+C:"")})}function Me(c,y){c.info(function(){return"TIMEOUT: "+y})}Ae.prototype.info=function(){};function $e(c,y){if(!c.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var C=v[c];if(!(2>C.length)){var $=C[1];if(Array.isArray($)&&!(1>$.length)){var te=$[0];if(te!="noop"&&te!="stop"&&te!="close")for(var ve=1;ve<$.length;ve++)$[ve]=""}}}}return tr(v)}catch{return y}}var Be={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lt;function wt(){}M(wt,ta),wt.prototype.g=function(){return new XMLHttpRequest},wt.prototype.i=function(){return{}},lt=new wt;function Tt(c,y,v,C){this.j=c,this.i=y,this.l=v,this.R=C||1,this.U=new Xt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pt}function pt(){this.i=null,this.g="",this.h=!1}var at={},gr={};function hn(c,y,v){c.L=1,c.v=ts(ir(y)),c.m=v,c.P=!0,Fn(c,null)}function Fn(c,y){c.F=Date.now(),nr(c),c.A=ir(c.v);var v=c.A,C=c.R;Array.isArray(C)||(C=[String(C)]),ll(v.i,"t",C),c.C=0,v=c.j.J,c.h=new pt,c.g=ec(c.j,v?y:null,!c.m),0<c.O&&(c.M=new cn(S(c.Y,c,c.g),c.O)),y=c.U,v=c.g,C=c.ca;var $="readystatechange";Array.isArray($)||($&&(Pn[0]=$.toString()),$=Pn);for(var te=0;te<$.length;te++){var ve=Ne(v,$[te],C||y.handleEvent,!1,y.h||y);if(!ve)break;y.g[ve.key]=ve}y=c.H?E(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),L(),je(c.i,c.u,c.A,c.l,c.R,c.m)}Tt.prototype.ca=function(c){c=c.target;const y=this.M;y&&Tr(c)==3?y.j():this.Y(c)},Tt.prototype.Y=function(c){try{if(c==this.g)e:{const dn=Tr(this.g);var y=this.g.Ba();const Oi=this.g.Z();if(!(3>dn)&&(dn!=3||this.g&&(this.h.h||this.g.oa()||$u(this.g)))){this.J||dn!=4||y==7||(y==8||0>=Oi?L(3):L(2)),Ln(this);var v=this.g.Z();this.X=v;t:if(wn(this)){var C=$u(this.g);c="";var $=C.length,te=Tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Je(this),Gn(this);var ve="";break t}this.h.i=new d.TextDecoder}for(y=0;y<$;y++)this.h.h=!0,c+=this.h.i.decode(C[y],{stream:!(te&&y==$-1)});C.length=0,this.h.g+=c,this.C=0,ve=this.h.g}else ve=this.g.oa();if(this.o=v==200,Ce(this.i,this.u,this.A,this.l,this.R,dn,v),this.o){if(this.T&&!this.K){t:{if(this.g){var gt,fn=this.g;if((gt=fn.g?fn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ae(gt)){var yt=gt;break t}}yt=null}if(v=yt)Ve(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tn(this,v);else{this.o=!1,this.s=3,Y(12),Je(this),Gn(this);break e}}if(this.P){v=!0;let Rn;for(;!this.J&&this.C<ve.length;)if(Rn=Xr(this,ve),Rn==gr){dn==4&&(this.s=4,Y(14),v=!1),Ve(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==at){this.s=4,Y(15),Ve(this.i,this.l,ve,"[Invalid Chunk]"),v=!1;break}else Ve(this.i,this.l,Rn,null),tn(this,Rn);if(wn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dn!=4||ve.length!=0||this.h.h||(this.s=1,Y(16),v=!1),this.o=this.o&&v,!v)Ve(this.i,this.l,ve,"[Invalid Chunked Response]"),Je(this),Gn(this);else if(0<ve.length&&!this.W){this.W=!0;var vn=this.j;vn.g==this&&vn.ba&&!vn.M&&(vn.j.info("Great, no buffering proxy detected. Bytes received: "+ve.length),us(vn),vn.M=!0,Y(11))}}else Ve(this.i,this.l,ve,null),tn(this,ve);dn==4&&Je(this),this.o&&!this.J&&(dn==4?Wu(this.j,this):(this.o=!1,nr(this)))}else Cf(this.g),v==400&&0<ve.indexOf("Unknown SID")?(this.s=3,Y(12)):(this.s=0,Y(13)),Je(this),Gn(this)}}}catch{}finally{}};function wn(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Xr(c,y){var v=c.C,C=y.indexOf(`
`,v);return C==-1?gr:(v=Number(y.substring(v,C)),isNaN(v)?at:(C+=1,C+v>y.length?gr:(y=y.slice(C,C+v),c.C=C+v,y)))}Tt.prototype.cancel=function(){this.J=!0,Je(this)};function nr(c){c.S=Date.now()+c.I,ia(c,c.I)}function ia(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=pe(S(c.ba,c),y)}function Ln(c){c.B&&(d.clearTimeout(c.B),c.B=null)}Tt.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Me(this.i,this.A),this.L!=2&&(L(),Y(17)),Je(this),this.s=2,Gn(this)):ia(this,this.S-c)};function Gn(c){c.j.G==0||c.J||Wu(c.j,c)}function Je(c){Ln(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,er(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function tn(c,y){try{var v=c.j;if(v.G!=0&&(v.g==c||yr(v.h,c))){if(!c.K&&yr(v.h,c)&&v.G==3){try{var C=v.Da.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var $=C;if($[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)Zs(v),Xs(v);else break e;dl(v),Y(18)}}else v.za=$[1],0<v.za-v.T&&37500>$[2]&&v.F&&v.v==0&&!v.C&&(v.C=pe(S(v.Za,v),6e3));if(1>=Vt(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ni(v,11)}else if((c.K||v.g==c)&&Zs(v),!ae(y))for($=v.Da.g.parse(y),y=0;y<$.length;y++){let yt=$[y];if(v.T=yt[0],yt=yt[1],v.G==2)if(yt[0]=="c"){v.K=yt[1],v.ia=yt[2];const vn=yt[3];vn!=null&&(v.la=vn,v.j.info("VER="+v.la));const dn=yt[4];dn!=null&&(v.Aa=dn,v.j.info("SVER="+v.Aa));const Oi=yt[5];Oi!=null&&typeof Oi=="number"&&0<Oi&&(C=1.5*Oi,v.L=C,v.j.info("backChannelRequestTimeoutMs_="+C)),C=v;const Rn=c.g;if(Rn){const ii=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ii){var te=C.h;te.g||ii.indexOf("spdy")==-1&&ii.indexOf("quic")==-1&&ii.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(wi(te,te.h),te.h=null))}if(C.D){const pl=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;pl&&(C.ya=pl,Nt(C.I,C.D,pl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),C=v;var ve=c;if(C.qa=Ju(C,C.J?C.ia:null,C.W),ve.K){An(C.h,ve);var gt=ve,fn=C.L;fn&&(gt.I=fn),gt.B&&(Ln(gt),nr(gt)),C.g=ve}else Yu(C);0<v.i.length&&Ws(v)}else yt[0]!="stop"&&yt[0]!="close"||Ni(v,7);else v.G==3&&(yt[0]=="stop"||yt[0]=="close"?yt[0]=="stop"?Ni(v,7):hl(v):yt[0]!="noop"&&v.l&&v.l.ta(yt),v.v=0)}}L(4)}catch{}}var rr=class{constructor(c,y){this.g=c,this.map=y}};function Yn(c){this.l=c||10,d.PerformanceNavigationTiming?(c=d.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wr(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Vt(c){return c.h?1:c.g?c.g.size:0}function yr(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function wi(c,y){c.g?c.g.add(y):c.h=y}function An(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Yn.prototype.cancel=function(){if(this.i=il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function il(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const v of c.g.values())y=y.concat(v.D);return y}return Q(c.i)}function Sf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var y=[],v=c.length,C=0;C<v;C++)y.push(c[C]);return y}y=[],v=0;for(C in c)y[v++]=c[C];return y}function Fs(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var y=[];c=c.length;for(var v=0;v<c;v++)y.push(v);return y}y=[],v=0;for(const C in c)y[v++]=C;return y}}}function al(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var v=Fs(c),C=Sf(c),$=C.length,te=0;te<$;te++)y.call(void 0,C[te],v&&v[te],c)}var Ja=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wf(c,y){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var C=c[v].indexOf("="),$=null;if(0<=C){var te=c[v].substring(0,C);$=c[v].substring(C+1)}else te=c[v];y(te,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function nn(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof nn){this.h=c.h,es(this,c.j),this.o=c.o,this.g=c.g,aa(this,c.s),this.l=c.l;var y=c.i,v=new Ri;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),Ai(this,v),this.m=c.m}else c&&(y=String(c).match(Ja))?(this.h=!1,es(this,y[1]||"",!0),this.o=_r(y[2]||""),this.g=_r(y[3]||"",!0),aa(this,y[4]),this.l=_r(y[5]||"",!0),Ai(this,y[6]||"",!0),this.m=_r(y[7]||"")):(this.h=!1,this.i=new Ri(null,this.h))}nn.prototype.toString=function(){var c=[],y=this.j;y&&c.push(ns(y,sl,!0),":");var v=this.g;return(v||y=="file")&&(c.push("//"),(y=this.o)&&c.push(ns(y,sl,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(ns(v,v.charAt(0)=="/"?Af:ol,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",ns(v,Gs)),c.join("")};function ir(c){return new nn(c)}function es(c,y,v){c.j=v?_r(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function aa(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function Ai(c,y,v){y instanceof Ri?(c.i=y,Fu(c.i,c.h)):(v||(y=ns(y,Rf)),c.i=new Ri(y,c.h))}function Nt(c,y,v){c.i.set(y,v)}function ts(c){return Nt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function _r(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ns(c,y,v){return typeof c=="string"?(c=encodeURI(c).replace(y,Hu),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Hu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var sl=/[#\/\?@]/g,ol=/[#\?:]/g,Af=/[#\?]/g,Rf=/[#\?@]/g,Gs=/#/g;function Ri(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function vr(c){c.g||(c.g=new Map,c.h=0,c.i&&wf(c.i,function(y,v){c.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=Ri.prototype,r.add=function(c,y){vr(this),this.i=null,c=Zr(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(y),this.h+=1,this};function Ci(c,y){vr(c),y=Zr(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Ii(c,y){return vr(c),y=Zr(c,y),c.g.has(y)}r.forEach=function(c,y){vr(this),this.g.forEach(function(v,C){v.forEach(function($){c.call(y,$,C,this)},this)},this)},r.na=function(){vr(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let C=0;C<y.length;C++){const $=c[C];for(let te=0;te<$.length;te++)v.push(y[C])}return v},r.V=function(c){vr(this);let y=[];if(typeof c=="string")Ii(this,c)&&(y=y.concat(this.g.get(Zr(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)y=y.concat(c[v])}return y},r.set=function(c,y){return vr(this),this.i=null,c=Zr(this,c),Ii(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function ll(c,y,v){Ci(c,y),0<v.length&&(c.i=null,c.g.set(Zr(c,y),Q(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var C=y[v];const te=encodeURIComponent(String(C)),ve=this.V(C);for(C=0;C<ve.length;C++){var $=te;ve[C]!==""&&($+="="+encodeURIComponent(String(ve[C]))),c.push($)}}return this.i=c.join("&")};function Zr(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Fu(c,y){y&&!c.j&&(vr(c),c.i=null,c.g.forEach(function(v,C){var $=C.toLowerCase();C!=$&&(Ci(this,C),ll(this,$,v))},c)),c.j=y}function rs(c,y){const v=new Ae;if(d.Image){const C=new Image;C.onload=x(Er,v,"TestLoadImage: loaded",!0,y,C),C.onerror=x(Er,v,"TestLoadImage: error",!1,y,C),C.onabort=x(Er,v,"TestLoadImage: abort",!1,y,C),C.ontimeout=x(Er,v,"TestLoadImage: timeout",!1,y,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=c}else y(!1)}function Vr(c,y){const v=new Ae,C=new AbortController,$=setTimeout(()=>{C.abort(),Er(v,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:C.signal}).then(te=>{clearTimeout($),te.ok?Er(v,"TestPingServer: ok",!0,y):Er(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),Er(v,"TestPingServer: error",!1,y)})}function Er(c,y,v,C,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),C(v)}catch{}}function is(){this.g=new mr}function Jr(c,y,v){const C=v||"";try{al(c,function($,te){let ve=$;g($)&&(ve=tr($)),y.push(C+te+"="+encodeURIComponent(ve))})}catch($){throw y.push(C+"type="+encodeURIComponent("_badmap")),$}}function sa(c){this.l=c.Ub||null,this.j=c.eb||!1}M(sa,ta),sa.prototype.g=function(){return new Di(this.l,this.j)},sa.prototype.i=function(c){return function(){return c}}({});function Di(c,y){Ge.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(Di,Ge),r=Di.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,ti(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ei(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ul(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function ul(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?ei(this):ti(this),this.readyState==3&&ul(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,ei(this))},r.Qa=function(c){this.g&&(this.response=c,ei(this))},r.ga=function(){this.g&&ei(this)};function ei(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ti(c)}r.setRequestHeader=function(c,y){this.u.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=y.next();return c.join(`\r
`)};function ti(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function cl(c){let y="";return k(c,function(v,C){y+=C,y+=":",y+=v,y+=`\r
`}),y}function _n(c,y,v){e:{for(C in v){var C=!1;break e}C=!0}C||(v=cl(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):Nt(c,y,v))}function At(c){Ge.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(At,Ge);var $s=/^https?$/i,as=["POST","PUT"];r=At.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,y,v,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lt.g(),this.v=this.o?Si(this.o):Si(lt),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(te){Gu(this,te);return}if(c=v||"",v=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var $ in C)v.set($,C[$]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const te of C.keys())v.set(te,C.get(te));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(v.keys()).find(te=>te.toLowerCase()=="content-type"),$=d.FormData&&c instanceof d.FormData,!(0<=Array.prototype.indexOf.call(as,y,void 0))||C||$||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,ve]of v)this.g.setRequestHeader(te,ve);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ss(this),this.u=!0,this.g.send(c),this.u=!1}catch(te){Gu(this,te)}};function Gu(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Ks(c),ni(c)}function Ks(c){c.A||(c.A=!0,ze(c,"complete"),ze(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ze(this,"complete"),ze(this,"abort"),ni(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ni(this,!0)),At.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Qs(this):this.bb())},r.bb=function(){Qs(this)};function Qs(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Tr(c)!=4||c.Z()!=2)){if(c.u&&Tr(c)==4)Bt(c.Ea,0,c);else if(ze(c,"readystatechange"),Tr(c)==4){c.h=!1;try{const ve=c.Z();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var C;if(C=ve===0){var $=String(c.D).match(Ja)[1]||null;!$&&d.self&&d.self.location&&($=d.self.location.protocol.slice(0,-1)),C=!$s.test($?$.toLowerCase():"")}v=C}if(v)ze(c,"complete"),ze(c,"success");else{c.m=6;try{var te=2<Tr(c)?c.g.statusText:""}catch{te=""}c.l=te+" ["+c.Z()+"]",Ks(c)}}finally{ni(c)}}}}function ni(c,y){if(c.g){ss(c);const v=c.g,C=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||ze(c,"ready");try{v.onreadystatechange=C}catch{}}}function ss(c){c.I&&(d.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Tr(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Tr(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),bi(y)}};function $u(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Cf(c){const y={};c=(c.g&&2<=Tr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<c.length;C++){if(ae(c[C]))continue;var v=D(c[C]);const $=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const te=y[$]||[];y[$]=te,te.push(v)}N(y,function(C){return C.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function os(c,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||y}function Ys(c){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=os("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=os("baseRetryDelayMs",5e3,c),this.cb=os("retryDelaySeedMs",1e4,c),this.Wa=os("forwardChannelMaxRetries",2,c),this.wa=os("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Yn(c&&c.concurrentRequestLimit),this.Da=new is,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ys.prototype,r.la=8,r.G=1,r.connect=function(c,y,v,C){Y(0),this.W=c,this.H=y||{},v&&C!==void 0&&(this.H.OSID=v,this.H.OAID=C),this.F=this.X,this.I=Ju(this,null,this.W),Ws(this)};function hl(c){if(Ku(c),c.G==3){var y=c.U++,v=ir(c.I);if(Nt(v,"SID",c.K),Nt(v,"RID",y),Nt(v,"TYPE","terminate"),ls(c,v),y=new Tt(c,c.j,y),y.L=2,y.v=ts(ir(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=y.v,v=!0),v||(y.g=ec(y.j,null),y.g.ea(y.v)),y.F=Date.now(),nr(y)}Zu(c)}function Xs(c){c.g&&(us(c),c.g.cancel(),c.g=null)}function Ku(c){Xs(c),c.u&&(d.clearTimeout(c.u),c.u=null),Zs(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&d.clearTimeout(c.s),c.s=null)}function Ws(c){if(!Wr(c.h)&&!c.s){c.s=!0;var y=c.Ga;re||V(),me||(re(),me=!0),ge.add(y,c),c.B=0}}function If(c,y){return Vt(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=pe(S(c.Ga,c,y),ml(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const $=new Tt(this,this.j,c);let te=this.o;if(this.S&&(te?(te=E(te),R(te,this.S)):te=this.S),this.m!==null||this.O||($.H=te,te=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var C=this.i[v];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Qu(this,$,y),v=ir(this.I),Nt(v,"RID",c),Nt(v,"CVER",22),this.D&&Nt(v,"X-HTTP-Session-Id",this.D),ls(this,v),te&&(this.O?y="headers="+encodeURIComponent(String(cl(te)))+"&"+y:this.m&&_n(v,this.m,te)),wi(this.h,$),this.Ua&&Nt(v,"TYPE","init"),this.P?(Nt(v,"$req",y),Nt(v,"SID","null"),$.T=!0,hn($,v,null)):hn($,v,y),this.G=2}}else this.G==3&&(c?fl(this,c):this.i.length==0||Wr(this.h)||fl(this))};function fl(c,y){var v;y?v=y.l:v=c.U++;const C=ir(c.I);Nt(C,"SID",c.K),Nt(C,"RID",v),Nt(C,"AID",c.T),ls(c,C),c.m&&c.o&&_n(C,c.m,c.o),v=new Tt(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),y&&(c.i=y.D.concat(c.i)),y=Qu(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),wi(c.h,v),hn(v,C,y)}function ls(c,y){c.H&&k(c.H,function(v,C){Nt(y,C,v)}),c.l&&al({},function(v,C){Nt(y,C,v)})}function Qu(c,y,v){v=Math.min(c.i.length,v);var C=c.l?S(c.l.Na,c.l,c):null;e:{var $=c.i;let te=-1;for(;;){const ve=["count="+v];te==-1?0<v?(te=$[0].g,ve.push("ofs="+te)):te=0:ve.push("ofs="+te);let gt=!0;for(let fn=0;fn<v;fn++){let yt=$[fn].g;const vn=$[fn].map;if(yt-=te,0>yt)te=Math.max(0,$[fn].g-100),gt=!1;else try{Jr(vn,ve,"req"+yt+"_")}catch{C&&C(vn)}}if(gt){C=ve.join("&");break e}}}return c=c.i.splice(0,v),y.D=c,C}function Yu(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;re||V(),me||(re(),me=!0),ge.add(y,c),c.v=0}}function dl(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=pe(S(c.Fa,c),ml(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Xu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=pe(S(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Y(10),Xs(this),Xu(this))};function us(c){c.A!=null&&(d.clearTimeout(c.A),c.A=null)}function Xu(c){c.g=new Tt(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=ir(c.qa);Nt(y,"RID","rpc"),Nt(y,"SID",c.K),Nt(y,"AID",c.T),Nt(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&Nt(y,"TO",c.ja),Nt(y,"TYPE","xmlhttp"),ls(c,y),c.m&&c.o&&_n(y,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=ts(ir(y)),v.m=null,v.P=!0,Fn(v,c)}r.Za=function(){this.C!=null&&(this.C=null,Xs(this),dl(this),Y(19))};function Zs(c){c.C!=null&&(d.clearTimeout(c.C),c.C=null)}function Wu(c,y){var v=null;if(c.g==y){Zs(c),us(c),c.g=null;var C=2}else if(yr(c.h,y))v=y.D,An(c.h,y),C=1;else return;if(c.G!=0){if(y.o)if(C==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var $=c.B;C=Yr(),ze(C,new fe(C,v)),Ws(c)}else Yu(c);else if($=y.s,$==3||$==0&&0<y.X||!(C==1&&If(c,y)||C==2&&dl(c)))switch(v&&0<v.length&&(y=c.h,y.i=y.i.concat(v)),$){case 1:Ni(c,5);break;case 4:Ni(c,10);break;case 3:Ni(c,6);break;default:Ni(c,2)}}}function ml(c,y){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*y}function Ni(c,y){if(c.j.info("Error code "+y),y==2){var v=S(c.fb,c),C=c.Xa;const $=!C;C=new nn(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||es(C,"https"),ts(C),$?rs(C.toString(),v):Vr(C.toString(),v)}else Y(2);c.G=0,c.l&&c.l.sa(y),Zu(c),Ku(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Y(2)):(this.j.info("Failed to ping google.com"),Y(1))};function Zu(c){if(c.G=0,c.ka=[],c.l){const y=il(c.h);(y.length!=0||c.i.length!=0)&&(H(c.ka,y),H(c.ka,c.i),c.h.i.length=0,Q(c.i),c.i.length=0),c.l.ra()}}function Ju(c,y,v){var C=v instanceof nn?ir(v):new nn(v);if(C.g!="")y&&(C.g=y+"."+C.g),aa(C,C.s);else{var $=d.location;C=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;var te=new nn(null);C&&es(te,C),y&&(te.g=y),$&&aa(te,$),v&&(te.l=v),C=te}return v=c.D,y=c.ya,v&&y&&Nt(C,v,y),Nt(C,"VER",c.la),ls(c,C),C}function ec(c,y,v){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new At(new sa({eb:v})):new At(c.pa),y.Ha(c.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function tc(){}r=tc.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Js(){}Js.prototype.g=function(c,y){return new $n(c,y)};function $n(c,y){Ge.call(this),this.g=new Ys(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!ae(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ae(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new ri(this)}M($n,Ge),$n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$n.prototype.close=function(){hl(this.g)},$n.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=tr(c),c=v);y.i.push(new rr(y.Ya++,c)),y.G==3&&Ws(y)},$n.prototype.N=function(){this.g.l=null,delete this.j,hl(this.g),delete this.g,$n.aa.N.call(this)};function nc(c){Mr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const v in y){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}M(nc,Mr);function rc(){na.call(this),this.status=1}M(rc,na);function ri(c){this.g=c}M(ri,tc),ri.prototype.ua=function(){ze(this.g,"a")},ri.prototype.ta=function(c){ze(this.g,new nc(c))},ri.prototype.sa=function(c){ze(this.g,new rc)},ri.prototype.ra=function(){ze(this.g,"b")},Js.prototype.createWebChannel=Js.prototype.g,$n.prototype.send=$n.prototype.o,$n.prototype.open=$n.prototype.m,$n.prototype.close=$n.prototype.close,LT=function(){return new Js},PT=function(){return Yr()},VT=Hn,ep={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Be.NO_ERROR=0,Be.TIMEOUT=8,Be.HTTP_ERROR=6,gh=Be,Xe.COMPLETE="complete",MT=Xe,Za.EventType=pr,pr.OPEN="a",pr.CLOSE="b",pr.ERROR="c",pr.MESSAGE="d",Ge.prototype.listen=Ge.prototype.K,cu=Za,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,xT=At}).apply(typeof sh<"u"?sh:typeof self<"u"?self:typeof window<"u"?window:{});const RE="@firebase/firestore",CE="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jn.UNAUTHENTICATED=new jn(null),jn.GOOGLE_CREDENTIALS=new jn("google-credentials-uid"),jn.FIRST_PARTY=new jn("first-party-uid"),jn.MOCK_USER=new jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new Op("@firebase/firestore");function Oo(){return Vs.logLevel}function Re(r,...e){if(Vs.logLevel<=ht.DEBUG){const n=e.map(Vp);Vs.debug(`Firestore (${Zo}): ${r}`,...n)}}function Xi(r,...e){if(Vs.logLevel<=ht.ERROR){const n=e.map(Vp);Vs.error(`Firestore (${Zo}): ${r}`,...n)}}function qo(r,...e){if(Vs.logLevel<=ht.WARN){const n=e.map(Vp);Vs.warn(`Firestore (${Zo}): ${r}`,...n)}}function Vp(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(r,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,kT(r,a,n)}function kT(r,e,n){let a=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw Xi(a),new Error(a)}function Rt(r,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,r||kT(e,o,a)}function tt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends ea{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _I{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(jn.UNAUTHENTICATED))}shutdown(){}}class vI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class EI{constructor(e){this.t=e,this.currentUser=jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Rt(this.o===void 0,42304);let a=this.i;const o=p=>this.i!==a?(a=this.i,n(p)):Promise.resolve();let u=new ja;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ja,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ja)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(a=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Rt(typeof a.accessToken=="string",31837,{l:a}),new UT(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Rt(e===null||typeof e=="string",2055,{h:e}),new jn(e)}}class TI{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class bI{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new TI(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class IE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SI{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Rt(this.o===void 0,3512);const a=u=>{u.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>a(u))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new IE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Rt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new IE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<r;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=wI(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<n&&(a+=e.charAt(o[u]%62))}return a}}function ft(r,e){return r<e?-1:r>e?1:0}function tp(r,e){const n=Math.min(r.length,e.length);for(let a=0;a<n;a++){const o=r.charAt(a),u=e.charAt(a);if(o!==u)return Pm(o)===Pm(u)?ft(o,u):Pm(o)?1:-1}return ft(r.length,e.length)}const AI=55296,RI=57343;function Pm(r){const e=r.charCodeAt(0);return e>=AI&&e<=RI}function Ho(r,e,n){return r.length===e.length&&r.every((a,o)=>n(a,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="__name__";class hi{constructor(e,n,a){n===void 0?n=0:n>e.length&&Qe(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&Qe(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return hi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hi?e.forEach(a=>{n.push(a)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const u=hi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return ft(e.length,n.length)}static compareSegments(e,n){const a=hi.isNumericId(e),o=hi.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?hi.extractNumericId(e).compare(hi.extractNumericId(n)):tp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return za.fromString(e.substring(4,e.length-2))}}class Ut extends hi{construct(e,n,a){return new Ut(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new we(ce.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter(o=>o.length>0))}return new Ut(n)}static emptyPath(){return new Ut([])}}const CI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xn extends hi{construct(e,n,a){return new xn(e,n,a)}static isValidIdentifier(e){return CI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===DE}static keyField(){return new xn([DE])}static fromServerFormat(e){const n=[];let a="",o=0;const u=()=>{if(a.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let f=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new we(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new we(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,o+=2}else d==="`"?(f=!f,o++):d!=="."||f?(a+=d,o++):(u(),o++)}if(u(),f)throw new we(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xn(n)}static emptyPath(){return new xn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(Ut.fromString(e))}static fromName(e){return new ke(Ut.fromString(e).popFirst(5))}static empty(){return new ke(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new Ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(r,e,n){if(!n)throw new we(ce.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function II(r,e,n,a){if(e===!0&&a===!0)throw new we(ce.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function NE(r){if(!ke.isDocumentKey(r))throw new we(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function OE(r){if(ke.isDocumentKey(r))throw new we(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function jT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function rf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Qe(12329,{type:typeof r})}function di(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new we(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rf(r);throw new we(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(r,e){const n={typeString:r};return e&&(n.value=e),n}function Vu(r,e){if(!jT(r))throw new we(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in r)){n=`JSON missing required field: '${a}'`;break}const f=r[a];if(o&&typeof f!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${a}' field to equal '${u.value}'`;break}}if(n)throw new we(ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE=-62135596800,ME=1e6;class jt{static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*ME);return new jt(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new we(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<xE)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ME}_compareTo(e){return this.seconds===e.seconds?ft(this.nanoseconds,e.nanoseconds):ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vu(e,jt._jsonSchema))return new jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jt._jsonSchemaVersion="firestore/timestamp/1.0",jt._jsonSchema={type:ln("string",jt._jsonSchemaVersion),seconds:ln("number"),nanoseconds:ln("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{static fromTimestamp(e){return new et(e)}static min(){return new et(new jt(0,0))}static max(){return new et(new jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=-1;function DI(r,e){const n=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,o=et.fromTimestamp(a===1e9?new jt(n+1,0):new jt(n,a));return new Ha(o,ke.empty(),e)}function NI(r){return new Ha(r.readTime,r.key,Su)}class Ha{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new Ha(et.min(),ke.empty(),Su)}static max(){return new Ha(et.max(),ke.empty(),Su)}}function OI(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ke.comparator(r.documentKey,e.documentKey),n!==0?n:ft(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(r){if(r.code!==ce.FAILED_PRECONDITION||r.message!==xI)throw r;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(a,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):de.reject(n)}static resolve(e){return new de((n,a)=>{n(e)})}static reject(e){return new de((n,a)=>{a(e)})}static waitFor(e){return new de((n,a)=>{let o=0,u=0,f=!1;e.forEach(d=>{++o,d.next(()=>{++u,f&&u===o&&n()},p=>a(p))}),f=!0,u===o&&n()})}static or(e){let n=de.resolve(!1);for(const a of e)n=n.next(o=>o?de.resolve(o):a());return n}static forEach(e,n){const a=[];return e.forEach((o,u)=>{a.push(n.call(this,o,u))}),this.waitFor(a)}static mapArray(e,n){return new de((a,o)=>{const u=e.length,f=new Array(u);let d=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next(_=>{f[g]=_,++d,d===u&&a(f)},_=>o(_))}})}static doWhile(e,n){return new de((a,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):a()};u()})}}function VI(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function el(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}af.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp=-1;function sf(r){return r==null}function Mh(r){return r===0&&1/r==-1/0}function PI(r){return typeof r=="number"&&Number.isInteger(r)&&!Mh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="";function LI(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=VE(e)),e=kI(r.get(n),e);return VE(e)}function kI(r,e){let n=e;const a=r.length;for(let o=0;o<a;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case BT:n+="";break;default:n+=u}}return n}function VE(r){return r+BT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function js(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function qT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n){this.comparator=e,this.root=n||On.EMPTY}insert(e,n){return new Ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new Ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,a)=>(e(n,a),!1))}toString(){const e=[];return this.inorderTraversal((n,a)=>(e.push(`${n}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?a(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class On{constructor(e,n,a,o,u){this.key=e,this.value=n,this.color=a??On.RED,this.left=o??On.EMPTY,this.right=u??On.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,u){return new On(e??this.key,n??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,a),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return On.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return On.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,On.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,On.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Qe(27949);return e+(this.isRed()?0:1)}}On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe(57766)}get value(){throw Qe(16141)}get color(){throw Qe(16727)}get left(){throw Qe(29726)}get right(){throw Qe(36894)}copy(e,n,a,o,u){return this}insert(e,n,a){return new On(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.comparator=e,this.data=new Ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,a)=>(e(n),!1))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new LE(this.data.getIterator())}getIteratorFrom(e){return new LE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(a=>{n=n.add(a)}),n}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gn(this.comparator);return n.data=e,n}}class LE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.fields=e,e.sort(xn.comparator)}static empty(){return new Br([])}unionWith(e){let n=new gn(xn.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new Br(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ho(this.fields,e.fields,(n,a)=>n.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new HT("Invalid base64 string: "+u):u}}(e);return new Mn(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new Mn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mn.EMPTY_BYTE_STRING=new Mn("");const UI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fa(r){if(Rt(!!r,39018),typeof r=="string"){let e=0;const n=UI.exec(r);if(Rt(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Jt(r.seconds),nanos:Jt(r.nanos)}}function Jt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ga(r){return typeof r=="string"?Mn.fromBase64String(r):Mn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT="server_timestamp",GT="__type__",$T="__previous_value__",KT="__local_write_time__";function kp(r){return(r?.mapValue?.fields||{})[GT]?.stringValue===FT}function of(r){const e=r.mapValue.fields[$T];return kp(e)?of(e):e}function wu(r){const e=Fa(r.mapValue.fields[KT].timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n,a,o,u,f,d,p,g,_){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_}}const Vh="(default)";class Au{constructor(e,n){this.projectId=e,this.database=n||Vh}static empty(){return new Au("","")}get isDefaultDatabase(){return this.database===Vh}isEqual(e){return e instanceof Au&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="__type__",jI="__max__",lh={mapValue:{}},YT="__vector__",Ph="value";function $a(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?kp(r)?4:qI(r)?9007199254740991:BI(r)?10:11:Qe(28295,{value:r})}function vi(r,e){if(r===e)return!0;const n=$a(r);if(n!==$a(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return wu(r).isEqual(wu(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Fa(o.timestampValue),d=Fa(u.timestampValue);return f.seconds===d.seconds&&f.nanos===d.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return Ga(o.bytesValue).isEqual(Ga(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return Jt(o.geoPointValue.latitude)===Jt(u.geoPointValue.latitude)&&Jt(o.geoPointValue.longitude)===Jt(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Jt(o.integerValue)===Jt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=Jt(o.doubleValue),d=Jt(u.doubleValue);return f===d?Mh(f)===Mh(d):isNaN(f)&&isNaN(d)}return!1}(r,e);case 9:return Ho(r.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},d=u.mapValue.fields||{};if(PE(f)!==PE(d))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(d[p]===void 0||!vi(f[p],d[p])))return!1;return!0}(r,e);default:return Qe(52216,{left:r})}}function Ru(r,e){return(r.values||[]).find(n=>vi(n,e))!==void 0}function Fo(r,e){if(r===e)return 0;const n=$a(r),a=$a(e);if(n!==a)return ft(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return ft(r.booleanValue,e.booleanValue);case 2:return function(u,f){const d=Jt(u.integerValue||u.doubleValue),p=Jt(f.integerValue||f.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(r,e);case 3:return kE(r.timestampValue,e.timestampValue);case 4:return kE(wu(r),wu(e));case 5:return tp(r.stringValue,e.stringValue);case 6:return function(u,f){const d=Ga(u),p=Ga(f);return d.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(u,f){const d=u.split("/"),p=f.split("/");for(let g=0;g<d.length&&g<p.length;g++){const _=ft(d[g],p[g]);if(_!==0)return _}return ft(d.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,f){const d=ft(Jt(u.latitude),Jt(f.latitude));return d!==0?d:ft(Jt(u.longitude),Jt(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return UE(r.arrayValue,e.arrayValue);case 10:return function(u,f){const d=u.fields||{},p=f.fields||{},g=d[Ph]?.arrayValue,_=p[Ph]?.arrayValue,w=ft(g?.values?.length||0,_?.values?.length||0);return w!==0?w:UE(g,_)}(r.mapValue,e.mapValue);case 11:return function(u,f){if(u===lh.mapValue&&f===lh.mapValue)return 0;if(u===lh.mapValue)return 1;if(f===lh.mapValue)return-1;const d=u.fields||{},p=Object.keys(d),g=f.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let w=0;w<p.length&&w<_.length;++w){const S=tp(p[w],_[w]);if(S!==0)return S;const x=Fo(d[p[w]],g[_[w]]);if(x!==0)return x}return ft(p.length,_.length)}(r.mapValue,e.mapValue);default:throw Qe(23264,{he:n})}}function kE(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ft(r,e);const n=Fa(r),a=Fa(e),o=ft(n.seconds,a.seconds);return o!==0?o:ft(n.nanos,a.nanos)}function UE(r,e){const n=r.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const u=Fo(n[o],a[o]);if(u)return u}return ft(n.length,a.length)}function Go(r){return np(r)}function np(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const a=Fa(n);return`time(${a.seconds},${a.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Ga(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return ke.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let a="[",o=!0;for(const u of n.values||[])o?o=!1:a+=",",a+=np(u);return a+"]"}(r.arrayValue):"mapValue"in r?function(n){const a=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of a)u?u=!1:o+=",",o+=`${f}:${np(n.fields[f])}`;return o+"}"}(r.mapValue):Qe(61005,{value:r})}function yh(r){switch($a(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=of(r);return e?16+yh(e):16;case 5:return 2*r.stringValue.length;case 6:return Ga(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((o,u)=>o+yh(u),0)}(r.arrayValue);case 10:case 11:return function(a){let o=0;return js(a.fields,(u,f)=>{o+=u.length+yh(f)}),o}(r.mapValue);default:throw Qe(13486,{value:r})}}function zE(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function rp(r){return!!r&&"integerValue"in r}function Up(r){return!!r&&"arrayValue"in r}function jE(r){return!!r&&"nullValue"in r}function BE(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function _h(r){return!!r&&"mapValue"in r}function BI(r){return(r?.mapValue?.fields||{})[QT]?.stringValue===YT}function pu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return js(r.mapValue.fields,(n,a)=>e.mapValue.fields[n]=pu(a)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pu(r.arrayValue.values[n]);return e}return{...r}}function qI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===jI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.value=e}static empty(){return new Nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!_h(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(n)}setAll(e){let n=xn.emptyPath(),a={},o=[];e.forEach((f,d)=>{if(!n.isImmediateParentOf(d)){const p=this.getFieldsMap(n);this.applyChanges(p,a,o),a={},o=[],n=d.popLast()}f?a[d.lastSegment()]=pu(f):o.push(d.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,a,o)}delete(e){const n=this.field(e.popLast());_h(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];_h(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){js(n,(o,u)=>e[o]=u);for(const o of a)delete e[o]}clone(){return new Nr(pu(this.value))}}function XT(r){const e=[];return js(r.fields,(n,a)=>{const o=new xn([n]);if(_h(a)){const u=XT(a.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new Br(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,n,a,o,u,f,d){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=u,this.data=f,this.documentState=d}static newInvalidDocument(e){return new Bn(e,0,et.min(),et.min(),et.min(),Nr.empty(),0)}static newFoundDocument(e,n,a,o){return new Bn(e,1,n,et.min(),a,o,0)}static newNoDocument(e,n){return new Bn(e,2,n,et.min(),et.min(),Nr.empty(),0)}static newUnknownDocument(e,n){return new Bn(e,3,n,et.min(),et.min(),Nr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n){this.position=e,this.inclusive=n}}function qE(r,e,n){let a=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?a=ke.comparator(ke.fromName(f.referenceValue),n.key):a=Fo(f,n.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function HE(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!vi(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n="asc"){this.field=e,this.dir=n}}function HI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{}class on extends WT{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new GI(e,n,a):n==="array-contains"?new QI(e,a):n==="in"?new YI(e,a):n==="not-in"?new XI(e,a):n==="array-contains-any"?new WI(e,a):new on(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new $I(e,a):new KI(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fo(n,this.value)):n!==null&&$a(this.value)===$a(n)&&this.matchesComparison(Fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gr extends WT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Gr(e,n)}matches(e){return ZT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ZT(r){return r.op==="and"}function JT(r){return FI(r)&&ZT(r)}function FI(r){for(const e of r.filters)if(e instanceof Gr)return!1;return!0}function ip(r){if(r instanceof on)return r.field.canonicalString()+r.op.toString()+Go(r.value);if(JT(r))return r.filters.map(e=>ip(e)).join(",");{const e=r.filters.map(n=>ip(n)).join(",");return`${r.op}(${e})`}}function eb(r,e){return r instanceof on?function(a,o){return o instanceof on&&a.op===o.op&&a.field.isEqual(o.field)&&vi(a.value,o.value)}(r,e):r instanceof Gr?function(a,o){return o instanceof Gr&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce((u,f,d)=>u&&eb(f,o.filters[d]),!0):!1}(r,e):void Qe(19439)}function tb(r){return r instanceof on?function(n){return`${n.field.canonicalString()} ${n.op} ${Go(n.value)}`}(r):r instanceof Gr?function(n){return n.op.toString()+" {"+n.getFilters().map(tb).join(" ,")+"}"}(r):"Filter"}class GI extends on{constructor(e,n,a){super(e,n,a),this.key=ke.fromName(a.referenceValue)}matches(e){const n=ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class $I extends on{constructor(e,n){super(e,"in",n),this.keys=nb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class KI extends on{constructor(e,n){super(e,"not-in",n),this.keys=nb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function nb(r,e){return(e.arrayValue?.values||[]).map(n=>ke.fromName(n.referenceValue))}class QI extends on{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Up(n)&&Ru(n.arrayValue,this.value)}}class YI extends on{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ru(this.value.arrayValue,n)}}class XI extends on{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ru(this.value.arrayValue,n)}}class WI extends on{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Up(n)||!n.arrayValue.values)&&n.arrayValue.values.some(a=>Ru(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n=null,a=[],o=[],u=null,f=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=f,this.endAt=d,this.Te=null}}function FE(r,e=null,n=[],a=[],o=null,u=null,f=null){return new ZI(r,e,n,a,o,u,f)}function zp(r){const e=tt(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(a=>ip(a)).join(","),n+="|ob:",n+=e.orderBy.map(a=>function(u){return u.field.canonicalString()+u.dir}(a)).join(","),sf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(a=>Go(a)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(a=>Go(a)).join(",")),e.Te=n}return e.Te}function jp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!HI(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!eb(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!HE(r.startAt,e.startAt)&&HE(r.endAt,e.endAt)}function ap(r){return ke.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,n=null,a=[],o=[],u=null,f="F",d=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=f,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function JI(r,e,n,a,o,u,f,d){return new Pu(r,e,n,a,o,u,f,d)}function lf(r){return new Pu(r)}function GE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function rb(r){return r.collectionGroup!==null}function gu(r){const e=tt(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let d=new gn(xn.comparator);return f.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new kh(u,a))}),n.has(xn.keyField().canonicalString())||e.Ie.push(new kh(xn.keyField(),a))}return e.Ie}function mi(r){const e=tt(r);return e.Ee||(e.Ee=e2(e,gu(r))),e.Ee}function e2(r,e){if(r.limitType==="F")return FE(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new kh(o.field,u)});const n=r.endAt?new Lh(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new Lh(r.startAt.position,r.startAt.inclusive):null;return FE(r.path,r.collectionGroup,e,r.filters,r.limit,n,a)}}function sp(r,e){const n=r.filters.concat([e]);return new Pu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function op(r,e,n){return new Pu(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function uf(r,e){return jp(mi(r),mi(e))&&r.limitType===e.limitType}function ib(r){return`${zp(mi(r))}|lt:${r.limitType}`}function xo(r){return`Query(target=${function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map(o=>tb(o)).join(", ")}]`),sf(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map(o=>Go(o)).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map(o=>Go(o)).join(",")),`Target(${a})`}(mi(r))}; limitType=${r.limitType})`}function cf(r,e){return e.isFoundDocument()&&function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):ke.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)}(r,e)&&function(a,o){for(const u of gu(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(a,o){return!(a.startAt&&!function(f,d,p){const g=qE(f,d,p);return f.inclusive?g<=0:g<0}(a.startAt,gu(a),o)||a.endAt&&!function(f,d,p){const g=qE(f,d,p);return f.inclusive?g>=0:g>0}(a.endAt,gu(a),o))}(r,e)}function t2(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ab(r){return(e,n)=>{let a=!1;for(const o of gu(r)){const u=n2(o,e,n);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function n2(r,e,n){const a=r.field.isKeyField()?ke.comparator(e.key,n.key):function(u,f,d){const p=f.data.field(u),g=d.data.field(u);return p!==null&&g!==null?Fo(p,g):Qe(42886)}(r.field,e,n);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return Qe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){js(this.inner,(n,a)=>{for(const[o,u]of a)e(o,u)})}isEmpty(){return qT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=new Ft(ke.comparator);function Wi(){return r2}const sb=new Ft(ke.comparator);function hu(...r){let e=sb;for(const n of r)e=e.insert(n.key,n);return e}function ob(r){let e=sb;return r.forEach((n,a)=>e=e.insert(n,a.overlayedDocument)),e}function Is(){return yu()}function lb(){return yu()}function yu(){return new Bs(r=>r.toString(),(r,e)=>r.isEqual(e))}const i2=new Ft(ke.comparator),a2=new gn(ke.comparator);function dt(...r){let e=a2;for(const n of r)e=e.add(n);return e}const s2=new gn(ft);function o2(){return s2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mh(e)?"-0":e}}function ub(r){return{integerValue:""+r}}function l2(r,e){return PI(e)?ub(e):Bp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(){this._=void 0}}function u2(r,e,n){return r instanceof Uh?function(o,u){const f={fields:{[GT]:{stringValue:FT},[KT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&kp(u)&&(u=of(u)),u&&(f.fields[$T]=u),{mapValue:f}}(n,e):r instanceof Cu?hb(r,e):r instanceof Iu?fb(r,e):function(o,u){const f=cb(o,u),d=$E(f)+$E(o.Ae);return rp(f)&&rp(o.Ae)?ub(d):Bp(o.serializer,d)}(r,e)}function c2(r,e,n){return r instanceof Cu?hb(r,e):r instanceof Iu?fb(r,e):n}function cb(r,e){return r instanceof zh?function(a){return rp(a)||function(u){return!!u&&"doubleValue"in u}(a)}(e)?e:{integerValue:0}:null}class Uh extends hf{}class Cu extends hf{constructor(e){super(),this.elements=e}}function hb(r,e){const n=db(e);for(const a of r.elements)n.some(o=>vi(o,a))||n.push(a);return{arrayValue:{values:n}}}class Iu extends hf{constructor(e){super(),this.elements=e}}function fb(r,e){let n=db(e);for(const a of r.elements)n=n.filter(o=>!vi(o,a));return{arrayValue:{values:n}}}class zh extends hf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function $E(r){return Jt(r.integerValue||r.doubleValue)}function db(r){return Up(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function h2(r,e){return r.field.isEqual(e.field)&&function(a,o){return a instanceof Cu&&o instanceof Cu||a instanceof Iu&&o instanceof Iu?Ho(a.elements,o.elements,vi):a instanceof zh&&o instanceof zh?vi(a.Ae,o.Ae):a instanceof Uh&&o instanceof Uh}(r.transform,e.transform)}class f2{constructor(e,n){this.version=e,this.transformResults=n}}class Hr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Hr}static exists(e){return new Hr(void 0,e)}static updateTime(e){return new Hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class ff{}function mb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new qp(r.key,Hr.none()):new Lu(r.key,r.data,Hr.none());{const n=r.data,a=Nr.empty();let o=new gn(xn.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?a.delete(u):a.set(u,f),o=o.add(u)}return new qs(r.key,a,new Br(o.toArray()),Hr.none())}}function d2(r,e,n){r instanceof Lu?function(o,u,f){const d=o.value.clone(),p=QE(o.fieldTransforms,u,f.transformResults);d.setAll(p),u.convertToFoundDocument(f.version,d).setHasCommittedMutations()}(r,e,n):r instanceof qs?function(o,u,f){if(!vh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const d=QE(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(pb(o)),p.setAll(d),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(r,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function _u(r,e,n,a){return r instanceof Lu?function(u,f,d,p){if(!vh(u.precondition,f))return d;const g=u.value.clone(),_=YE(u.fieldTransforms,p,f);return g.setAll(_),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null}(r,e,n,a):r instanceof qs?function(u,f,d,p){if(!vh(u.precondition,f))return d;const g=YE(u.fieldTransforms,p,f),_=f.data;return _.setAll(pb(u)),_.setAll(g),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),d===null?null:d.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(w=>w.field))}(r,e,n,a):function(u,f,d){return vh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):d}(r,e,n)}function m2(r,e){let n=null;for(const a of r.fieldTransforms){const o=e.data.field(a.field),u=cb(a.transform,o||null);u!=null&&(n===null&&(n=Nr.empty()),n.set(a.field,u))}return n||null}function KE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Ho(a,o,(u,f)=>h2(u,f))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Lu extends ff{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class qs extends ff{constructor(e,n,a,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function pb(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const a=r.data.field(n);e.set(n,a)}}),e}function QE(r,e,n){const a=new Map;Rt(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,d=e.data.field(u.field);a.set(u.field,c2(f,d,n[o]))}return a}function YE(r,e,n){const a=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);a.set(o.field,u2(u,f,e))}return a}class qp extends ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class p2 extends ff{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&d2(u,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=_u(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=_u(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=lb();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let d=this.applyToLocalView(f,u.mutatedFields);d=n.has(o.key)?null:d;const p=mb(f,d);p!==null&&a.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(et.min())}),a}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),dt())}isEqual(e){return this.batchId===e.batchId&&Ho(this.mutations,e.mutations,(n,a)=>KE(n,a))&&Ho(this.baseMutations,e.baseMutations,(n,a)=>KE(n,a))}}class Hp{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){Rt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=function(){return i2}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,a[f].version);return new Hp(e,n,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sn,vt;function v2(r){switch(r){case ce.OK:return Qe(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return Qe(15467,{code:r})}}function gb(r){if(r===void 0)return Xi("GRPC error has no .code"),ce.UNKNOWN;switch(r){case sn.OK:return ce.OK;case sn.CANCELLED:return ce.CANCELLED;case sn.UNKNOWN:return ce.UNKNOWN;case sn.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case sn.INTERNAL:return ce.INTERNAL;case sn.UNAVAILABLE:return ce.UNAVAILABLE;case sn.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case sn.NOT_FOUND:return ce.NOT_FOUND;case sn.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case sn.ABORTED:return ce.ABORTED;case sn.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case sn.DATA_LOSS:return ce.DATA_LOSS;default:return Qe(39323,{code:r})}}(vt=sn||(sn={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new za([4294967295,4294967295],0);function XE(r){const e=E2().encode(r),n=new OT;return n.update(e),new Uint8Array(n.digest())}function WE(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new za([n,a],0),new za([o,u],0)]}class Fp{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new fu(`Invalid padding: ${n}`);if(a<0)throw new fu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new fu(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new fu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=za.fromNumber(this.ge)}ye(e,n,a){let o=e.add(n.multiply(za.fromNumber(a)));return o.compare(T2)===1&&(o=new za([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=XE(e),[a,o]=WE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(a,o,u);if(!this.we(f))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Fp(u,o,n);return a.forEach(d=>f.insert(d)),f}insert(e){if(this.ge===0)return;const n=XE(e),[a,o]=WE(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(a,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n,a,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,ku.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new df(et.min(),o,new Ft(ft),Wi(),dt())}}class ku{constructor(e,n,a,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new ku(a,n,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n,a,o){this.be=e,this.removedTargetIds=n,this.key=a,this.De=o}}class yb{constructor(e,n){this.targetId=e,this.Ce=n}}class _b{constructor(e,n,a=Mn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class ZE{constructor(){this.ve=0,this.Fe=JE(),this.Me=Mn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dt(),n=dt(),a=dt();return this.Fe.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:Qe(38017,{changeType:u})}}),new ku(this.Me,this.xe,e,n,a)}qe(){this.Oe=!1,this.Fe=JE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Rt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class b2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Wi(),this.Je=uh(),this.He=uh(),this.Ye=new Ft(ft)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:Qe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((a,o)=>{this.rt(o)&&n(o)})}st(e){const n=e.targetId,a=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(ap(u))if(a===0){const f=new ke(u.path);this.et(n,f,Bn.newNoDocument(f,et.min()))}else Rt(a===1,20013,{expectedCount:a});else{const f=this._t(n);if(f!==a){const d=this.ut(e),p=d?this.ct(d,e,f):1;if(p!==0){this.it(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=n;let f,d;try{f=Ga(a).toUint8Array()}catch(p){if(p instanceof HT)return qo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Fp(f,o,u)}catch(p){return qo(p instanceof fu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let o=0;return a.forEach(u=>{const f=this.Ge.ht(),d=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(d)||(this.et(n,u,null),o++)}),o}Tt(e){const n=new Map;this.ze.forEach((u,f)=>{const d=this.ot(f);if(d){if(u.current&&ap(d.target)){const p=new ke(d.target.path);this.It(p).has(f)||this.Et(f,p)||this.et(f,p,Bn.newNoDocument(p,e))}u.Be&&(n.set(f,u.ke()),u.qe())}});let a=dt();this.He.forEach((u,f)=>{let d=!0;f.forEachWhile(p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(a=a.add(u))}),this.je.forEach((u,f)=>f.setReadTime(e));const o=new df(e,n,this.Ye,this.je,a);return this.je=Wi(),this.Je=uh(),this.He=uh(),this.Ye=new Ft(ft),o}Xe(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,a),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ZE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new gn(ft),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new gn(ft),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ZE),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function uh(){return new Ft(ke.comparator)}function JE(){return new Ft(ke.comparator)}const S2={asc:"ASCENDING",desc:"DESCENDING"},w2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},A2={and:"AND",or:"OR"};class R2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lp(r,e){return r.useProto3Json||sf(e)?e:{value:e}}function jh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function C2(r,e){return jh(r,e.toTimestamp())}function pi(r){return Rt(!!r,49232),et.fromTimestamp(function(n){const a=Fa(n);return new jt(a.seconds,a.nanos)}(r))}function Gp(r,e){return up(r,e).canonicalString()}function up(r,e){const n=function(o){return new Ut(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function Eb(r){const e=Ut.fromString(r);return Rt(Ab(e),10190,{key:e.toString()}),e}function cp(r,e){return Gp(r.databaseId,e.path)}function Lm(r,e){const n=Eb(e);if(n.get(1)!==r.databaseId.projectId)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new we(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ke(bb(n))}function Tb(r,e){return Gp(r.databaseId,e)}function I2(r){const e=Eb(r);return e.length===4?Ut.emptyPath():bb(e)}function hp(r){return new Ut(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function bb(r){return Rt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function e0(r,e,n){return{name:cp(r,e),fields:n.value.mapValue.fields}}function D2(r,e){let n;if("targetChange"in e){e.targetChange;const a=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Qe(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(g,_){return g.useProto3Json?(Rt(_===void 0||typeof _=="string",58123),Mn.fromBase64String(_||"")):(Rt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Mn.fromUint8Array(_||new Uint8Array))}(r,e.targetChange.resumeToken),f=e.targetChange.cause,d=f&&function(g){const _=g.code===void 0?ce.UNKNOWN:gb(g.code);return new we(_,g.message||"")}(f);n=new _b(a,o,u,d||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=Lm(r,a.document.name),u=pi(a.document.updateTime),f=a.document.createTime?pi(a.document.createTime):et.min(),d=new Nr({mapValue:{fields:a.document.fields}}),p=Bn.newFoundDocument(o,u,f,d),g=a.targetIds||[],_=a.removedTargetIds||[];n=new Eh(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=Lm(r,a.document),u=a.readTime?pi(a.readTime):et.min(),f=Bn.newNoDocument(o,u),d=a.removedTargetIds||[];n=new Eh([],d,f.key,f)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=Lm(r,a.document),u=a.removedTargetIds||[];n=new Eh([],u,o,null)}else{if(!("filter"in e))return Qe(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,f=new _2(o,u),d=a.targetId;n=new yb(d,f)}}return n}function N2(r,e){let n;if(e instanceof Lu)n={update:e0(r,e.key,e.value)};else if(e instanceof qp)n={delete:cp(r,e.key)};else if(e instanceof qs)n={update:e0(r,e.key,e.data),updateMask:z2(e.fieldMask)};else{if(!(e instanceof p2))return Qe(16599,{Vt:e.type});n={verify:cp(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(a=>function(u,f){const d=f.transform;if(d instanceof Uh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Cu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Iu)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof zh)return{fieldPath:f.field.canonicalString(),increment:d.Ae};throw Qe(20930,{transform:f.transform})}(0,a))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:C2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Qe(27497)}(r,e.precondition)),n}function O2(r,e){return r&&r.length>0?(Rt(e!==void 0,14353),r.map(n=>function(o,u){let f=o.updateTime?pi(o.updateTime):pi(u);return f.isEqual(et.min())&&(f=pi(u)),new f2(f,o.transformResults||[])}(n,e))):[]}function x2(r,e){return{documents:[Tb(r,e.path)]}}function M2(r,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=Tb(r,o);const u=function(g){if(g.length!==0)return wb(Gr.create(g,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(g){if(g.length!==0)return g.map(_=>function(S){return{field:Mo(S.field),direction:L2(S.dir)}}(_))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const d=lp(r,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ft:n,parent:o}}function V2(r){let e=I2(r.parent);const n=r.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){Rt(a===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=function(w){const S=Sb(w);return S instanceof Gr&&JT(S)?S.getFilters():[S]}(n.where));let f=[];n.orderBy&&(f=function(w){return w.map(S=>function(M){return new kh(Vo(M.field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(S))}(n.orderBy));let d=null;n.limit&&(d=function(w){let S;return S=typeof w=="object"?w.value:w,sf(S)?null:S}(n.limit));let p=null;n.startAt&&(p=function(w){const S=!!w.before,x=w.values||[];return new Lh(x,S)}(n.startAt));let g=null;return n.endAt&&(g=function(w){const S=!w.before,x=w.values||[];return new Lh(x,S)}(n.endAt)),JI(e,o,f,u,d,"F",p,g)}function P2(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qe(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Sb(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=Vo(n.unaryFilter.field);return on.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=Vo(n.unaryFilter.field);return on.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Vo(n.unaryFilter.field);return on.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Vo(n.unaryFilter.field);return on.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Qe(61313);default:return Qe(60726)}}(r):r.fieldFilter!==void 0?function(n){return on.create(Vo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Qe(58110);default:return Qe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return Gr.create(n.compositeFilter.filters.map(a=>Sb(a)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Qe(1026)}}(n.compositeFilter.op))}(r):Qe(30097,{filter:r})}function L2(r){return S2[r]}function k2(r){return w2[r]}function U2(r){return A2[r]}function Mo(r){return{fieldPath:r.canonicalString()}}function Vo(r){return xn.fromServerFormat(r.fieldPath)}function wb(r){return r instanceof on?function(n){if(n.op==="=="){if(BE(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NAN"}};if(jE(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BE(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NOT_NAN"}};if(jE(n.value))return{unaryFilter:{field:Mo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(n.field),op:k2(n.op),value:n.value}}}(r):r instanceof Gr?function(n){const a=n.getFilters().map(o=>wb(o));return a.length===1?a[0]:{compositeFilter:{op:U2(n.op),filters:a}}}(r):Qe(54877,{filter:r})}function z2(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ab(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n,a,o,u=et.min(),f=et.min(),d=Mn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Va(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.yt=e}}function B2(r){const e=V2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?op(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this.Cn=new H2}addToCollectionParentIndex(e,n){return this.Cn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(Ha.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(Ha.min())}updateCollectionGroup(e,n,a){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class H2{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new gn(Ut.comparator),u=!o.has(a);return this.index[n]=o.add(a),u}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new gn(Ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rb=41943040;class Jn{static withCacheSize(e){return new Jn(e,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jn.DEFAULT_COLLECTION_PERCENTILE=10,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jn.DEFAULT=new Jn(Rb,Jn.DEFAULT_COLLECTION_PERCENTILE,Jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jn.DISABLED=new Jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new $o(0)}static cr(){return new $o(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0="LruGarbageCollector",F2=1048576;function r0([r,e],[n,a]){const o=ft(r,n);return o===0?ft(e,a):o}class G2{constructor(e){this.Ir=e,this.buffer=new gn(r0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();r0(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class $2{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Re(n0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){el(n)?Re(n0,"Ignoring IndexedDB error during garbage collection: ",n):await Jo(n)}await this.Vr(3e5)})}}class K2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(a=>Math.floor(n/100*a))}nthSequenceNumber(e,n){if(n===0)return de.resolve(af.ce);const a=new G2(n);return this.mr.forEachTarget(e,o=>a.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>a.Ar(o))).next(()=>a.maxValue)}removeTargets(e,n,a){return this.mr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(t0)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),t0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let a,o,u,f,d,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,f=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(a=w,d=Date.now(),this.removeTargets(e,a,n))).next(w=>(u=w,p=Date.now(),this.removeOrphanedDocuments(e,a))).next(w=>(g=Date.now(),Oo()<=ht.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${o} in `+(d-f)+`ms
	Removed ${u} targets in `+(p-d)+`ms
	Removed ${w} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w})))}}function Q2(r,e){return new K2(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.changes=new Bs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?de.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(a=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(a!==null&&_u(a.mutation,o,Br.empty(),jt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(a=>this.getLocalViewOfDocuments(e,a,dt()).next(()=>a))}getLocalViewOfDocuments(e,n,a=dt()){const o=Is();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,a).next(u=>{let f=hu();return u.forEach((d,p)=>{f=f.insert(d,p.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const a=Is();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,dt()))}populateOverlays(e,n,a){const o=[];return a.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,d)=>{n.set(f,d)})})}computeViews(e,n,a,o){let u=Wi();const f=yu(),d=function(){return yu()}();return n.forEach((p,g)=>{const _=a.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof qs)?u=u.insert(g.key,g):_!==void 0?(f.set(g.key,_.mutation.getFieldMask()),_u(_.mutation,g,_.mutation.getFieldMask(),jt.now())):f.set(g.key,Br.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((g,_)=>f.set(g,_)),n.forEach((g,_)=>d.set(g,new X2(_,f.get(g)??null))),d))}recalculateAndSaveOverlays(e,n){const a=yu();let o=new Ft((f,d)=>f-d),u=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const d of f)d.keys().forEach(p=>{const g=n.get(p);if(g===null)return;let _=a.get(p)||Br.empty();_=d.applyToLocalView(g,_),a.set(p,_);const w=(o.get(d.batchId)||dt()).add(p);o=o.insert(d.batchId,w)})}).next(()=>{const f=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,_=p.value,w=lb();_.forEach(S=>{if(!u.has(S)){const x=mb(n.get(S),a.get(S));x!==null&&w.set(S,x),u=u.add(S)}}),f.push(this.documentOverlayCache.saveOverlays(e,g,w))}return de.waitFor(f)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,n,a,o){return function(f){return ke.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):rb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-u.size):de.resolve(Is());let d=Su,p=u;return f.next(g=>de.forEach(g,(_,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),u.get(_)?de.resolve():this.remoteDocumentCache.getEntry(e,_).next(S=>{p=p.insert(_,S)}))).next(()=>this.populateOverlays(e,g,u)).next(()=>this.computeViews(e,p,g,dt())).next(_=>({batchId:d,changes:ob(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ke(n)).next(a=>{let o=hu();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const u=n.collectionGroup;let f=hu();return this.indexManager.getCollectionParents(e,u).next(d=>de.forEach(d,p=>{const g=function(w,S){return new Pu(S,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,a,o).next(_=>{_.forEach((w,S)=>{f=f.insert(w,S)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,u,o))).next(f=>{u.forEach((p,g)=>{const _=g.getKey();f.get(_)===null&&(f=f.insert(_,Bn.newInvalidDocument(_)))});let d=hu();return f.forEach((p,g)=>{const _=u.get(p);_!==void 0&&_u(_.mutation,g,Br.empty(),jt.now()),cf(n,g)&&(d=d.insert(p,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return de.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:pi(o.createTime)}}(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(o){return{name:o.name,query:B2(o.bundledQuery),readTime:pi(o.readTime)}}(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.overlays=new Ft(ke.comparator),this.qr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const a=Is();return de.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&a.set(o,u)})).next(()=>a)}saveOverlays(e,n,a){return a.forEach((o,u)=>{this.St(e,n,u)}),de.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.qr.delete(a)),de.resolve()}getOverlaysForCollection(e,n,a){const o=Is(),u=n.length+1,f=new ke(n.child("")),d=this.overlays.getIteratorFrom(f);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>a&&o.set(p.getKey(),p)}return de.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let u=new Ft((g,_)=>g-_);const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>a){let _=u.get(g.largestBatchId);_===null&&(_=Is(),u=u.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=Is(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,_)=>d.set(g,_)),!(d.size()>=o)););return de.resolve(d)}St(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(a.key,new y2(n,a));let u=this.qr.get(n);u===void 0&&(u=dt(),this.qr.set(n,u)),this.qr.set(n,u.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(){this.sessionToken=Mn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.Qr=new gn(Sn.$r),this.Ur=new gn(Sn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const a=new Sn(e,n);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,n){e.forEach(a=>this.addReference(a,n))}removeReference(e,n){this.Gr(new Sn(e,n))}zr(e,n){e.forEach(a=>this.removeReference(a,n))}jr(e){const n=new ke(new Ut([])),a=new Sn(n,e),o=new Sn(n,e+1),u=[];return this.Ur.forEachInRange([a,o],f=>{this.Gr(f),u.push(f.key)}),u}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ke(new Ut([])),a=new Sn(n,e),o=new Sn(n,e+1);let u=dt();return this.Ur.forEachInRange([a,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new Sn(e,0),a=this.Qr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class Sn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ke.comparator(e.key,n.key)||ft(e.Yr,n.Yr)}static Kr(e,n){return ft(e.Yr,n.Yr)||ke.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new gn(Sn.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new g2(u,n,a,o);this.mutationQueue.push(f);for(const d of o)this.Zr=this.Zr.add(new Sn(d.key,u)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return de.resolve(f)}lookupMutationBatch(e,n){return de.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.ei(a),u=o<0?0:o;return de.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?Lp:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new Sn(n,0),o=new Sn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([a,o],f=>{const d=this.Xr(f.Yr);u.push(d)}),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new gn(ft);return n.forEach(o=>{const u=new Sn(o,0),f=new Sn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],d=>{a=a.add(d.Yr)})}),de.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let u=a;ke.isDocumentKey(u)||(u=u.child(""));const f=new Sn(new ke(u),0);let d=new gn(ft);return this.Zr.forEachWhile(p=>{const g=p.key.path;return!!a.isPrefixOf(g)&&(g.length===o&&(d=d.add(p.Yr)),!0)},f),de.resolve(this.ti(d))}ti(e){const n=[];return e.forEach(a=>{const o=this.Xr(a);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Rt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return de.forEach(n.mutations,o=>{const u=new Sn(o.key,n.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=a})}ir(e){}containsKey(e,n){const a=new Sn(n,0),o=this.Zr.firstAfterOrEqual(a);return de.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.ri=e,this.docs=function(){return new Ft(ke.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return de.resolve(a?a.document.mutableCopy():Bn.newInvalidDocument(n))}getEntries(e,n){let a=Wi();return n.forEach(o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():Bn.newInvalidDocument(o))}),de.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let u=Wi();const f=n.path,d=new ke(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||OI(NI(_),a)<=0||(o.has(_.key)||cf(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return de.resolve(u)}getAllFromCollectionGroup(e,n,a,o){Qe(9500)}ii(e,n){return de.forEach(this.docs,a=>n(a))}newChangeBuffer(e){return new rD(this)}getSize(e){return de.resolve(this.size)}}class rD extends Y2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((a,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)}),de.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.persistence=e,this.si=new Bs(n=>zp(n),jp),this.lastRemoteSnapshotVersion=et.min(),this.highestTargetId=0,this.oi=0,this._i=new $p,this.targetCount=0,this.ai=$o.ur()}forEachTarget(e,n){return this.si.forEach((a,o)=>n(o)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.oi&&(this.oi=n),de.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new $o(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.Pr(n),de.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,a){let o=0;const u=[];return this.si.forEach((f,d)=>{d.sequenceNumber<=n&&a.get(d.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),de.waitFor(u).next(()=>o)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const a=this.si.get(n)||null;return de.resolve(a)}addMatchingKeys(e,n,a){return this._i.Wr(n,a),de.resolve()}removeMatchingKeys(e,n,a){this._i.zr(n,a);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),de.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const a=this._i.Hr(n);return de.resolve(a)}containsKey(e,n){return de.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,n){this.ui={},this.overlays={},this.ci=new af(0),this.li=!1,this.li=!0,this.hi=new eD,this.referenceDelegate=e(this),this.Pi=new iD(this),this.indexManager=new q2,this.remoteDocumentCache=function(o){return new nD(o)}(a=>this.referenceDelegate.Ti(a)),this.serializer=new j2(n),this.Ii=new Z2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new J2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this.ui[e.toKey()];return a||(a=new tD(n,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,a){Re("MemoryPersistence","Starting transaction:",e);const o=new aD(this.ci.next());return this.referenceDelegate.Ei(),a(o).next(u=>this.referenceDelegate.di(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ai(e,n){return de.or(Object.values(this.ui).map(a=>()=>a.containsKey(e,n)))}}class aD extends MI{constructor(e){super(),this.currentSequenceNumber=e}}class Kp{constructor(e){this.persistence=e,this.Ri=new $p,this.Vi=null}static mi(e){return new Kp(e)}get fi(){if(this.Vi)return this.Vi;throw Qe(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.fi.delete(a.toString()),de.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.fi.add(a.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(o=>this.fi.add(o.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.fi.add(u.toString()))}).next(()=>a.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,a=>{const o=ke.fromPath(a);return this.gi(e,o).next(u=>{u||n.removeEntry(o,et.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(a=>{a?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return de.or([()=>de.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Bh{constructor(e,n){this.persistence=e,this.pi=new Bs(a=>LI(a.path),(a,o)=>a.isEqual(o)),this.garbageCollector=Q2(this,n)}static mi(e,n){return new Bh(e,n)}Ei(){}di(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>n.next(o=>a+o))}wr(e){let n=0;return this.pr(e,a=>{n++}).next(()=>n)}pr(e,n){return de.forEach(this.pi,(a,o)=>this.br(e,a,o).next(u=>u?de.resolve():n(o)))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,f=>this.br(e,f,n).next(d=>{d||(a++,u.removeEntry(f,et.min()))})).next(()=>u.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),de.resolve()}removeReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),de.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yh(e.data.value)),n}br(e,n,a){return de.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return de.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Es=a,this.ds=o}static As(e,n){let a=dt(),o=dt();for(const u of n.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Qp(e,n.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return eC()?8:VI(qn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,o){const u={result:null};return this.ys(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ws(e,n,o,a).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new sD;return this.Ss(e,n,f).next(d=>{if(u.result=d,this.Vs)return this.bs(e,n,f,d.size)})}).next(()=>u.result)}bs(e,n,a,o){return a.documentReadCount<this.fs?(Oo()<=ht.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",xo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(Oo()<=ht.DEBUG&&Re("QueryEngine","Query:",xo(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(Oo()<=ht.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",xo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mi(n))):de.resolve())}ys(e,n){if(GE(n))return de.resolve(null);let a=mi(n);return this.indexManager.getIndexType(e,a).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=op(n,null,"F"),a=mi(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next(u=>{const f=dt(...u);return this.ps.getDocuments(e,f).next(d=>this.indexManager.getMinOffset(e,a).next(p=>{const g=this.Ds(n,d);return this.Cs(n,g,f,p.readTime)?this.ys(e,op(n,null,"F")):this.vs(e,g,n,p)}))})))}ws(e,n,a,o){return GE(n)||o.isEqual(et.min())?de.resolve(null):this.ps.getDocuments(e,a).next(u=>{const f=this.Ds(n,u);return this.Cs(n,f,a,o)?de.resolve(null):(Oo()<=ht.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),xo(n)),this.vs(e,f,n,DI(o,Su)).next(d=>d))})}Ds(e,n){let a=new gn(ab(e));return n.forEach((o,u)=>{cf(e,u)&&(a=a.add(u))}),a}Cs(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,a){return Oo()<=ht.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",xo(n)),this.ps.getDocumentsMatchingQuery(e,n,Ha.min(),a)}vs(e,n,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp="LocalStore",lD=3e8;class uD{constructor(e,n,a,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Ft(ft),this.xs=new Bs(u=>zp(u),jp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new W2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function cD(r,e,n,a){return new uD(r,e,n,a)}async function Ib(r,e){const n=tt(r);return await n.persistence.runTransaction("Handle user change","readonly",a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next(u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(a))).next(u=>{const f=[],d=[];let p=dt();for(const g of o){f.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of u){d.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return n.localDocuments.getDocuments(a,p).next(g=>({Ls:g,removedBatchIds:f,addedBatchIds:d}))})})}function hD(r,e){const n=tt(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return function(d,p,g,_){const w=g.batch,S=w.keys();let x=de.resolve();return S.forEach(M=>{x=x.next(()=>_.getEntry(p,M)).next(Q=>{const H=g.docVersions.get(M);Rt(H!==null,48541),Q.version.compareTo(H)<0&&(w.applyToRemoteDocument(Q,g),Q.isValidDocument()&&(Q.setReadTime(g.commitVersion),_.addEntry(Q)))})}),x.next(()=>d.mutationQueue.removeMutationBatch(p,w))}(n,a,e,u).next(()=>u.apply(a)).next(()=>n.mutationQueue.performConsistencyCheck(a)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(d){let p=dt();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p}(e))).next(()=>n.localDocuments.getDocuments(a,o))})}function Db(r){const e=tt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function fD(r,e){const n=tt(r),a=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const d=[];e.targetChanges.forEach((_,w)=>{const S=o.get(w);if(!S)return;d.push(n.Pi.removeMatchingKeys(u,_.removedDocuments,w).next(()=>n.Pi.addMatchingKeys(u,_.addedDocuments,w)));let x=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?x=x.withResumeToken(Mn.EMPTY_BYTE_STRING,et.min()).withLastLimboFreeSnapshotVersion(et.min()):_.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(_.resumeToken,a)),o=o.insert(w,x),function(Q,H,q){return Q.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=lD?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(S,x,_)&&d.push(n.Pi.updateTargetData(u,x))});let p=Wi(),g=dt();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))}),d.push(dD(u,f,e.documentUpdates).next(_=>{p=_.ks,g=_.qs})),!a.isEqual(et.min())){const _=n.Pi.getLastRemoteSnapshotVersion(u).next(w=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,a));d.push(_)}return de.waitFor(d).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,g)).next(()=>p)}).then(u=>(n.Ms=o,u))}function dD(r,e,n){let a=dt(),o=dt();return n.forEach(u=>a=a.add(u)),e.getEntries(r,a).next(u=>{let f=Wi();return n.forEach((d,p)=>{const g=u.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(et.min())?(e.removeEntry(d,p.readTime),f=f.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),f=f.insert(d,p)):Re(Yp,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)}),{ks:f,qs:o}})}function mD(r,e){const n=tt(r);return n.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=Lp),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function pD(r,e){const n=tt(r);return n.persistence.runTransaction("Allocate target","readwrite",a=>{let o;return n.Pi.getTargetData(a,e).next(u=>u?(o=u,de.resolve(o)):n.Pi.allocateTargetId(a).next(f=>(o=new Va(e,f,"TargetPurposeListen",a.currentSequenceNumber),n.Pi.addTargetData(a,o).next(()=>o))))}).then(a=>{const o=n.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(a.targetId,a),n.xs.set(e,a.targetId)),a})}async function fp(r,e,n){const a=tt(r),o=a.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",u,f=>a.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!el(f))throw f;Re(Yp,`Failed to update sequence numbers for target ${e}: ${f}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function i0(r,e,n){const a=tt(r);let o=et.min(),u=dt();return a.persistence.runTransaction("Execute query","readwrite",f=>function(p,g,_){const w=tt(p),S=w.xs.get(_);return S!==void 0?de.resolve(w.Ms.get(S)):w.Pi.getTargetData(g,_)}(a,f,mi(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(f,d.targetId).next(p=>{u=p})}).next(()=>a.Fs.getDocumentsMatchingQuery(f,e,n?o:et.min(),n?u:dt())).next(d=>(gD(a,t2(e),d),{documents:d,Qs:u})))}function gD(r,e,n){let a=r.Os.get(e)||et.min();n.forEach((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)}),r.Os.set(e,a)}class a0{constructor(){this.activeTargetIds=o2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yD{constructor(){this.Mo=new a0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,a){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new a0,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="ConnectivityMonitor";class o0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Re(s0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Re(s0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch=null;function dp(){return ch===null?ch=function(){return 268435456+Math.round(2147483648*Math.random())}():ch++,"0x"+ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="RestConnection",vD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ED{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===Vh?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,n,a,o,u){const f=dp(),d=this.zo(e,n.toUriEncodedString());Re(km,`Sending RPC '${e}' ${f}:`,d,a);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:g}=new URL(d),_=Xo(g);return this.Jo(e,d,p,a,_).then(w=>(Re(km,`Received RPC '${e}' ${f}: `,w),w),w=>{throw qo(km,`RPC '${e}' ${f} failed with error: `,w,"url: ",d,"request:",a),w})}Ho(e,n,a,o,u,f){return this.Go(e,n,a,o,u)}jo(e,n,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),a&&a.headers.forEach((o,u)=>e[u]=o)}zo(e,n){const a=vD[e];return`${this.Uo}/v1/${n}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn="WebChannelConnection";class bD extends ED{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,a,o,u){const f=dp();return new Promise((d,p)=>{const g=new xT;g.setWithCredentials(!0),g.listenOnce(MT.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case gh.NO_ERROR:const w=g.getResponseJson();Re(zn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(w)),d(w);break;case gh.TIMEOUT:Re(zn,`RPC '${e}' ${f} timed out`),p(new we(ce.DEADLINE_EXCEEDED,"Request time out"));break;case gh.HTTP_ERROR:const S=g.getStatus();if(Re(zn,`RPC '${e}' ${f} failed with status:`,S,"response text:",g.getResponseText()),S>0){let x=g.getResponseJson();Array.isArray(x)&&(x=x[0]);const M=x?.error;if(M&&M.status&&M.message){const Q=function(q){const ae=q.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(ae)>=0?ae:ce.UNKNOWN}(M.status);p(new we(Q,M.message))}else p(new we(ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new we(ce.UNAVAILABLE,"Connection failed."));break;default:Qe(9055,{l_:e,streamId:f,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Re(zn,`RPC '${e}' ${f} completed.`)}});const _=JSON.stringify(o);Re(zn,`RPC '${e}' ${f} sending request:`,o),g.send(n,"POST",_,a,15)})}T_(e,n,a){const o=dp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=LT(),d=PT(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,a),p.encodeInitMessageHeaders=!0;const _=u.join("");Re(zn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const w=f.createWebChannel(_,p);this.I_(w);let S=!1,x=!1;const M=new TD({Yo:H=>{x?Re(zn,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(S||(Re(zn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),S=!0),Re(zn,`RPC '${e}' stream ${o} sending:`,H),w.send(H))},Zo:()=>w.close()}),Q=(H,q,ae)=>{H.listen(q,ne=>{try{ae(ne)}catch(_e){setTimeout(()=>{throw _e},0)}})};return Q(w,cu.EventType.OPEN,()=>{x||(Re(zn,`RPC '${e}' stream ${o} transport opened.`),M.o_())}),Q(w,cu.EventType.CLOSE,()=>{x||(x=!0,Re(zn,`RPC '${e}' stream ${o} transport closed`),M.a_(),this.E_(w))}),Q(w,cu.EventType.ERROR,H=>{x||(x=!0,qo(zn,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),M.a_(new we(ce.UNAVAILABLE,"The operation could not be completed")))}),Q(w,cu.EventType.MESSAGE,H=>{if(!x){const q=H.data[0];Rt(!!q,16349);const ae=q,ne=ae?.error||ae[0]?.error;if(ne){Re(zn,`RPC '${e}' stream ${o} received error:`,ne);const _e=ne.status;let oe=function(E){const b=sn[E];if(b!==void 0)return gb(b)}(_e),k=ne.message;oe===void 0&&(oe=ce.INTERNAL,k="Unknown error status: "+_e+" with message "+ne.message),x=!0,M.a_(new we(oe,k)),w.close()}else Re(zn,`RPC '${e}' stream ${o} received:`,q),M.u_(q)}}),Q(d,VT.STAT_EVENT,H=>{H.stat===ep.PROXY?Re(zn,`RPC '${e}' stream ${o} detected buffering proxy`):H.stat===ep.NOPROXY&&Re(zn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{M.__()},0),M}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Um(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(r){return new R2(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n,a=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=a,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="PersistentStream";class Ob{constructor(e,n,a,o,u,f,d,p){this.Mi=e,this.S_=a,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Nb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(Xi(n.toString()),Xi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,o])=>{this.D_===n&&this.G_(a,o)},a=>{e(()=>{const o=new we(ce.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)})})}G_(e,n){const a=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{a(()=>this.listener.Xo())}),this.stream.t_(()=>{a(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{a(()=>this.z_(o))}),this.stream.onMessage(o=>{a(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Re(l0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Re(l0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SD extends Ob{constructor(e,n,a,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=D2(this.serializer,e),a=function(u){if(!("targetChange"in u))return et.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?et.min():f.readTime?pi(f.readTime):et.min()}(e);return this.listener.H_(n,a)}Y_(e){const n={};n.database=hp(this.serializer),n.addTarget=function(u,f){let d;const p=f.target;if(d=ap(p)?{documents:x2(u,p)}:{query:M2(u,p).ft},d.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){d.resumeToken=vb(u,f.resumeToken);const g=lp(u,f.expectedCount);g!==null&&(d.expectedCount=g)}else if(f.snapshotVersion.compareTo(et.min())>0){d.readTime=jh(u,f.snapshotVersion.toTimestamp());const g=lp(u,f.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,e);const a=P2(this.serializer,e);a&&(n.labels=a),this.q_(n)}Z_(e){const n={};n.database=hp(this.serializer),n.removeTarget=e,this.q_(n)}}class wD extends Ob{constructor(e,n,a,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Rt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Rt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Rt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=O2(e.writeResults,e.commitTime),a=pi(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=hp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(a=>N2(this.serializer,a))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{}class RD extends AD{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Go(e,up(n,a),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new we(ce.UNKNOWN,u.toString())})}Ho(e,n,a,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,d])=>this.connection.Ho(e,up(n,a),o,f,d,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new we(ce.UNKNOWN,f.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class CD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xi(n),this.aa=!1):Re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="RemoteStore";class ID{constructor(e,n,a,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo(f=>{a.enqueueAndForget(async()=>{Hs(this)&&(Re(Ps,"Restarting streams for network reachability change."),await async function(p){const g=tt(p);g.Ea.add(4),await Uu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await pf(g)}(this))})}),this.Ra=new CD(a,o)}}async function pf(r){if(Hs(r))for(const e of r.da)await e(!0)}async function Uu(r){for(const e of r.da)await e(!1)}function xb(r,e){const n=tt(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Jp(n)?Zp(n):tl(n).O_()&&Wp(n,e))}function Xp(r,e){const n=tt(r),a=tl(n);n.Ia.delete(e),a.O_()&&Mb(n,e),n.Ia.size===0&&(a.O_()?a.L_():Hs(n)&&n.Ra.set("Unknown"))}function Wp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(et.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}tl(r).Y_(e)}function Mb(r,e){r.Va.Ue(e),tl(r).Z_(e)}function Zp(r){r.Va=new b2({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),tl(r).start(),r.Ra.ua()}function Jp(r){return Hs(r)&&!tl(r).x_()&&r.Ia.size>0}function Hs(r){return tt(r).Ea.size===0}function Vb(r){r.Va=void 0}async function DD(r){r.Ra.set("Online")}async function ND(r){r.Ia.forEach((e,n)=>{Wp(r,e)})}async function OD(r,e){Vb(r),Jp(r)?(r.Ra.ha(e),Zp(r)):r.Ra.set("Unknown")}async function xD(r,e,n){if(r.Ra.set("Online"),e instanceof _b&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const d of u.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,f),o.Ia.delete(d),o.Va.removeTarget(d))}(r,e)}catch(a){Re(Ps,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await qh(r,a)}else if(e instanceof Eh?r.Va.Ze(e):e instanceof yb?r.Va.st(e):r.Va.tt(e),!n.isEqual(et.min()))try{const a=await Db(r.localStore);n.compareTo(a)>=0&&await function(u,f){const d=u.Va.Tt(f);return d.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=u.Ia.get(g);_&&u.Ia.set(g,_.withResumeToken(p.resumeToken,f))}}),d.targetMismatches.forEach((p,g)=>{const _=u.Ia.get(p);if(!_)return;u.Ia.set(p,_.withResumeToken(Mn.EMPTY_BYTE_STRING,_.snapshotVersion)),Mb(u,p);const w=new Va(_.target,p,g,_.sequenceNumber);Wp(u,w)}),u.remoteSyncer.applyRemoteEvent(d)}(r,n)}catch(a){Re(Ps,"Failed to raise snapshot:",a),await qh(r,a)}}async function qh(r,e,n){if(!el(e))throw e;r.Ea.add(1),await Uu(r),r.Ra.set("Offline"),n||(n=()=>Db(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Re(Ps,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await pf(r)})}function Pb(r,e){return e().catch(n=>qh(r,n,e))}async function gf(r){const e=tt(r),n=Ka(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Lp;for(;MD(e);)try{const o=await mD(e.localStore,a);if(o===null){e.Ta.length===0&&n.L_();break}a=o.batchId,VD(e,o)}catch(o){await qh(e,o)}Lb(e)&&kb(e)}function MD(r){return Hs(r)&&r.Ta.length<10}function VD(r,e){r.Ta.push(e);const n=Ka(r);n.O_()&&n.X_&&n.ea(e.mutations)}function Lb(r){return Hs(r)&&!Ka(r).x_()&&r.Ta.length>0}function kb(r){Ka(r).start()}async function PD(r){Ka(r).ra()}async function LD(r){const e=Ka(r);for(const n of r.Ta)e.ea(n.mutations)}async function kD(r,e,n){const a=r.Ta.shift(),o=Hp.from(a,e,n);await Pb(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await gf(r)}async function UD(r,e){e&&Ka(r).X_&&await async function(a,o){if(function(f){return v2(f)&&f!==ce.ABORTED}(o.code)){const u=a.Ta.shift();Ka(a).B_(),await Pb(a,()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o)),await gf(a)}}(r,e),Lb(r)&&kb(r)}async function u0(r,e){const n=tt(r);n.asyncQueue.verifyOperationInProgress(),Re(Ps,"RemoteStore received new credentials");const a=Hs(n);n.Ea.add(3),await Uu(n),a&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await pf(n)}async function zD(r,e){const n=tt(r);e?(n.Ea.delete(2),await pf(n)):e||(n.Ea.add(2),await Uu(n),n.Ra.set("Unknown"))}function tl(r){return r.ma||(r.ma=function(n,a,o){const u=tt(n);return u.sa(),new SD(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Xo:DD.bind(null,r),t_:ND.bind(null,r),r_:OD.bind(null,r),H_:xD.bind(null,r)}),r.da.push(async e=>{e?(r.ma.B_(),Jp(r)?Zp(r):r.Ra.set("Unknown")):(await r.ma.stop(),Vb(r))})),r.ma}function Ka(r){return r.fa||(r.fa=function(n,a,o){const u=tt(n);return u.sa(),new wD(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:PD.bind(null,r),r_:UD.bind(null,r),ta:LD.bind(null,r),na:kD.bind(null,r)}),r.da.push(async e=>{e?(r.fa.B_(),await gf(r)):(await r.fa.stop(),r.Ta.length>0&&(Re(Ps,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n,a,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new ja,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,u){const f=Date.now()+a,d=new eg(e,n,f,o,u);return d.start(a),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tg(r,e){if(Xi("AsyncQueue",`${e}: ${r}`),el(r))return new we(ce.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{static emptySet(e){return new Lo(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||ke.comparator(n.key,a.key):(n,a)=>ke.comparator(n.key,a.key),this.keyedMap=hu(),this.sortedSet=new Ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,a)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Lo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new Lo;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.ga=new Ft(ke.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Qe(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,a)=>{e.push(a)}),e}}class Ko{constructor(e,n,a,o,u,f,d,p,g){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,a,o,u){const f=[];return n.forEach(d=>{f.push({type:0,doc:d})}),new Ko(e,n,Lo.emptySet(n),f,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class BD{constructor(){this.queries=h0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const o=tt(n),u=o.queries;o.queries=h0(),u.forEach((f,d)=>{for(const p of d.Sa)p.onError(a)})})(this,new we(ce.ABORTED,"Firestore shutting down"))}}function h0(){return new Bs(r=>ib(r),uf)}async function Ub(r,e){const n=tt(r);let a=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(a=2):(u=new jD,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const d=tg(f,`Initialization of query '${xo(e.query)}' failed`);return void e.onError(d)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&ng(n)}async function zb(r,e){const n=tt(r),a=e.query;let o=3;const u=n.queries.get(a);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function qD(r,e){const n=tt(r);let a=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const d of f.Sa)d.Fa(o)&&(a=!0);f.wa=o}}a&&ng(n)}function HD(r,e,n){const a=tt(r),o=a.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);a.queries.delete(e)}function ng(r){r.Ca.forEach(e=>{e.next()})}var mp,f0;(f0=mp||(mp={})).Ma="default",f0.Cache="cache";class jb{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Ko(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==mp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e){this.key=e}}class qb{constructor(e){this.key=e}}class FD{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=dt(),this.mutatedKeys=dt(),this.eu=ab(e),this.tu=new Lo(this.eu)}get nu(){return this.Ya}ru(e,n){const a=n?n.iu:new c0,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,w)=>{const S=o.get(_),x=cf(this.query,w)?w:null,M=!!S&&this.mutatedKeys.has(S.key),Q=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let H=!1;S&&x?S.data.isEqual(x.data)?M!==Q&&(a.track({type:3,doc:x}),H=!0):this.su(S,x)||(a.track({type:2,doc:x}),H=!0,(p&&this.eu(x,p)>0||g&&this.eu(x,g)<0)&&(d=!0)):!S&&x?(a.track({type:0,doc:x}),H=!0):S&&!x&&(a.track({type:1,doc:S}),H=!0,(p||g)&&(d=!0)),H&&(x?(f=f.add(x),u=Q?u.add(_):u.delete(_)):(f=f.delete(_),u=u.delete(_)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),u=u.delete(_.key),a.track({type:1,doc:_})}return{tu:f,iu:a,Cs:d,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort((_,w)=>function(x,M){const Q=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe(20277,{Rt:H})}};return Q(x)-Q(M)}(_.type,w.type)||this.eu(_.doc,w.doc)),this.ou(a),o=o??!1;const d=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,f.length!==0||g?{snapshot:new Ko(this.query,e.tu,u,f,e.mutatedKeys,p===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new c0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=dt(),this.tu.forEach(a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))});const n=[];return e.forEach(a=>{this.Xa.has(a)||n.push(new qb(a))}),this.Xa.forEach(a=>{e.has(a)||n.push(new Bb(a))}),n}cu(e){this.Ya=e.Qs,this.Xa=dt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ko.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const rg="SyncEngine";class GD{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class $D{constructor(e){this.key=e,this.hu=!1}}class KD{constructor(e,n,a,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Bs(d=>ib(d),uf),this.Iu=new Map,this.Eu=new Set,this.du=new Ft(ke.comparator),this.Au=new Map,this.Ru=new $p,this.Vu={},this.mu=new Map,this.fu=$o.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function QD(r,e,n=!0){const a=Qb(r);let o;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await Hb(a,e,n,!0),o}async function YD(r,e){const n=Qb(r);await Hb(n,e,!0,!1)}async function Hb(r,e,n,a){const o=await pD(r.localStore,mi(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let d;return a&&(d=await XD(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&xb(r.remoteStore,o),d}async function XD(r,e,n,a,o){r.pu=(w,S,x)=>async function(Q,H,q,ae){let ne=H.view.ru(q);ne.Cs&&(ne=await i0(Q.localStore,H.query,!1).then(({documents:N})=>H.view.ru(N,ne)));const _e=ae&&ae.targetChanges.get(H.targetId),oe=ae&&ae.targetMismatches.get(H.targetId)!=null,k=H.view.applyChanges(ne,Q.isPrimaryClient,_e,oe);return m0(Q,H.targetId,k.au),k.snapshot}(r,w,S,x);const u=await i0(r.localStore,e,!0),f=new FD(e,u.Qs),d=f.ru(u.documents),p=ku.createSynthesizedTargetChangeForCurrentChange(n,a&&r.onlineState!=="Offline",o),g=f.applyChanges(d,r.isPrimaryClient,p);m0(r,n,g.au);const _=new GD(e,n,f);return r.Tu.set(e,_),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),g.snapshot}async function WD(r,e,n){const a=tt(r),o=a.Tu.get(e),u=a.Iu.get(o.targetId);if(u.length>1)return a.Iu.set(o.targetId,u.filter(f=>!uf(f,e))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await fp(a.localStore,o.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(o.targetId),n&&Xp(a.remoteStore,o.targetId),pp(a,o.targetId)}).catch(Jo)):(pp(a,o.targetId),await fp(a.localStore,o.targetId,!0))}async function ZD(r,e){const n=tt(r),a=n.Tu.get(e),o=n.Iu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),Xp(n.remoteStore,a.targetId))}async function JD(r,e,n){const a=sN(r);try{const o=await function(f,d){const p=tt(f),g=jt.now(),_=d.reduce((x,M)=>x.add(M.key),dt());let w,S;return p.persistence.runTransaction("Locally write mutations","readwrite",x=>{let M=Wi(),Q=dt();return p.Ns.getEntries(x,_).next(H=>{M=H,M.forEach((q,ae)=>{ae.isValidDocument()||(Q=Q.add(q))})}).next(()=>p.localDocuments.getOverlayedDocuments(x,M)).next(H=>{w=H;const q=[];for(const ae of d){const ne=m2(ae,w.get(ae.key).overlayedDocument);ne!=null&&q.push(new qs(ae.key,ne,XT(ne.value.mapValue),Hr.exists(!0)))}return p.mutationQueue.addMutationBatch(x,g,q,d)}).next(H=>{S=H;const q=H.applyToLocalDocumentSet(w,Q);return p.documentOverlayCache.saveOverlays(x,H.batchId,q)})}).then(()=>({batchId:S.batchId,changes:ob(w)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),function(f,d,p){let g=f.Vu[f.currentUser.toKey()];g||(g=new Ft(ft)),g=g.insert(d,p),f.Vu[f.currentUser.toKey()]=g}(a,o.batchId,n),await zu(a,o.changes),await gf(a.remoteStore)}catch(o){const u=tg(o,"Failed to persist write");n.reject(u)}}async function Fb(r,e){const n=tt(r);try{const a=await fD(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Au.get(u);f&&(Rt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Rt(f.hu,14607):o.removedDocuments.size>0&&(Rt(f.hu,42227),f.hu=!1))}),await zu(n,a,e)}catch(a){await Jo(a)}}function d0(r,e,n){const a=tt(r);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Tu.forEach((u,f)=>{const d=f.view.va(e);d.snapshot&&o.push(d.snapshot)}),function(f,d){const p=tt(f);p.onlineState=d;let g=!1;p.queries.forEach((_,w)=>{for(const S of w.Sa)S.va(d)&&(g=!0)}),g&&ng(p)}(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function eN(r,e,n){const a=tt(r);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Au.get(e),u=o&&o.key;if(u){let f=new Ft(ke.comparator);f=f.insert(u,Bn.newNoDocument(u,et.min()));const d=dt().add(u),p=new df(et.min(),new Map,new Ft(ft),f,d);await Fb(a,p),a.du=a.du.remove(u),a.Au.delete(e),ig(a)}else await fp(a.localStore,e,!1).then(()=>pp(a,e,n)).catch(Jo)}async function tN(r,e){const n=tt(r),a=e.batch.batchId;try{const o=await hD(n.localStore,e);$b(n,a,null),Gb(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await zu(n,o)}catch(o){await Jo(o)}}async function nN(r,e,n){const a=tt(r);try{const o=await function(f,d){const p=tt(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return p.mutationQueue.lookupMutationBatch(g,d).next(w=>(Rt(w!==null,37113),_=w.keys(),p.mutationQueue.removeMutationBatch(g,w))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>p.localDocuments.getDocuments(g,_))})}(a.localStore,e);$b(a,e,n),Gb(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await zu(a,o)}catch(o){await Jo(o)}}function Gb(r,e){(r.mu.get(e)||[]).forEach(n=>{n.resolve()}),r.mu.delete(e)}function $b(r,e,n){const a=tt(r);let o=a.Vu[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function pp(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.Iu.get(e))r.Tu.delete(a),n&&r.Pu.yu(a,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach(a=>{r.Ru.containsKey(a)||Kb(r,a)})}function Kb(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(Xp(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),ig(r))}function m0(r,e,n){for(const a of n)a instanceof Bb?(r.Ru.addReference(a.key,e),rN(r,a)):a instanceof qb?(Re(rg,"Document no longer in limbo: "+a.key),r.Ru.removeReference(a.key,e),r.Ru.containsKey(a.key)||Kb(r,a.key)):Qe(19791,{wu:a})}function rN(r,e){const n=e.key,a=n.path.canonicalString();r.du.get(n)||r.Eu.has(a)||(Re(rg,"New document in limbo: "+n),r.Eu.add(a),ig(r))}function ig(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new ke(Ut.fromString(e)),a=r.fu.next();r.Au.set(a,new $D(n)),r.du=r.du.insert(n,a),xb(r.remoteStore,new Va(mi(lf(n.path)),a,"TargetPurposeLimboResolution",af.ce))}}async function zu(r,e,n){const a=tt(r),o=[],u=[],f=[];a.Tu.isEmpty()||(a.Tu.forEach((d,p)=>{f.push(a.pu(p,e,n).then(g=>{if((g||n)&&a.isPrimaryClient){const _=g?!g.fromCache:n?.targetChanges.get(p.targetId)?.current;a.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(g){o.push(g);const _=Qp.As(p.targetId,g);u.push(_)}}))}),await Promise.all(f),a.Pu.H_(o),await async function(p,g){const _=tt(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>de.forEach(g,S=>de.forEach(S.Es,x=>_.persistence.referenceDelegate.addReference(w,S.targetId,x)).next(()=>de.forEach(S.ds,x=>_.persistence.referenceDelegate.removeReference(w,S.targetId,x)))))}catch(w){if(!el(w))throw w;Re(Yp,"Failed to update sequence numbers: "+w)}for(const w of g){const S=w.targetId;if(!w.fromCache){const x=_.Ms.get(S),M=x.snapshotVersion,Q=x.withLastLimboFreeSnapshotVersion(M);_.Ms=_.Ms.insert(S,Q)}}}(a.localStore,u))}async function iN(r,e){const n=tt(r);if(!n.currentUser.isEqual(e)){Re(rg,"User change. New user:",e.toKey());const a=await Ib(n.localStore,e);n.currentUser=e,function(u,f){u.mu.forEach(d=>{d.forEach(p=>{p.reject(new we(ce.CANCELLED,f))})}),u.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await zu(n,a.Ls)}}function aN(r,e){const n=tt(r),a=n.Au.get(e);if(a&&a.hu)return dt().add(a.key);{let o=dt();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const d=n.Tu.get(f);o=o.unionWith(d.view.nu)}return o}}function Qb(r){const e=tt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eN.bind(null,e),e.Pu.H_=qD.bind(null,e.eventManager),e.Pu.yu=HD.bind(null,e.eventManager),e}function sN(r){const e=tt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nN.bind(null,e),e}class Hh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return cD(this.persistence,new oD,e.initialUser,this.serializer)}Cu(e){return new Cb(Kp.mi,this.serializer)}Du(e){return new yD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hh.provider={build:()=>new Hh};class oN extends Hh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Rt(this.persistence.referenceDelegate instanceof Bh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new $2(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Jn.withCacheSize(this.cacheSizeBytes):Jn.DEFAULT;return new Cb(a=>Bh.mi(a,n),this.serializer)}}class gp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>d0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=iN.bind(null,this.syncEngine),await zD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new BD}()}createDatastore(e){const n=mf(e.databaseInfo.databaseId),a=function(u){return new bD(u)}(e.databaseInfo);return function(u,f,d,p){return new RD(u,f,d,p)}(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return function(a,o,u,f,d){return new ID(a,o,u,f,d)}(this.localStore,this.datastore,e.asyncQueue,n=>d0(this.syncEngine,n,0),function(){return o0.v()?new o0:new _D}())}createSyncEngine(e,n){return function(o,u,f,d,p,g,_){const w=new KD(o,u,f,d,p,g);return _&&(w.gu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const a=tt(n);Re(Ps,"RemoteStore shutting down."),a.Ea.add(5),await Uu(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}gp.provider={build:()=>new gp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa="FirestoreClient";class lN{constructor(e,n,a,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this.databaseInfo=o,this.user=jn.UNAUTHENTICATED,this.clientId=Pp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,async f=>{Re(Qa,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(a,f=>(Re(Qa,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ja;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=tg(n,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function zm(r,e){r.asyncQueue.verifyOperationInProgress(),Re(Qa,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let a=n.initialUser;r.setCredentialChangeListener(async o=>{a.isEqual(o)||(await Ib(e.localStore,o),a=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function p0(r,e){r.asyncQueue.verifyOperationInProgress();const n=await uN(r);Re(Qa,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(a=>u0(e.remoteStore,a)),r.setAppCheckTokenChangeListener((a,o)=>u0(e.remoteStore,o)),r._onlineComponents=e}async function uN(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Re(Qa,"Using user provided OfflineComponentProvider");try{await zm(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ce.FAILED_PRECONDITION||o.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;qo("Error using user provided cache. Falling back to memory cache: "+n),await zm(r,new Hh)}}else Re(Qa,"Using default OfflineComponentProvider"),await zm(r,new oN(void 0));return r._offlineComponents}async function Xb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Re(Qa,"Using user provided OnlineComponentProvider"),await p0(r,r._uninitializedComponentsProvider._online)):(Re(Qa,"Using default OnlineComponentProvider"),await p0(r,new gp))),r._onlineComponents}function cN(r){return Xb(r).then(e=>e.syncEngine)}async function yp(r){const e=await Xb(r),n=e.eventManager;return n.onListen=QD.bind(null,e.syncEngine),n.onUnlisten=WD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=YD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ZD.bind(null,e.syncEngine),n}function hN(r,e,n={}){const a=new ja;return r.asyncQueue.enqueueAndForget(async()=>function(u,f,d,p,g){const _=new Yb({next:S=>{_.Nu(),f.enqueueAndForget(()=>zb(u,w));const x=S.docs.has(d);!x&&S.fromCache?g.reject(new we(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&S.fromCache&&p&&p.source==="server"?g.reject(new we(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),w=new jb(lf(d.path),_,{includeMetadataChanges:!0,qa:!0});return Ub(u,w)}(await yp(r),r.asyncQueue,e,n,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="firestore.googleapis.com",y0=!0;class _0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Zb,this.ssl=y0}else this.host=e.host,this.ssl=e.ssl??y0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Rb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<F2)throw new we(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}II("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wb(e.experimentalLongPollingOptions??{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new we(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,o){return a.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yf{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new _I;switch(a.type){case"firstParty":return new bI(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new we(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const a=g0.get(n);a&&(Re("ComponentProvider","Removing Datastore"),g0.delete(n),a.terminate())}(this),Promise.resolve()}}function fN(r,e,n,a={}){r=di(r,yf);const o=Xo(e),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},d=`${e}:${n}`;o&&(ST(`https://${d}`),wT("Firestore",!0)),u.host!==Zb&&u.host!==d&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:d,ssl:o,emulatorOptions:a};if(!xs(p,f)&&(r._setSettings(p),a.mockUserToken)){let g,_;if(typeof a.mockUserToken=="string")g=a.mockUserToken,_=jn.MOCK_USER;else{g=GR(a.mockUserToken,r._app?.options.projectId);const w=a.mockUserToken.sub||a.mockUserToken.user_id;if(!w)throw new we(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new jn(w)}r._authCredentials=new vI(new UT(g,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new nl(this.firestore,e,this._query)}}class en{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ba(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}toJSON(){return{type:en._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(Vu(n,en._jsonSchema))return new en(e,a||null,new ke(Ut.fromString(n.referencePath)))}}en._jsonSchemaVersion="firestore/documentReference/1.0",en._jsonSchema={type:ln("string",en._jsonSchemaVersion),referencePath:ln("string")};class Ba extends nl{constructor(e,n,a){super(e,n,lf(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new ke(e))}withConverter(e){return new Ba(this.firestore,e,this._path)}}function Ya(r,e,...n){if(r=Qn(r),zT("collection","path",e),r instanceof yf){const a=Ut.fromString(e,...n);return OE(a),new Ba(r,null,a)}{if(!(r instanceof en||r instanceof Ba))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(Ut.fromString(e,...n));return OE(a),new Ba(r.firestore,null,a)}}function Pa(r,e,...n){if(r=Qn(r),arguments.length===1&&(e=Pp.newId()),zT("doc","path",e),r instanceof yf){const a=Ut.fromString(e,...n);return NE(a),new en(r,null,new ke(a))}{if(!(r instanceof en||r instanceof Ba))throw new we(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(Ut.fromString(e,...n));return NE(a),new en(r.firestore,r instanceof Ba?r.converter:null,new ke(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="AsyncQueue";class E0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Nb(this,"async_queue_retry"),this._c=()=>{const a=Um();a&&Re(v0,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=Um();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Um();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ja;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!el(e))throw e;Re(v0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(a=>{throw this.nc=a,this.rc=!1,Xi("INTERNAL UNHANDLED ERROR: ",T0(a)),a}).then(a=>(this.rc=!1,a))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=eg.createAndSchedule(this,e,n,a,u=>this.hc(u));return this.tc.push(o),o}uc(){this.nc&&Qe(47125,{Pc:T0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,a)=>n.targetTimeMs-a.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function T0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(r){return function(n,a){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of a)if(u in o&&typeof o[u]=="function")return!0;return!1}(r,["next","error","complete"])}class Ls extends yf{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new E0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new E0(e),this._firestoreClient=void 0,await e}}}function dN(r,e){const n=typeof r=="object"?r:IT(),a=typeof r=="string"?r:Vh,o=Mp(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=HR("firestore");u&&fN(o,...u)}return o}function ag(r){if(r._terminated)throw new we(ce.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||mN(r),r._firestoreClient}function mN(r){const e=r._freezeSettings(),n=function(o,u,f,d){return new zI(o,u,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Wb(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new lN(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Or(Mn.fromBase64String(e))}catch(n){throw new we(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Or(Mn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Or._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vu(e,Or._jsonSchema))return Or.fromBase64String(e.bytes)}}Or._jsonSchemaVersion="firestore/bytes/1.0",Or._jsonSchema={type:ln("string",Or._jsonSchemaVersion),bytes:ln("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new we(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new we(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new we(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ft(this._lat,e._lat)||ft(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gi._jsonSchemaVersion}}static fromJSON(e){if(Vu(e,gi._jsonSchema))return new gi(e.latitude,e.longitude)}}gi._jsonSchemaVersion="firestore/geoPoint/1.0",gi._jsonSchema={type:ln("string",gi._jsonSchemaVersion),latitude:ln("number"),longitude:ln("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0}(this._values,e._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vu(e,yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new yi(e.vectorValues);throw new we(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:ln("string",yi._jsonSchemaVersion),vectorValues:ln("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=/^__.*__$/;class gN{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lu(e,this.data,n,this.fieldTransforms)}}function eS(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe(40011,{Ac:r})}}class og{constructor(e,n,a,o,u,f){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new og({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),a=this.Vc({path:n,fc:!1});return a.gc(e),a}yc(e){const n=this.path?.child(e),a=this.Vc({path:n,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Fh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(eS(this.Ac)&&pN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class yN{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||mf(e)}Cc(e,n,a,o=!1){return new og({Ac:e,methodName:n,Dc:a,path:xn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lg(r){const e=r._freezeSettings(),n=mf(r._databaseId);return new yN(r._databaseId,!!e.ignoreUndefinedProperties,n)}function tS(r,e,n,a,o,u={}){const f=r.Cc(u.merge||u.mergeFields?2:0,e,n,o);iS("Data must be an object, but it was:",f,a);const d=nS(a,f);let p,g;if(u.merge)p=new Br(f.fieldMask),g=f.fieldTransforms;else if(u.mergeFields){const _=[];for(const w of u.mergeFields){const S=vN(e,w,n);if(!f.contains(S))throw new we(ce.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);TN(_,S)||_.push(S)}p=new Br(_),g=f.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,g=f.fieldTransforms;return new gN(new Nr(d),p,g)}function _N(r,e,n,a=!1){return ug(n,r.Cc(a?4:3,e))}function ug(r,e){if(rS(r=Qn(r)))return iS("Unsupported field value:",e,r),nS(r,e);if(r instanceof Jb)return function(a,o){if(!eS(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(a,o){const u=[];let f=0;for(const d of a){let p=ug(d,o.wc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}}(r,e)}return function(a,o){if((a=Qn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return l2(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=jt.fromDate(a);return{timestampValue:jh(o.serializer,u)}}if(a instanceof jt){const u=new jt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:jh(o.serializer,u)}}if(a instanceof gi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Or)return{bytesValue:vb(o.serializer,a._byteString)};if(a instanceof en){const u=o.databaseId,f=a.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Gp(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof yi)return function(f,d){return{mapValue:{fields:{[QT]:{stringValue:YT},[Ph]:{arrayValue:{values:f.toArray().map(g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return Bp(d.serializer,g)})}}}}}}(a,o);throw o.Sc(`Unsupported field value: ${rf(a)}`)}(r,e)}function nS(r,e){const n={};return qT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):js(r,(a,o)=>{const u=ug(o,e.mc(a));u!=null&&(n[a]=u)}),{mapValue:{fields:n}}}function rS(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof jt||r instanceof gi||r instanceof Or||r instanceof en||r instanceof Jb||r instanceof yi)}function iS(r,e,n){if(!rS(n)||!jT(n)){const a=rf(n);throw a==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+a)}}function vN(r,e,n){if((e=Qn(e))instanceof sg)return e._internalPath;if(typeof e=="string")return aS(r,e);throw Fh("Field path arguments must be of type string or ",r,!1,void 0,n)}const EN=new RegExp("[~\\*/\\[\\]]");function aS(r,e,n){if(e.search(EN)>=0)throw Fh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new sg(...e.split("."))._internalPath}catch{throw Fh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Fh(r,e,n,a,o){const u=a&&!a.isEmpty(),f=o!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${a}`),f&&(p+=` in document ${o}`),p+=")"),new we(ce.INVALID_ARGUMENT,d+r+p)}function TN(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n,a,o,u){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(oS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class bN extends sS{data(){return super.data()}}function oS(r,e){return typeof e=="string"?aS(r,e):e instanceof sg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new we(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cg{}class wN extends cg{}function _f(r,e,...n){let a=[];e instanceof cg&&a.push(e),a=a.concat(n),function(u){const f=u.filter(p=>p instanceof fg).length,d=u.filter(p=>p instanceof hg).length;if(f>1||f>0&&d>0)throw new we(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const o of a)r=o._apply(r);return r}class hg extends wN{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new hg(e,n,a)}_apply(e){const n=this._parse(e);return lS(e._query,n),new nl(e.firestore,e.converter,sp(e._query,n))}_parse(e){const n=lg(e.firestore);return function(u,f,d,p,g,_,w){let S;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new we(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){w0(w,_);const M=[];for(const Q of w)M.push(S0(p,u,Q));S={arrayValue:{values:M}}}else S=S0(p,u,w)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||w0(w,_),S=_N(d,f,w,_==="in"||_==="not-in");return on.create(g,_,S)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class fg extends cg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new fg(e,n)}_parse(e){const n=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return n.length===1?n[0]:Gr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let f=o;const d=u.getFlattenedFilters();for(const p of d)lS(f,p),f=sp(f,p)}(e._query,n),new nl(e.firestore,e.converter,sp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function S0(r,e,n){if(typeof(n=Qn(n))=="string"){if(n==="")throw new we(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rb(e)&&n.indexOf("/")!==-1)throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(Ut.fromString(n));if(!ke.isDocumentKey(a))throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return zE(r,new ke(a))}if(n instanceof en)return zE(r,n._key);throw new we(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rf(n)}.`)}function w0(r,e){if(!Array.isArray(r)||r.length===0)throw new we(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lS(r,e){const n=function(o,u){for(const f of o)for(const d of f.getFlattenedFilters())if(u.indexOf(d.op)>=0)return d.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AN{convertValue(e,n="none"){switch($a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ga(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Qe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return js(e,(o,u)=>{a[o]=this.convertValue(u,n)}),a}convertVectorValue(e){const n=e.fields?.[Ph].arrayValue?.values?.map(a=>Jt(a.doubleValue));return new yi(n)}convertGeoPoint(e){return new gi(Jt(e.latitude),Jt(e.longitude))}convertArray(e,n){return(e.values||[]).map(a=>this.convertValue(a,n))}convertServerTimestamp(e,n){switch(n){case"previous":const a=of(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(wu(e));default:return null}}convertTimestamp(e){const n=Fa(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=Ut.fromString(e);Rt(Ab(a),9688,{name:e});const o=new Au(a.get(1),a.get(3)),u=new ke(a.popFirst(5));return o.isEqual(n)||Xi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(r,e,n){let a;return a=r?r.toFirestore(e):e,a}class du{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ns extends sS{constructor(e,n,a,o,u,f){super(e,n,a,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(oS("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ns._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ns._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ns._jsonSchema={type:ln("string",Ns._jsonSchemaVersion),bundleSource:ln("string","DocumentSnapshot"),bundleName:ln("string"),bundle:ln("string")};class Th extends Ns{data(e={}){return super.data(e)}}class ko{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new du(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(a=>{e.call(n,new Th(this._firestore,this._userDataWriter,a.key,a,new du(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new we(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(d=>{const p=new Th(o._firestore,o._userDataWriter,d.doc.key,d.doc,new du(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>u||d.type!==3).map(d=>{const p=new Th(o._firestore,o._userDataWriter,d.doc.key,d.doc,new du(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return d.type!==0&&(g=f.indexOf(d.doc.key),f=f.delete(d.doc.key)),d.type!==1&&(f=f.add(d.doc),_=f.indexOf(d.doc.key)),{type:RN(d.type),doc:p,oldIndex:g,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ko._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach(u=>{u._document!==null&&(n.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RN(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(r){r=di(r,en);const e=di(r.firestore,Ls);return hN(ag(e),r._key).then(n=>hS(e,r,n))}ko._jsonSchemaVersion="firestore/querySnapshot/1.0",ko._jsonSchema={type:ln("string",ko._jsonSchemaVersion),bundleSource:ln("string","QuerySnapshot"),bundleName:ln("string"),bundle:ln("string")};class cS extends AN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Or(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,n)}}function _p(r,e,n){r=di(r,en);const a=di(r.firestore,Ls),o=uS(r.converter,e);return mg(a,[tS(lg(a),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,Hr.none())])}function CN(r){return mg(di(r.firestore,Ls),[new qp(r._key,Hr.none())])}function IN(r,e){const n=di(r.firestore,Ls),a=Pa(r),o=uS(r.converter,e);return mg(n,[tS(lg(r.firestore),"addDoc",a._key,o,r.converter!==null,{}).toMutation(a._key,Hr.exists(!1))]).then(()=>a)}function vf(r,...e){r=Qn(r);let n={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||b0(e[a])||(n=e[a++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(b0(e[a])){const p=e[a];e[a]=p.next?.bind(p),e[a+1]=p.error?.bind(p),e[a+2]=p.complete?.bind(p)}let u,f,d;if(r instanceof en)f=di(r.firestore,Ls),d=lf(r._key.path),u={next:p=>{e[a]&&e[a](hS(f,r,p))},error:e[a+1],complete:e[a+2]};else{const p=di(r,nl);f=di(p.firestore,Ls),d=p._query;const g=new cS(f);u={next:_=>{e[a]&&e[a](new ko(f,g,p,_))},error:e[a+1],complete:e[a+2]},SN(r._query)}return function(g,_,w,S){const x=new Yb(S),M=new jb(_,x,w);return g.asyncQueue.enqueueAndForget(async()=>Ub(await yp(g),M)),()=>{x.Nu(),g.asyncQueue.enqueueAndForget(async()=>zb(await yp(g),M))}}(ag(f),d,o,u)}function mg(r,e){return function(a,o){const u=new ja;return a.asyncQueue.enqueueAndForget(async()=>JD(await cN(a),o,u)),u.promise}(ag(r),e)}function hS(r,e,n){const a=n.docs.get(e._key),o=new cS(r);return new Ns(r,o,e._key,a,new du(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){Zo=o})(Wo),Bo(new Ms("firestore",(a,{instanceIdentifier:o,options:u})=>{const f=a.getProvider("app").getImmediate(),d=new Ls(new EI(a.getProvider("auth-internal")),new SI(f,a.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new we(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Au(g.options.projectId,_)}(f,o),f);return u={useFetchStreams:n,...u},d._setSettings(u),d},"PUBLIC").setMultipleInstances(!0)),Ua(RE,CE,e),Ua(RE,CE,"esm2020")})();var DN="firebase",NN="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ua(DN,NN,"app");function fS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ON=fS,dS=new xu("auth","Firebase",fS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh=new Op("@firebase/auth");function xN(r,...e){Gh.logLevel<=ht.WARN&&Gh.warn(`Auth (${Wo}): ${r}`,...e)}function bh(r,...e){Gh.logLevel<=ht.ERROR&&Gh.error(`Auth (${Wo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(r,...e){throw gg(r,...e)}function Fr(r,...e){return gg(r,...e)}function pg(r,e,n){const a={...ON(),[e]:n};return new xu("auth","Firebase",a).create(e,{appName:r.name})}function Os(r){return pg(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function MN(r,e,n){const a=n;if(!(e instanceof a))throw a.name!==e.constructor.name&&Ei(r,"argument-error"),pg(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gg(r,...e){if(typeof r!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=r.name),r._errorFactory.create(n,...a)}return dS.create(r,...e)}function Ze(r,e,...n){if(!r)throw gg(e,...n)}function Ki(r){const e="INTERNAL ASSERTION FAILED: "+r;throw bh(e),new Error(e)}function Zi(r,e){r||Ki(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(){return typeof self<"u"&&self.location?.href||""}function VN(){return A0()==="http:"||A0()==="https:"}function A0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VN()||WR()||"connection"in navigator)?navigator.onLine:!0}function LN(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zi(n>e,"Short delay should be less than long delay!"),this.isMobile=QR()||ZR()}get(){return PN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(r,e){Zi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zN=new ju(3e4,6e4);function _g(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function rl(r,e,n,a,o={}){return pS(r,o,async()=>{let u={},f={};a&&(e==="GET"?f=a:u={body:JSON.stringify(a)});const d=Mu({key:r.config.apiKey,...f}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...u};return XR()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Xo(r.emulatorConfig.host)&&(g.credentials="include"),mS.fetch()(await gS(r,r.config.apiHost,n,d),g)})}async function pS(r,e,n){r._canInitEmulator=!1;const a={...kN,...e};try{const o=new BN(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw hh(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const d=u.ok?f.errorMessage:f.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw hh(r,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw hh(r,"email-already-in-use",f);if(p==="USER_DISABLED")throw hh(r,"user-disabled",f);const _=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw pg(r,_,g);Ei(r,_)}}catch(o){if(o instanceof ea)throw o;Ei(r,"network-request-failed",{message:String(o)})}}async function jN(r,e,n,a,o={}){const u=await rl(r,e,n,a,o);return"mfaPendingCredential"in u&&Ei(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function gS(r,e,n,a){const o=`${e}${n}?${a}`,u=r,f=u.config.emulator?yg(r.config,o):`${r.config.apiScheme}://${o}`;return UN.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class BN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(Fr(this.auth,"network-request-failed")),zN.get())})}}function hh(r,e,n){const a={appName:r.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const o=Fr(r,e,a);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qN(r,e){return rl(r,"POST","/v1/accounts:delete",e)}async function $h(r,e){return rl(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HN(r,e=!1){const n=Qn(r),a=await n.getIdToken(e),o=vg(a);Ze(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:a,authTime:vu(jm(o.auth_time)),issuedAtTime:vu(jm(o.iat)),expirationTime:vu(jm(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function jm(r){return Number(r)*1e3}function vg(r){const[e,n,a]=r.split(".");if(e===void 0||n===void 0||a===void 0)return bh("JWT malformed, contained fewer than 3 sections"),null;try{const o=vT(n);return o?JSON.parse(o):(bh("Failed to decode base64 JWT payload"),null)}catch(o){return bh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function R0(r){const e=vg(r);return Ze(e,"internal-error"),Ze(typeof e.exp<"u","internal-error"),Ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Du(r,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof ea&&FN(a)&&r.auth.currentUser===r&&await r.auth.signOut(),a}}function FN({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vu(this.lastLoginAt),this.creationTime=vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kh(r){const e=r.auth,n=await r.getIdToken(),a=await Du(r,$h(e,{idToken:n}));Ze(a?.users.length,e,"internal-error");const o=a.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?yS(o.providerUserInfo):[],f=KN(r.providerData,u),d=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!f?.length,g=d?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Ep(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(r,_)}async function $N(r){const e=Qn(r);await Kh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KN(r,e){return[...r.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function yS(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(r,e){const n=await pS(r,{},async()=>{const a=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await gS(r,o,"/v1/token",`key=${u}`),d=await r._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:a};return r.emulatorConfig&&Xo(r.emulatorConfig.host)&&(p.credentials="include"),mS.fetch()(f,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function YN(r,e){return rl(r,"POST","/v2/accounts:revokeToken",_g(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ze(e.idToken,"internal-error"),Ze(typeof e.idToken<"u","internal-error"),Ze(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):R0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ze(e.length!==0,"internal-error");const n=R0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:o,expiresIn:u}=await QN(e,n);this.updateTokensAndExpiration(a,o,Number(u))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:o,expirationTime:u}=n,f=new Uo;return a&&(Ze(typeof a=="string","internal-error",{appName:e}),f.refreshToken=a),o&&(Ze(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Ze(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Uo,this.toJSON())}_performRefresh(){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(r,e){Ze(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class qr{constructor({uid:e,auth:n,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new GN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ep(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Du(this,this.stsTokenManager.getToken(this.auth,e));return Ze(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return HN(this,e)}reload(){return $N(this)}_assign(e){this!==e&&(Ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await Kh(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jr(this.auth.app))return Promise.reject(Os(this.auth));const e=await this.getIdToken();return await Du(this,qN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,d=n.tenantId??void 0,p=n._redirectEventId??void 0,g=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:w,emailVerified:S,isAnonymous:x,providerData:M,stsTokenManager:Q}=n;Ze(w&&Q,e,"internal-error");const H=Uo.fromJSON(this.name,Q);Ze(typeof w=="string",e,"internal-error"),Ia(a,e.name),Ia(o,e.name),Ze(typeof S=="boolean",e,"internal-error"),Ze(typeof x=="boolean",e,"internal-error"),Ia(u,e.name),Ia(f,e.name),Ia(d,e.name),Ia(p,e.name),Ia(g,e.name),Ia(_,e.name);const q=new qr({uid:w,auth:e,email:o,emailVerified:S,displayName:a,isAnonymous:x,photoURL:f,phoneNumber:u,tenantId:d,stsTokenManager:H,createdAt:g,lastLoginAt:_});return M&&Array.isArray(M)&&(q.providerData=M.map(ae=>({...ae}))),p&&(q._redirectEventId=p),q}static async _fromIdTokenResponse(e,n,a=!1){const o=new Uo;o.updateFromServerResponse(n);const u=new qr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await Kh(u),u}static async _fromGetAccountInfoResponse(e,n,a){const o=n.users[0];Ze(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?yS(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,d=new Uo;d.updateFromIdToken(a);const p=new qr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:f}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Ep(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=new Map;function Qi(r){Zi(r instanceof Function,"Expected a class definition");let e=C0.get(r);return e?(Zi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,C0.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_S.type="NONE";const I0=_S;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(r,e,n){return`firebase:${r}:${e}:${n}`}class zo{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:o,name:u}=this.auth;this.fullUserKey=Sh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Sh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await $h(this.auth,{idToken:e}).catch(()=>{});return n?qr._fromGetAccountInfoResponse(this.auth,n,e):null}return qr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new zo(Qi(I0),e,a);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||Qi(I0);const f=Sh(a,e.config.apiKey,e.name);let d=null;for(const g of n)try{const _=await g._get(f);if(_){let w;if(typeof _=="string"){const S=await $h(e,{idToken:_}).catch(()=>{});if(!S)break;w=await qr._fromGetAccountInfoResponse(e,S,_)}else w=qr._fromJSON(e,_);g!==u&&(d=w),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new zo(u,e,a):(u=p[0],d&&await u._set(f,d.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(f)}catch{}})),new zo(u,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wS(e))return"Blackberry";if(AS(e))return"Webos";if(ES(e))return"Safari";if((e.includes("chrome/")||TS(e))&&!e.includes("edge/"))return"Chrome";if(SS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=r.match(n);if(a?.length===2)return a[1]}return"Other"}function vS(r=qn()){return/firefox\//i.test(r)}function ES(r=qn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TS(r=qn()){return/crios\//i.test(r)}function bS(r=qn()){return/iemobile/i.test(r)}function SS(r=qn()){return/android/i.test(r)}function wS(r=qn()){return/blackberry/i.test(r)}function AS(r=qn()){return/webos/i.test(r)}function Eg(r=qn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function XN(r=qn()){return Eg(r)&&!!window.navigator?.standalone}function WN(){return JR()&&document.documentMode===10}function RS(r=qn()){return Eg(r)||SS(r)||AS(r)||wS(r)||/windows phone/i.test(r)||bS(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(r,e=[]){let n;switch(r){case"Browser":n=D0(qn());break;case"Worker":n=`${D0(qn())}-${r}`;break;default:n=r}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wo}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=u=>new Promise((f,d)=>{try{const p=e(u);f(p)}catch(p){d(p)}});a.onAbort=n,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(r,e={}){return rl(r,"GET","/v2/passwordPolicy",_g(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=6;class tO{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??eO,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,n,a,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new N0(this),this.idTokenSubscription=new N0(this),this.beforeStateQueue=new ZN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await zo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $h(this,{idToken:e}),a=await qr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(jr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=a?._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===f)&&d?.user&&(a=d.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Kh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jr(this.app))return Promise.reject(Os(this));const n=e?Qn(e):null;return n&&Ze(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jr(this.app)?Promise.reject(Os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jr(this.app)?Promise.reject(Os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JN(this),n=new tO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xu("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await YN(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qi(e)||this._popupRedirectResolver;Ze(n,this,"argument-error"),this.redirectPersistenceManager=await zo.create(this,[Qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ze(d,this,"internal-error"),d.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,a,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&xN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ef(r){return Qn(r)}class N0{constructor(e){this.auth=e,this.observer=null,this.addObserver=oC(n=>this.observer=n)}get next(){return Ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rO(r){Tg=r}function iO(r){return Tg.loadJS(r)}function aO(){return Tg.gapiScript}function sO(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(r,e){const n=Mp(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(xs(u,e??{}))return o;Ei(o,"already-initialized")}return n.initialize({options:e})}function lO(r,e){const n=e?.persistence||[],a=(Array.isArray(n)?n:[n]).map(Qi);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(a,e?.popupRedirectResolver)}function uO(r,e,n){const a=Ef(r);Ze(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,u=IS(e),{host:f,port:d}=cO(e),p=d===null?"":`:${d}`,g={url:`${u}//${f}${p}/`},_=Object.freeze({host:f,port:d,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){Ze(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Ze(xs(g,a.config.emulator)&&xs(_,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=_,a.settings.appVerificationDisabledForTesting=!0,Xo(f)?(ST(`${u}//${f}${p}`),wT("Auth",!0)):hO()}function IS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function cO(r){const e=IS(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const u=o[1];return{host:u,port:O0(a.substr(u.length+1))}}else{const[u,f]=a.split(":");return{host:u,port:O0(f)}}}function O0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function hO(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ki("not implemented")}_getIdTokenResponse(e){return Ki("not implemented")}_linkToIdToken(e,n){return Ki("not implemented")}_getReauthenticationResolver(e){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(r,e){return jN(r,"POST","/v1/accounts:signInWithIdp",_g(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO="http://localhost";class ks extends DS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ks(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ei("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...u}=n;if(!a||!o)return null;const f=new ks(a,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return jo(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,jo(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,jo(e,n)}buildRequest(){const e={requestUri:fO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Mu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends bg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa extends Bu{constructor(){super("facebook.com")}static credential(e){return ks._fromParams({providerId:Oa.PROVIDER_ID,signInMethod:Oa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oa.credentialFromTaggedObject(e)}static credentialFromError(e){return Oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oa.credential(e.oauthAccessToken)}catch{return null}}}Oa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Oa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Bu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ks._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return $i.credential(n,a)}catch{return null}}}$i.GOOGLE_SIGN_IN_METHOD="google.com";$i.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa extends Bu{constructor(){super("github.com")}static credential(e){return ks._fromParams({providerId:xa.PROVIDER_ID,signInMethod:xa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xa.credentialFromTaggedObject(e)}static credentialFromError(e){return xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xa.credential(e.oauthAccessToken)}catch{return null}}}xa.GITHUB_SIGN_IN_METHOD="github.com";xa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma extends Bu{constructor(){super("twitter.com")}static credential(e,n){return ks._fromParams({providerId:Ma.PROVIDER_ID,signInMethod:Ma.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ma.credentialFromTaggedObject(e)}static credentialFromError(e){return Ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return Ma.credential(n,a)}catch{return null}}}Ma.TWITTER_SIGN_IN_METHOD="twitter.com";Ma.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,o=!1){const u=await qr._fromIdTokenResponse(e,a,o),f=x0(a);return new Qo({user:u,providerId:f,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const o=x0(a);return new Qo({user:e,providerId:o,_tokenResponse:a,operationType:n})}}function x0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh extends ea{constructor(e,n,a,o){super(n.code,n.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,Qh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,o){return new Qh(e,n,a,o)}}function NS(r,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Qh._fromErrorAndOperation(r,u,e,a):u})}async function dO(r,e,n=!1){const a=await Du(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Qo._forOperation(r,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mO(r,e,n=!1){const{auth:a}=r;if(jr(a.app))return Promise.reject(Os(a));const o="reauthenticate";try{const u=await Du(r,NS(a,o,e,r),n);Ze(u.idToken,a,"internal-error");const f=vg(u.idToken);Ze(f,a,"internal-error");const{sub:d}=f;return Ze(r.uid===d,a,"user-mismatch"),Qo._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Ei(a,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pO(r,e,n=!1){if(jr(r.app))return Promise.reject(Os(r));const a="signIn",o=await NS(r,a,e),u=await Qo._fromIdTokenResponse(r,a,o);return n||await r._updateCurrentUser(u.user),u}function gO(r,e,n,a){return Qn(r).onIdTokenChanged(e,n,a)}function yO(r,e,n){return Qn(r).beforeAuthStateChanged(e,n)}function _O(r,e,n,a){return Qn(r).onAuthStateChanged(e,n,a)}function OS(r){return Qn(r).signOut()}const Yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yh,"1"),this.storage.removeItem(Yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO=1e3,EO=10;class MS extends xS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),o=this.localCache[n];a!==o&&e(n,o,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,d,p)=>{this.notifyListeners(f,p)});return}const a=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(a);!n&&this.localCache[a]===f||this.notifyListeners(a,f)},u=this.storage.getItem(a);WN()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,EO):o()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},vO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}MS.type="LOCAL";const TO=MS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS extends xS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}VS.type="SESSION";const PS=VS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const a=new Tf(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const d=Array.from(f).map(async g=>g(n.origin,u)),p=await bO(d);n.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(r="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((d,p)=>{const g=Sg("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},a);f={messageChannel:o,onMessage(w){const S=w;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),d(S.data.response);break;default:clearTimeout(_),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(){return window}function wO(r){_i().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(){return typeof _i().WorkerGlobalScope<"u"&&typeof _i().importScripts=="function"}async function AO(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RO(){return navigator?.serviceWorker?.controller||null}function CO(){return LS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="firebaseLocalStorageDb",IO=1,Xh="firebaseLocalStorage",US="fbase_key";class qu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bf(r,e){return r.transaction([Xh],e?"readwrite":"readonly").objectStore(Xh)}function DO(){const r=indexedDB.deleteDatabase(kS);return new qu(r).toPromise()}function Tp(){const r=indexedDB.open(kS,IO);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const a=r.result;try{a.createObjectStore(Xh,{keyPath:US})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const a=r.result;a.objectStoreNames.contains(Xh)?e(a):(a.close(),await DO(),e(await Tp()))})})}async function M0(r,e,n){const a=bf(r,!0).put({[US]:e,value:n});return new qu(a).toPromise()}async function NO(r,e){const n=bf(r,!1).get(e),a=await new qu(n).toPromise();return a===void 0?null:a.value}function V0(r,e){const n=bf(r,!0).delete(e);return new qu(n).toPromise()}const OO=800,xO=3;class zS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>xO)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tf._getInstance(CO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await AO(),!this.activeServiceWorker)return;this.sender=new SO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tp();return await M0(e,Yh,"1"),await V0(e,Yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>M0(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>NO(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>V0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=bf(o,!1).getAll();return new qu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zS.type="LOCAL";const MO=zS;new ju(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(r,e){return e?Qi(e):(Ze(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg extends DS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return jo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VO(r){return pO(r.auth,new wg(r),r.bypassAuthState)}function PO(r){const{auth:e,user:n}=r;return Ze(n,e,"internal-error"),mO(n,new wg(r),r.bypassAuthState)}async function LO(r){const{auth:e,user:n}=r;return Ze(n,e,"internal-error"),dO(n,new wg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n,a,o,u=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:o,tenantId:u,error:f,type:d}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:a,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VO;case"linkViaPopup":case"linkViaRedirect":return LO;case"reauthViaPopup":case"reauthViaRedirect":return PO;default:Ei(this.auth,"internal-error")}}resolve(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=new ju(2e3,1e4);async function UO(r,e,n){if(jr(r.app))return Promise.reject(Fr(r,"operation-not-supported-in-this-environment"));const a=Ef(r);MN(r,e,bg);const o=jS(a,n);return new Ds(a,"signInViaPopup",e,o).executeNotNull()}class Ds extends BS{constructor(e,n,a,o,u){super(e,n,o,u),this.provider=a,this.authWindow=null,this.pollId=null,Ds.currentPopupAction&&Ds.currentPopupAction.cancel(),Ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ze(e,this.auth,"internal-error"),e}async onExecution(){Zi(this.filter.length===1,"Popup operations only handle one event");const e=Sg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kO.get())};e()}}Ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO="pendingRedirect",wh=new Map;class jO extends BS{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=wh.get(this.auth._key());if(!e){try{const a=await BO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}wh.set(this.auth._key(),e)}return this.bypassAuthState||wh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BO(r,e){const n=FO(e),a=HO(r);if(!await a._isAvailable())return!1;const o=await a._get(n)==="true";return await a._remove(n),o}function qO(r,e){wh.set(r._key(),e)}function HO(r){return Qi(r._redirectPersistence)}function FO(r){return Sh(zO,r.config.apiKey,r.name)}async function GO(r,e,n=!1){if(jr(r.app))return Promise.reject(Os(r));const a=Ef(r),o=jS(a,e),f=await new jO(a,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await a._persistUserIfCurrent(f.user),await a._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O=10*60*1e3;class KO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!qS(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Fr(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$O&&this.cachedEventUids.clear(),this.cachedEventUids.has(P0(e))}saveEventToCache(e){this.cachedEventUids.add(P0(e)),this.lastProcessedEventTime=Date.now()}}function P0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function qS({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function QO(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qS(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YO(r,e={}){return rl(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WO=/^https?/;async function ZO(r){if(r.config.emulator)return;const{authorizedDomains:e}=await YO(r);for(const n of e)try{if(JO(n))return}catch{}Ei(r,"unauthorized-domain")}function JO(r){const e=vp(),{protocol:n,hostname:a}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&a===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===a}if(!WO.test(n))return!1;if(XO.test(r))return a===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=new ju(3e4,6e4);function L0(){const r=_i().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function tx(r){return new Promise((e,n)=>{function a(){L0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{L0(),n(Fr(r,"network-request-failed"))},timeout:ex.get()})}if(_i().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_i().gapi?.load)a();else{const o=sO("iframefcb");return _i()[o]=()=>{gapi.load?a():n(Fr(r,"network-request-failed"))},iO(`${aO()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Ah=null,e})}let Ah=null;function nx(r){return Ah=Ah||tx(r),Ah}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new ju(5e3,15e3),ix="__/auth/iframe",ax="emulator/auth/iframe",sx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ox=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lx(r){const e=r.config;Ze(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?yg(e,ax):`https://${r.config.authDomain}/${ix}`,a={apiKey:e.apiKey,appName:r.name,v:Wo},o=ox.get(r.config.apiHost);o&&(a.eid=o);const u=r._getFrameworks();return u.length&&(a.fw=u.join(",")),`${n}?${Mu(a).slice(1)}`}async function ux(r){const e=await nx(r),n=_i().gapi;return Ze(n,r,"internal-error"),e.open({where:document.body,url:lx(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sx,dontclear:!0},a=>new Promise(async(o,u)=>{await a.restyle({setHideOnLeave:!1});const f=Fr(r,"network-request-failed"),d=_i().setTimeout(()=>{u(f)},rx.get());function p(){_i().clearTimeout(d),o(a)}a.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},hx=500,fx=600,dx="_blank",mx="http://localhost";class k0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function px(r,e,n,a=hx,o=fx){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-a)/2,0).toString();let d="";const p={...cx,width:a.toString(),height:o.toString(),top:u,left:f},g=qn().toLowerCase();n&&(d=TS(g)?dx:n),vS(g)&&(e=e||mx,p.scrollbars="yes");const _=Object.entries(p).reduce((S,[x,M])=>`${S}${x}=${M},`,"");if(XN(g)&&d!=="_self")return gx(e||"",d),new k0(null);const w=window.open(e||"",d,_);Ze(w,r,"popup-blocked");try{w.focus()}catch{}return new k0(w)}function gx(r,e){const n=document.createElement("a");n.href=r,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx="__/auth/handler",_x="emulator/auth/handler",vx=encodeURIComponent("fac");async function U0(r,e,n,a,o,u){Ze(r.config.authDomain,r,"auth-domain-config-required"),Ze(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:a,v:Wo,eventId:o};if(e instanceof bg){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",sC(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,w]of Object.entries({}))f[_]=w}if(e instanceof Bu){const _=e.getScopes().filter(w=>w!=="");_.length>0&&(f.scopes=_.join(","))}r.tenantId&&(f.tid=r.tenantId);const d=f;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await r._getAppCheckToken(),g=p?`#${vx}=${encodeURIComponent(p)}`:"";return`${Ex(r)}?${Mu(d).slice(1)}${g}`}function Ex({config:r}){return r.emulator?yg(r,_x):`https://${r.authDomain}/${yx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="webStorageSupport";class Tx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PS,this._completeRedirectFn=GO,this._overrideRedirectResult=qO}async _openPopup(e,n,a,o){Zi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await U0(e,n,a,vp(),o);return px(e,u,Sg())}async _openRedirect(e,n,a,o){await this._originValidation(e);const u=await U0(e,n,a,vp(),o);return wO(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Zi(u,"If manager is not set, promise should be"),u)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await ux(e),a=new KO(e);return n.register("authEvent",o=>(Ze(o?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bm,{type:Bm},o=>{const u=o?.[0]?.[Bm];u!==void 0&&n(!!u),Ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return RS()||ES()||Eg()}}const bx=Tx;var z0="@firebase/auth",j0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ax(r){Bo(new Ms("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:d}=a.options;Ze(f&&!f.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:f,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CS(r)},g=new nO(a,o,u,p);return lO(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),Bo(new Ms("auth-internal",e=>{const n=Ef(e.getProvider("auth").getImmediate());return(a=>new Sx(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ua(z0,j0,wx(r)),Ua(z0,j0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=5*60,Cx=bT("authIdTokenMaxAge")||Rx;let B0=null;const Ix=r=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>Cx)return;const o=n?.token;B0!==o&&(B0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Dx(r=IT()){const e=Mp(r,"auth");if(e.isInitialized())return e.getImmediate();const n=oO(r,{popupRedirectResolver:bx,persistence:[MO,TO,PS]}),a=bT("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(a,location.origin);if(location.origin===u.origin){const f=Ix(u.toString());yO(n,f,()=>f(n.currentUser)),gO(n,d=>f(d))}}const o=ET("auth");return o&&uO(n,`http://${o}`),n}function Nx(){return document.getElementsByTagName("head")?.[0]??document}rO({loadJS(r){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",r),a.onload=e,a.onerror=o=>{const u=Fr("internal-error");u.customData=o,n(u)},a.type="text/javascript",a.charset="UTF-8",Nx().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ax("Browser");let qm;const HS=z.createContext({db:null,auth:null,userId:null,teacherEmail:null,teacherName:null,isAuthReady:!1}),Wa=()=>z.useContext(HS),Ox=({children:r})=>{const[e,n]=z.useState(null),[a,o]=z.useState(null),[u,f]=z.useState(null),[d,p]=z.useState(null),[g,_]=z.useState(null),[w,S]=z.useState(!1),[x,M]=z.useState(null);return z.useEffect(()=>{let Q,H;try{const q=typeof __firebase_config<"u"&&__firebase_config?JSON.parse(__firebase_config):{},ae=typeof __app_id<"u"?__app_id:"default-app-id",ne={apiKey:"AIzaSyDglGh4KPHQQ8Erp65GAct7l2Tj0Fkrd_4",authDomain:"ear-rubrics.firebaseapp.com",projectId:"ear-rubrics",storageBucket:"ear-rubrics.firebasestorage.app",messagingSenderId:"808973218188",appId:"1:808973218188:web:c565e4ee0d9487126d66a9",measurementId:q.measurementId},_e=ae;if(!ne.projectId){console.error("Erro de inicialização do Firebase: 'projectId' não encontrado na configuração. Certifique-se de que é fornecido via variáveis globais do Canvas ou arquivo .env."),M("Configuração do Firebase ausente projectId. Não é possível conectar ao banco de dados."),S(!0),f(null);return}qm=CT(ne,_e),Q=dN(qm),H=Dx(qm),n(Q),o(H);const oe=_O(H,async k=>{k?(f(k.uid),p(k.email),_(k.displayName)):(f(null),p(null),_(null)),S(!0)});return()=>oe()}catch(q){console.error("Falha ao inicializar o Firebase:",q),M("Falha ao inicializar o Firebase. Por favor, verifique o console para detalhes."),S(!0),f(null),p(null),_(null)}},[]),B.jsx(HS.Provider,{value:{db:e,auth:a,userId:u,teacherEmail:d,teacherName:g,isAuthReady:w},children:x?B.jsxs("div",{style:{padding:"20px",color:"red",border:"1px solid red",borderRadius:"5px",margin:"20px"},children:[B.jsxs("p",{children:["Erro: ",x]}),B.jsx("p",{children:"Certifique-se de que suas credenciais do Firebase estão configuradas corretamente em um arquivo `.env` para desenvolvimento local, ou fornecidas pelo ambiente Canvas."})]}):r})},xx="_homeContainer_etchm_1",Mx="_title_etchm_5",Vx="_rubricGrid_etchm_11",Px="_rubricCard_etchm_17",Lx="_addRubricCard_etchm_18",kx="_rubricName_etchm_40",Ux="_studentCount_etchm_47",zx="_plusIcon_etchm_62",Ur={homeContainer:xx,title:Mx,rubricGrid:Vx,rubricCard:Px,addRubricCard:Lx,rubricName:kx,studentCount:Ux,plusIcon:zx};function jx(){const r=zs(),{db:e,userId:n,teacherEmail:a,teacherName:o,isAuthReady:u}=Wa(),[f,d]=z.useState([]),[p,g]=z.useState(!0),[_,w]=z.useState(null);z.useEffect(()=>{if(!u||!e||!n)return;const Q=Ya(e,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/users/${n}/rubrics`),H=_f(Q),q=vf(H,ae=>{const ne=[];ae.forEach(_e=>{const oe=_e.data(),k=oe.studentRubricGrade?oe.studentRubricGrade.length:0;ne.push({id:_e.id,title:oe.header.title,numberOfAssignedStudents:k,gradeLevels:oe.header.gradeLevels||[]})}),d(ne),g(!1)},ae=>{console.error("Error fetching rubrics:",ae),w("Failed to load rubrics. Please try again."),g(!1)});return()=>q()},[e,n,u]);const S=()=>`${Date.now()} - ${Math.floor(Math.random()*1e3)+1}`,x=async()=>{if(!e||!n||!a||!o){alert("User information (email/name) not available. Please try logging in again.");return}g(!0),w(null);const M=typeof __app_id<"u"?__app_id:"default-app-id";try{const Q=Ya(e,`artifacts/${M}/users/${n}/rubrics`),H=[{lineId:S(),categoryName:"Respect for other Team",possibleScores:[{score:25,text:"All statements, body language, and responses were respectful and were in appropriate language."},{score:20,text:"Statements and responses were respectful and used appropriate language, but once or twice body language was not."},{score:15,text:"Most statements and responses were respectful and in appropriate language, but there was one sarcastic remark."},{score:10,text:"Statements, responses and/or body language were consistently not respectful."}]},{lineId:S(),categoryName:"Information",possibleScores:[{score:25,text:"All information presented in the debate was clear, accurate and thorough."},{score:20,text:"Most information presented in the debate was clear, accurate and thorough."},{score:15,text:"Most information presented in the debate was clear and accurate, but was not usually thorough."},{score:10,text:"Information had several inaccuracies OR was usually not clear."}]},{lineId:S(),categoryName:"Rebuttal",possibleScores:[{score:25,text:"All counter-arguments were accurate, relevant and strong."},{score:20,text:"Most counter-arguments were accurate, relevant, and strong."},{score:15,text:"Most counter-arguments were accurate and relevant, but several were weak."},{score:10,text:"Counter-arguments were not accurate and/or relevant"}]},{lineId:S(),categoryName:"",possibleScores:[{score:25,text:""},{score:20,text:""},{score:15,text:""},{score:10,text:""}]}],ae=await IN(Q,{teacherEmail:a,teacherName:o,studentRubricGrade:[],rubricLines:H,header:{title:"Untitled Rubric",gradeLevels:[]}});r(`/rubric?id=${ae.id}&isNew=true`)}catch(Q){console.error("Error creating new rubric: ",Q),w("Failed to create new rubric. Please try again.")}finally{g(!1)}};return p?B.jsx("div",{className:Ur.homeContainer,children:"Loading rubrics..."}):_?B.jsx("div",{className:Ur.homeContainer,style:{color:"red"},children:_}):B.jsxs("div",{className:Ur.homeContainer,children:[B.jsx("h1",{className:Ur.title,children:"My Rubrics"}),B.jsxs("div",{className:Ur.rubricGrid,children:[B.jsx("div",{className:Ur.addRubricCard,onClick:x,children:B.jsx("span",{className:Ur.plusIcon,children:"+"})}),f.map(M=>B.jsxs(tf,{to:`/rubric?id=${M.id}`,className:Ur.rubricCard,children:[B.jsxs("h2",{className:Ur.rubricName,children:[M.title,M.gradeLevels&&M.gradeLevels.length>0&&B.jsxs("span",{className:Ur.rubricGradeLevels,children:[" - ",M.gradeLevels.join(", ")]})]}),B.jsxs("p",{className:Ur.studentCount,children:[M.numberOfAssignedStudents," Students"]})]},M.id))]})]})}const q0="ear.com.br";async function Bx(r){const e=new $i;e.setCustomParameters({prompt:"select_account"});try{const a=(await UO(r,e)).user;if(a.email&&a.email.endsWith(`@${q0}`))return a;throw await OS(r),new Error(`Access denied. Only users from @${q0} are allowed.`)}catch(n){throw n.code==="auth/popup-closed-by-user"?(console.log("Login popup closed by user."),new Error("Login cancelled.")):n.message&&n.message.includes("Access denied")?n:(console.error("Error signing in with Google:",n),new Error(`Authentication failed: ${n.message||"Unknown error"}`))}}async function qx(r){try{await OS(r),console.log("User signed out successfully.")}catch(e){throw console.error("Error signing out:",e),new Error(`Logout failed: ${e.message||"Unknown error"}`)}}const Hx="_loginContainer_18x4r_1",Fx="_loginBox_18x4r_9",Gx="_appTitle_18x4r_22",$x="_googleSignInButton_18x4r_29",Kx="_googleIcon_18x4r_53",Qx="_errorMessage_18x4r_64",Do={loginContainer:Hx,loginBox:Fx,appTitle:Gx,googleSignInButton:$x,googleIcon:Kx,errorMessage:Qx};function Yx(){const r=zs(),{auth:e,isAuthReady:n}=Wa(),[a,o]=z.useState(!1),[u,f]=z.useState(null);z.useEffect(()=>{n&&e?.currentUser&&r("/")},[e,n,r]);const d=async()=>{if(!e){f("Firebase Auth not initialized. Please try again later.");return}o(!0),f(null);try{await Bx(e),r("/")}catch(g){f(g.message||"Failed to sign in with Google."),console.error("Login error:",g)}finally{o(!1)}},p=()=>B.jsx("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",children:B.jsxs("g",{children:[B.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.62-6.62C34.52 2.11 29.38 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C13.51 12.33 18.49 9.5 24 9.5z"}),B.jsx("path",{fill:"#4285F4",d:"M46.98 24.5c0-1.57-.15-3.09-.38-4.55H24v9.01h12.94c-.71 4.2-4.13 6.69-9.02 6.69-5.46 0-9.94-4.38-9.94-9.8C15 19.58 19.48 15.2 24.94 15.2c2.97 0 5.61 1.09 7.66 2.8l6.61-6.61C34.51 6.11 29.38 4 24 4 14.62 4 6.51 9.38 2.56 17.22l7.98 6.19C13.51 16.33 18.49 13.5 24 13.5z"}),B.jsx("path",{fill:"#FBBC05",d:"M10.53 28.5c-.79-2.01-1.25-4.17-1.25-6.48s.46-4.47 1.25-6.48L2.56 9.22C1.59 11.19 1 13.52 1 16s.59 4.81 1.56 6.78l7.97 6.22z"}),B.jsx("path",{fill:"#34A853",d:"M24 47.5c6.48 0 11.93-2.13 15.96-5.77l-6.61-6.61C29.61 40.54 27.05 41.5 24 41.5c-5.46 0-9.94-4.38-9.94-9.8H4L12.56 38.78C16.51 44.62 24 47.5 24 47.5z"}),B.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]})});return B.jsx("div",{className:Do.loginContainer,children:B.jsxs("div",{className:Do.loginBox,children:[B.jsx("h1",{className:Do.appTitle,children:"EAR Rubrics"}),B.jsxs("button",{onClick:d,className:Do.googleSignInButton,disabled:a||!n,children:[B.jsx("span",{className:Do.googleIcon,children:B.jsx(p,{})}),a?"Signing in...":"Sign in with Google"]}),u&&B.jsx("p",{className:Do.errorMessage,children:u})]})})}const Xx="_tableContainer_1t8m3_1",Wx="_actionHeader_1t8m3_11",Zx="_scoreHeader_1t8m3_11",Jx="_categoryHeader_1t8m3_11",eM="_addCategoryRow_1t8m3_26",tM="_addButton_1t8m3_33",nM="_rubricTable_1t8m3_50",rM="_tableCell_1t8m3_67",iM="_actionCell_1t8m3_67",aM="_gradingMode_1t8m3_73",sM="_editingMode_1t8m3_79",oM="_selected_1t8m3_82",lM="_disabledForGrading_1t8m3_88",uM="_cellInput_1t8m3_109",cM="_deleteButton_1t8m3_126",Qt={tableContainer:Xx,actionHeader:Wx,scoreHeader:Zx,categoryHeader:Jx,addCategoryRow:eM,addButton:tM,rubricTable:nM,tableCell:rM,actionCell:iM,gradingMode:aM,editingMode:sM,selected:oM,disabledForGrading:lM,cellInput:uM,deleteButton:cM};function FS({rubricLines:r,selectedStudentGrades:e=[],editionMode:n,onAddCategory:a,onRemoveCategory:o,onGradeSelect:u,onRubricLineChange:f,gradableLineIds:d}){return B.jsx("div",{className:Qt.tableContainer,children:B.jsxs("table",{className:Qt.rubricTable,children:[B.jsx("thead",{children:B.jsxs("tr",{children:[B.jsx("th",{className:Qt.categoryHeader,children:"Category"}),B.jsx("th",{className:Qt.scoreHeader,children:"Excellent (25)"}),B.jsx("th",{className:Qt.scoreHeader,children:"Good (20)"}),B.jsx("th",{className:Qt.scoreHeader,children:"Average (15)"}),B.jsx("th",{className:Qt.scoreHeader,children:"Needs Improvement (10)"}),B.jsx("th",{className:Qt.actionHeader})]})}),B.jsx("tbody",{children:r.map((p,g)=>{const _=d.includes(p.lineId);return B.jsxs("tr",{children:[B.jsx("td",{className:`${Qt.tableCell} ${n?Qt.editingMode:Qt.gradingMode}`,children:B.jsx("textarea",{className:Qt.cellInput,value:p.categoryName,onChange:w=>f(p.lineId,"categoryName",w.target.value),placeholder:"Category Name...",readOnly:!n})}),p.possibleScores.map((w,S)=>{const x=e.some(M=>M.categoryIndex===g&&M.gradingIndex===S);return B.jsx("td",{className:`${Qt.tableCell} ${x?Qt.selected:""} ${n?Qt.editingMode:Qt.gradingMode} ${!_&&!n?Qt.disabledForGrading:""}`,onClick:()=>{_&&!n&&u(g,S)},children:B.jsx("textarea",{className:Qt.cellInput,value:w.text,onChange:M=>f(p.lineId,"scoreText",M.target.value,S),placeholder:"Description...",readOnly:!n})},S)}),B.jsx("td",{className:Qt.actionCell,children:n&&B.jsx("button",{onClick:()=>o(p.lineId),className:Qt.deleteButton,children:"-"})})]},p.lineId)})}),n&&B.jsx("tfoot",{children:B.jsx("tr",{children:B.jsx("td",{colSpan:6,className:Qt.addCategoryRow,children:B.jsx("button",{onClick:a,className:Qt.addButton,children:"+ Add Category"})})})})]})})}const hM="_autocompleteWrapper_1hsfh_1",fM="_input_1hsfh_5",dM="_dropdown_1hsfh_19",mM="_dropdownItem_1hsfh_37",fh={autocompleteWrapper:hM,input:fM,dropdown:dM,dropdownItem:mM};function pM({allStudents:r,onStudentSelect:e}){const[n,a]=z.useState(""),o=d=>{const p=parseInt(d);if(isNaN(p))return d;const g=p%10,_=p%100;if(_>=11&&_<=13)return`${d}th`;switch(g){case 1:return`${d}st`;case 2:return`${d}nd`;case 3:return`${d}rd`;default:return`${d}th`}},u=z.useMemo(()=>{if(!n)return[];const d=n.toLowerCase();return r.filter(p=>p.name.toLowerCase().includes(d)||p.email.toLowerCase().includes(d)||p.gradeLevel.toLowerCase().includes(d))},[n,r]),f=d=>{e(d),a("")};return B.jsxs("div",{className:fh.autocompleteWrapper,children:[B.jsx("input",{type:"text",value:n,onChange:d=>a(d.target.value),className:fh.input,placeholder:"Pesquisar estudante por nome, e-mail ou nível..."}),u.length>0&&B.jsx("ul",{className:fh.dropdown,children:u.map(d=>B.jsxs("li",{onClick:()=>f(d),className:fh.dropdownItem,children:[d.name," - ",o(d.gradeLevel)," (",d.email,")"]},d.email))})]})}const gM="_studentListContainer_1iryv_1",yM="_title_1iryv_11",_M="_assignedList_1iryv_38",vM="_studentItem_1iryv_47",EM="_selected_1iryv_59",TM="_studentName_1iryv_64",bM="_studentGrade_1iryv_71",SM="_removeButton_1iryv_80",wM="_noStudentsMessage_1iryv_93",Gi={studentListContainer:gM,title:yM,assignedList:_M,studentItem:vM,selected:EM,studentName:TM,studentGrade:bM,removeButton:SM,noStudentsMessage:wM};function AM({assignedStudents:r,studentRubricGrades:e,maxGrade:n,selectedStudent:a,onAssignStudent:o,onRemoveStudent:u,onSelectStudent:f,allAvailableStudents:d}){const p=_=>{const w=parseInt(_);if(isNaN(w))return _;const S=w%10,x=w%100;if(x>=11&&x<=13)return`${_}th`;switch(S){case 1:return`${_}st`;case 2:return`${_}nd`;case 3:return`${_}rd`;default:return`${_}th`}},g=_=>{r.some(w=>w.email===_.email)?console.warn("Estudante já atribuído:",_.email):o(_)};return B.jsxs("aside",{className:Gi.studentListContainer,children:[B.jsx("h2",{className:Gi.title,children:"Assign Students"}),B.jsx(pM,{allStudents:d,onStudentSelect:g}),B.jsx("div",{className:Gi.assignedList,children:r.length>0?r.map(_=>{const w=a?.email===_.email,S=e.find(M=>M.studentEmail===_.email),x=S?S.currentGrade:0;return B.jsxs("div",{className:`${Gi.studentItem} ${w?Gi.selected:""}`,onClick:()=>f(_),children:[B.jsxs("span",{className:Gi.studentName,children:[_.name," - ",p(_.gradeLevel)]}),B.jsx("span",{className:Gi.studentGrade,children:x===0?"-":`${x} / ${n}`}),B.jsx("button",{onClick:M=>{M.stopPropagation(),u(_.email)},className:Gi.removeButton,children:"×"})]},_.email)}):B.jsx("p",{className:Gi.noStudentsMessage,children:"Nenhum estudante atribuído ainda."})})]})}const RM="_dropdown_1bh8h_1",CM="_trigger_1bh8h_6",IM="_menu_1bh8h_11",Hm={dropdown:RM,trigger:CM,menu:IM};function DM({trigger:r,children:e}){const[n,a]=z.useState(!1),o=z.useRef(null),u=()=>{a(d=>!d)},f=z.useCallback(d=>{o.current&&!o.current.contains(d.target)&&a(!1)},[]);return z.useEffect(()=>(document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}),[f]),B.jsxs("div",{className:Hm.dropdown,ref:o,children:[B.jsx("div",{className:Hm.trigger,onClick:u,children:r}),n&&B.jsx("div",{className:Hm.menu,children:e})]})}const NM="_rubricPage_1o4mc_1",OM="_rubricContent_1o4mc_7",xM="_header_1o4mc_11",MM="_headerContent_1o4mc_19",VM="_titleInput_1o4mc_27",PM="_divider_1o4mc_43",LM="_headerActions_1o4mc_49",kM="_optionsButton_1o4mc_55",UM="_shareButton_1o4mc_55",zM="_saveButton_1o4mc_92",jM="_cancelButton_1o4mc_92",Nn={rubricPage:NM,rubricContent:OM,header:xM,headerContent:MM,titleInput:VM,divider:PM,headerActions:LM,optionsButton:kM,shareButton:UM,saveButton:zM,cancelButton:jM},BM=()=>B.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[B.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"}),B.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"})]}),qM=()=>B.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[B.jsx("circle",{cx:"12",cy:"12",r:"1"}),B.jsx("circle",{cx:"19",cy:"12",r:"1"}),B.jsx("circle",{cx:"5",cy:"12",r:"1"})]});function HM(){const[r]=gT(),e=zs(),{db:n,userId:a,teacherEmail:o,teacherName:u,isAuthReady:f}=Wa(),[d,p]=z.useState(null),[g,_]=z.useState([]),[w,S]=z.useState(null),[x,M]=z.useState(!1),[Q,H]=z.useState(null),[q,ae]=z.useState(0),[ne,_e]=z.useState([]),[oe,k]=z.useState(!0),[N,E]=z.useState(null),[b,R]=z.useState([]),D=le=>{const ye=parseInt(le);if(isNaN(ye))return le;const Te=ye%10,be=ye%100;if(be>=11&&be<=13)return`${le}th`;switch(Te){case 1:return`${le}st`;case 2:return`${le}nd`;case 3:return`${le}rd`;default:return`${le}th`}};z.useEffect(()=>{if(!d)return;let le=[...d.rubricLines];for(let ye=le.length-1;ye>=0;ye--){const Te=le[ye],be=Te.categoryName.trim()==="",Le=Te.possibleScores.every(Ue=>Ue.text.trim()==="");if(be&&Le)le.pop();else break}ae(le.length*25),_e(le.map(ye=>ye.lineId))},[d?.rubricLines]),z.useEffect(()=>{if(!f||!n||!a)return;const ye=Ya(n,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/students`),Te=_f(ye),be=vf(Te,Le=>{const Ue=[];Le.forEach(xe=>{Ue.push({studentDocId:xe.id,...xe.data()})}),R(Ue)},Le=>{console.error("Erro ao buscar todos os estudantes para a página de Rubrica:",Le),E("Falha ao carregar estudantes disponíveis para atribuição.")});return()=>be()},[n,a,f]),z.useEffect(()=>{if(!d||b.length===0){_([]);return}const le=d.studentRubricGrade.map(ye=>b.find(be=>be.email===ye.studentEmail)).filter(ye=>ye!==void 0);_(le)},[d?.studentRubricGrade,b]);const O=()=>`${Date.now()} - ${Math.floor(Math.random()*1e3)+1}`,I=z.useCallback((le,ye)=>{const Te={teacherEmail:le||"unknown",teacherName:ye||"Unknown Teacher",studentRubricGrade:[],header:{title:"Untitled Rubric",gradeLevels:[]},rubricLines:[{lineId:O(),categoryName:"",possibleScores:[{score:25,text:""},{score:20,text:""},{score:15,text:""},{score:10,text:""}]}]};p(Te),k(!1)},[]);z.useEffect(()=>{if(!f||!n||!a)return;const le=r.get("id"),ye=r.get("isNew"),Te=r.get("student"),Le=Pa(n,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/users/${a}/rubrics`,le||"new");le?(async()=>{try{const xe=await dg(Le);if(xe.exists()){const He={id:xe.id,...xe.data()};if(p(He),M(ye==="true"),k(!1),Te&&b.length>0){const Ne=atob(Te),nt=b.find(Ye=>Ye.email===Ne);nt?S(nt):console.warn(`Estudante com e-mail ${Ne} não encontrado.`)}}else console.warn("Nenhum documento encontrado! Inicializando nova rubrica."),I(o,u),M(!0)}catch(xe){console.error("Erro ao buscar rubrica:",xe),E("Falha ao carregar rubrica. Por favor, tente novamente."),k(!1)}})():(I(o,u),M(!0))},[r,n,a,o,u,f,I,b]);const Ie=le=>{d&&p({...d,header:{...d.header,title:le.target.value}})},qe=(le,ye,Te,be)=>{if(!d)return;const Le=d.rubricLines.map(Ue=>{if(Ue.lineId===le){const xe={...Ue};if(ye==="categoryName")xe.categoryName=Te;else if(ye==="scoreText"&&be!==void 0){const He=[...Ue.possibleScores];He[be]={...He[be],text:Te},xe.possibleScores=He}return xe}return Ue});p({...d,rubricLines:Le})},G=()=>{if(!d)return;const le={lineId:O(),categoryName:"",possibleScores:[{score:25,text:""},{score:20,text:""},{score:15,text:""},{score:10,text:""}]};p({...d,rubricLines:[...d.rubricLines,le]})},re=async le=>{if(!d||!n||!a)return;const ye=d.rubricLines.findIndex(Ue=>Ue.lineId===le);if(ye===-1)return;const Te=d.rubricLines.filter(Ue=>Ue.lineId!==le),be=d.studentRubricGrade.map(Ue=>{const xe=Ue.rubricGradesLocation.filter(Ne=>Ne.categoryIndex!==ye).map(Ne=>({categoryIndex:Ne.categoryIndex>ye?Ne.categoryIndex-1:Ne.categoryIndex,gradingIndex:Ne.gradingIndex})),He=xe.reduce((Ne,nt)=>{const Ye=Te[nt.categoryIndex];return Ye&&Ye.possibleScores[nt.gradingIndex]&&ne.includes(Ye.lineId)?Ne+Ye.possibleScores[nt.gradingIndex].score:Ne},0);return{...Ue,rubricGradesLocation:xe,currentGrade:He}}),Le={...d,rubricLines:Te,studentRubricGrade:be};p(Le),await ie(Le)},me=async le=>{if(!d||!n||!a)return;if(!le.email){console.error("Tentativa de atribuir estudante sem e-mail:",le),E("Não é possível atribuir estudante: E-mail do estudante ausente.");return}if(d.studentRubricGrade.some(Le=>Le.studentEmail===le.email)){console.warn("Estudante já atribuído:",le.email);return}const ye={studentEmail:le.email,rubricGradesLocation:[],currentGrade:0},Te=[...d.studentRubricGrade,ye],be={...d,studentRubricGrade:Te};p(be),await ie(be),S(le)},ge=async le=>{if(!d||!n||!a)return;w?.email===le&&S(null);const ye=d.studentRubricGrade.filter(be=>be.studentEmail!==le),Te={...d,studentRubricGrade:ye};p(Te),await ie(Te)},V=async(le,ye)=>{if(x||!w||!d||!n||!a){w||alert("Por favor, selecione um estudante antes de atribuir notas.");return}const Te=d.rubricLines[le]?.lineId;if(!ne.includes(Te))return;const be=d.studentRubricGrade.map(Ue=>{if(Ue.studentEmail===w.email){const xe=[...Ue.rubricGradesLocation.filter(Ne=>Ne.categoryIndex!==le),{categoryIndex:le,gradingIndex:ye}],He=xe.reduce((Ne,nt)=>{const Ye=d.rubricLines[nt.categoryIndex];return Ye&&Ye.possibleScores[nt.gradingIndex]&&ne.includes(Ye.lineId)?Ne+Ye.possibleScores[nt.gradingIndex].score:Ne},0);return{...Ue,rubricGradesLocation:xe,currentGrade:He}}return Ue}),Le={...d,studentRubricGrade:be};p(Le),await ie(Le)},X=()=>{H(d),M(!0)},ie=async le=>{const ye=le||d;if(!n||!a||!ye||!o||!u){E("Informações do usuário (e-mail/nome) não disponíveis ou dados da rubrica ausentes. Não é possível salvar.");return}E(null);const Te=typeof __app_id<"u"?__app_id:"default-app-id";try{const{id:be,...Le}=ye,Ue={...Le,teacherEmail:o,teacherName:u};if(ye.id){const xe=Pa(n,`artifacts/${Te}/users/${a}/rubrics`,ye.id);await _p(xe,Ue)}else{const xe=Ya(n,`artifacts/${Te}/users/${a}/rubrics`),He=Pa(xe);await _p(He,{...Ue,id:He.id}),p(Ne=>Ne?{...Ne,id:He.id}:null),e(`/rubric?id=${He.id}`)}M(!1),H(null)}catch(be){console.error("Erro ao salvar rubrica: ",be),E("Falha ao salvar rubrica. Por favor, tente novamente.")}finally{}},Z=async()=>{if(!(!n||!a||!d||!d.id)&&window.confirm("Tem certeza que deseja excluir esta rubrica?")){k(!0),E(null);const le=typeof __app_id<"u"?__app_id:"default-app-id";try{const ye=Pa(n,`artifacts/${le}/users/${a}/rubrics`,d.id);await CN(ye),alert("Rubrica excluída com sucesso!"),e("/")}catch(ye){console.error("Erro ao excluir rubrica: ",ye),E("Falha ao excluir rubrica. Por favor, tente novamente.")}finally{k(!1)}}},Ee=()=>{if(!d||!d.id){alert("Por favor, salve a rubrica antes de compartilhar.");return}if(!w||!w.email||!a){alert("Por favor, selecione um estudante e certifique-se de que o professor está logado para compartilhar a rubrica.");return}const le=btoa(w.email),ye=`${window.location.origin}/rubricFeedback?id=${d.id}&student=${le}&teacherUid=${a}`,Te=document.createElement("textarea");Te.value=ye,document.body.appendChild(Te),Te.select(),document.execCommand("copy"),document.body.removeChild(Te),alert(`Link de compartilhamento copiado! 
${ye}`)},De=()=>{Q&&p(Q),M(!1),H(null)};if(oe)return B.jsx("div",{className:Nn.rubricPage,children:"Carregando rubrica..."});if(N)return B.jsxs("div",{className:Nn.rubricPage,style:{color:"red"},children:["Erro: ",N]});if(!d)return B.jsx("div",{className:Nn.rubricPage,children:"Nenhum dado de rubrica disponível."});const Se=d.studentRubricGrade.find(le=>le.studentEmail===w?.email),mt=Se?.rubricGradesLocation;return B.jsxs("div",{className:Nn.rubricPage,children:[B.jsxs("div",{className:Nn.rubricContent,children:[B.jsxs("header",{className:Nn.header,children:[B.jsxs("div",{className:Nn.headerContent,children:[B.jsx("input",{type:"text",value:d.header.title,onChange:Ie,className:Nn.titleInput,placeholder:"Rubrica sem título",readOnly:!x}),w&&Se&&!x&&B.jsxs("div",{className:Nn.gradingStudentInfo,children:[w.name," - ",D(w.gradeLevel),": "," ",B.jsx("span",{className:Nn.gradePill,children:B.jsx("strong",{children:Se.currentGrade===0?"-":`${Se.currentGrade} / ${q}`})})]})]}),B.jsx("div",{className:Nn.headerActions,children:x?B.jsxs(B.Fragment,{children:[B.jsx("button",{onClick:()=>ie(),className:Nn.saveButton,children:"Salvar Alterações"}),B.jsx("button",{onClick:De,className:Nn.cancelButton,children:"Cancelar"})]}):B.jsxs(B.Fragment,{children:[B.jsx("button",{onClick:Ee,className:Nn.shareButton,"aria-label":"Compartilhar Rubrica",disabled:!d.id||!w||!a,children:B.jsx(BM,{})}),B.jsxs(DM,{trigger:B.jsx("button",{className:Nn.optionsButton,"aria-label":"Opções da Rubrica",children:B.jsx(qM,{})}),children:[B.jsx("button",{onClick:X,children:"Editar"}),B.jsx("button",{onClick:Z,children:"Excluir"})]})]})})]}),B.jsx("hr",{className:Nn.divider}),B.jsx(FS,{rubricLines:d.rubricLines,selectedStudentGrades:mt,editionMode:x,onAddCategory:G,onRemoveCategory:re,onGradeSelect:V,onRubricLineChange:qe,gradableLineIds:ne})]}),B.jsx("div",{className:Nn.studentListSidebar,children:B.jsx(AM,{assignedStudents:g,studentRubricGrades:d.studentRubricGrade,maxGrade:q,selectedStudent:w,onAssignStudent:me,onRemoveStudent:ge,onSelectStudent:S,allAvailableStudents:b})})]})}var Rh={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var FM=Rh.exports,H0;function GM(){return H0||(H0=1,function(r,e){((n,a)=>{r.exports=a()})(FM,function n(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},o,u=!a.document&&!!a.postMessage,f=a.IS_PAPA_WORKER||!1,d={},p=0,g={};function _(E){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(b){var R=oe(b);R.chunkSize=parseInt(R.chunkSize),b.step||b.chunk||(R.chunkSize=null),this._handle=new Q(R),(this._handle.streamer=this)._config=R}).call(this,E),this.parseChunk=function(b,R){var D=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<D){let I=this._config.newline;I||(O=this._config.quoteChar||'"',I=this._handle.guessLineEndings(b,O)),b=[...b.split(I).slice(D)].join(I)}this.isFirstChunk&&N(this._config.beforeFirstChunk)&&(O=this._config.beforeFirstChunk(b))!==void 0&&(b=O),this.isFirstChunk=!1,this._halted=!1;var D=this._partialLine+b,O=(this._partialLine="",this._handle.parse(D,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(b=O.meta.cursor,D=(this._finished||(this._partialLine=D.substring(b-this._baseIndex),this._baseIndex=b),O&&O.data&&(this._rowCount+=O.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),f)a.postMessage({results:O,workerId:g.WORKER_ID,finished:D});else if(N(this._config.chunk)&&!R){if(this._config.chunk(O,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=O=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(O.data),this._completeResults.errors=this._completeResults.errors.concat(O.errors),this._completeResults.meta=O.meta),this._completed||!D||!N(this._config.complete)||O&&O.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),D||O&&O.meta.paused||this._nextChunk(),O}this._halted=!0},this._sendError=function(b){N(this._config.error)?this._config.error(b):f&&this._config.error&&a.postMessage({workerId:g.WORKER_ID,error:b,finished:!1})}}function w(E){var b;(E=E||{}).chunkSize||(E.chunkSize=g.RemoteChunkSize),_.call(this,E),this._nextChunk=u?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(R){this._input=R,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(b=new XMLHttpRequest,this._config.withCredentials&&(b.withCredentials=this._config.withCredentials),u||(b.onload=k(this._chunkLoaded,this),b.onerror=k(this._chunkError,this)),b.open(this._config.downloadRequestBody?"POST":"GET",this._input,!u),this._config.downloadRequestHeaders){var R,D=this._config.downloadRequestHeaders;for(R in D)b.setRequestHeader(R,D[R])}var O;this._config.chunkSize&&(O=this._start+this._config.chunkSize-1,b.setRequestHeader("Range","bytes="+this._start+"-"+O));try{b.send(this._config.downloadRequestBody)}catch(I){this._chunkError(I.message)}u&&b.status===0&&this._chunkError()}},this._chunkLoaded=function(){b.readyState===4&&(b.status<200||400<=b.status?this._chunkError():(this._start+=this._config.chunkSize||b.responseText.length,this._finished=!this._config.chunkSize||this._start>=(R=>(R=R.getResponseHeader("Content-Range"))!==null?parseInt(R.substring(R.lastIndexOf("/")+1)):-1)(b),this.parseChunk(b.responseText)))},this._chunkError=function(R){R=b.statusText||R,this._sendError(new Error(R))}}function S(E){(E=E||{}).chunkSize||(E.chunkSize=g.LocalChunkSize),_.call(this,E);var b,R,D=typeof FileReader<"u";this.stream=function(O){this._input=O,R=O.slice||O.webkitSlice||O.mozSlice,D?((b=new FileReader).onload=k(this._chunkLoaded,this),b.onerror=k(this._chunkError,this)):b=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var O=this._input,I=(this._config.chunkSize&&(I=Math.min(this._start+this._config.chunkSize,this._input.size),O=R.call(O,this._start,I)),b.readAsText(O,this._config.encoding));D||this._chunkLoaded({target:{result:I}})},this._chunkLoaded=function(O){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(O.target.result)},this._chunkError=function(){this._sendError(b.error)}}function x(E){var b;_.call(this,E=E||{}),this.stream=function(R){return b=R,this._nextChunk()},this._nextChunk=function(){var R,D;if(!this._finished)return R=this._config.chunkSize,b=R?(D=b.substring(0,R),b.substring(R)):(D=b,""),this._finished=!b,this.parseChunk(D)}}function M(E){_.call(this,E=E||{});var b=[],R=!0,D=!1;this.pause=function(){_.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){_.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(O){this._input=O,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){D&&b.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),b.length?this.parseChunk(b.shift()):R=!0},this._streamData=k(function(O){try{b.push(typeof O=="string"?O:O.toString(this._config.encoding)),R&&(R=!1,this._checkIsFinished(),this.parseChunk(b.shift()))}catch(I){this._streamError(I)}},this),this._streamError=k(function(O){this._streamCleanUp(),this._sendError(O)},this),this._streamEnd=k(function(){this._streamCleanUp(),D=!0,this._streamData("")},this),this._streamCleanUp=k(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Q(E){var b,R,D,O,I=Math.pow(2,53),Ie=-I,qe=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,G=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,re=this,me=0,ge=0,V=!1,X=!1,ie=[],Z={data:[],errors:[],meta:{}};function Ee(le){return E.skipEmptyLines==="greedy"?le.join("").trim()==="":le.length===1&&le[0].length===0}function De(){if(Z&&D&&(mt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+g.DefaultDelimiter+"'"),D=!1),E.skipEmptyLines&&(Z.data=Z.data.filter(function(Le){return!Ee(Le)})),Se()){let Le=function(Ue,xe){N(E.transformHeader)&&(Ue=E.transformHeader(Ue,xe)),ie.push(Ue)};var be=Le;if(Z)if(Array.isArray(Z.data[0])){for(var le=0;Se()&&le<Z.data.length;le++)Z.data[le].forEach(Le);Z.data.splice(0,1)}else Z.data.forEach(Le)}function ye(Le,Ue){for(var xe=E.header?{}:[],He=0;He<Le.length;He++){var Ne=He,nt=Le[He],nt=((Ye,Et)=>(Dt=>(E.dynamicTypingFunction&&E.dynamicTyping[Dt]===void 0&&(E.dynamicTyping[Dt]=E.dynamicTypingFunction(Dt)),(E.dynamicTyping[Dt]||E.dynamicTyping)===!0))(Ye)?Et==="true"||Et==="TRUE"||Et!=="false"&&Et!=="FALSE"&&((Dt=>{if(qe.test(Dt)&&(Dt=parseFloat(Dt),Ie<Dt&&Dt<I))return 1})(Et)?parseFloat(Et):G.test(Et)?new Date(Et):Et===""?null:Et):Et)(Ne=E.header?He>=ie.length?"__parsed_extra":ie[He]:Ne,nt=E.transform?E.transform(nt,Ne):nt);Ne==="__parsed_extra"?(xe[Ne]=xe[Ne]||[],xe[Ne].push(nt)):xe[Ne]=nt}return E.header&&(He>ie.length?mt("FieldMismatch","TooManyFields","Too many fields: expected "+ie.length+" fields but parsed "+He,ge+Ue):He<ie.length&&mt("FieldMismatch","TooFewFields","Too few fields: expected "+ie.length+" fields but parsed "+He,ge+Ue)),xe}var Te;Z&&(E.header||E.dynamicTyping||E.transform)&&(Te=1,!Z.data.length||Array.isArray(Z.data[0])?(Z.data=Z.data.map(ye),Te=Z.data.length):Z.data=ye(Z.data,0),E.header&&Z.meta&&(Z.meta.fields=ie),ge+=Te)}function Se(){return E.header&&ie.length===0}function mt(le,ye,Te,be){le={type:le,code:ye,message:Te},be!==void 0&&(le.row=be),Z.errors.push(le)}N(E.step)&&(O=E.step,E.step=function(le){Z=le,Se()?De():(De(),Z.data.length!==0&&(me+=le.data.length,E.preview&&me>E.preview?R.abort():(Z.data=Z.data[0],O(Z,re))))}),this.parse=function(le,ye,Te){var be=E.quoteChar||'"',be=(E.newline||(E.newline=this.guessLineEndings(le,be)),D=!1,E.delimiter?N(E.delimiter)&&(E.delimiter=E.delimiter(le),Z.meta.delimiter=E.delimiter):((be=((Le,Ue,xe,He,Ne)=>{var nt,Ye,Et,Dt;Ne=Ne||[",","	","|",";",g.RECORD_SEP,g.UNIT_SEP];for(var Vn=0;Vn<Ne.length;Vn++){for(var Gt,yn=Ne[Vn],zt=0,un=0,Ge=0,ze=(Et=void 0,new q({comments:He,delimiter:yn,newline:Ue,preview:10}).parse(Le)),Lt=0;Lt<ze.data.length;Lt++)xe&&Ee(ze.data[Lt])?Ge++:(Gt=ze.data[Lt].length,un+=Gt,Et===void 0?Et=Gt:0<Gt&&(zt+=Math.abs(Gt-Et),Et=Gt));0<ze.data.length&&(un/=ze.data.length-Ge),(Ye===void 0||zt<=Ye)&&(Dt===void 0||Dt<un)&&1.99<un&&(Ye=zt,nt=yn,Dt=un)}return{successful:!!(E.delimiter=nt),bestDelimiter:nt}})(le,E.newline,E.skipEmptyLines,E.comments,E.delimitersToGuess)).successful?E.delimiter=be.bestDelimiter:(D=!0,E.delimiter=g.DefaultDelimiter),Z.meta.delimiter=E.delimiter),oe(E));return E.preview&&E.header&&be.preview++,b=le,R=new q(be),Z=R.parse(b,ye,Te),De(),V?{meta:{paused:!0}}:Z||{meta:{paused:!1}}},this.paused=function(){return V},this.pause=function(){V=!0,R.abort(),b=N(E.chunk)?"":b.substring(R.getCharIndex())},this.resume=function(){re.streamer._halted?(V=!1,re.streamer.parseChunk(b,!0)):setTimeout(re.resume,3)},this.aborted=function(){return X},this.abort=function(){X=!0,R.abort(),Z.meta.aborted=!0,N(E.complete)&&E.complete(Z),b=""},this.guessLineEndings=function(Le,be){Le=Le.substring(0,1048576);var be=new RegExp(H(be)+"([^]*?)"+H(be),"gm"),Te=(Le=Le.replace(be,"")).split("\r"),be=Le.split(`
`),Le=1<be.length&&be[0].length<Te[0].length;if(Te.length===1||Le)return`
`;for(var Ue=0,xe=0;xe<Te.length;xe++)Te[xe][0]===`
`&&Ue++;return Ue>=Te.length/2?`\r
`:"\r"}}function H(E){return E.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function q(E){var b=(E=E||{}).delimiter,R=E.newline,D=E.comments,O=E.step,I=E.preview,Ie=E.fastMode,qe=null,G=!1,re=E.quoteChar==null?'"':E.quoteChar,me=re;if(E.escapeChar!==void 0&&(me=E.escapeChar),(typeof b!="string"||-1<g.BAD_DELIMITERS.indexOf(b))&&(b=","),D===b)throw new Error("Comment character same as delimiter");D===!0?D="#":(typeof D!="string"||-1<g.BAD_DELIMITERS.indexOf(D))&&(D=!1),R!==`
`&&R!=="\r"&&R!==`\r
`&&(R=`
`);var ge=0,V=!1;this.parse=function(X,ie,Z){if(typeof X!="string")throw new Error("Input must be a string");var Ee=X.length,De=b.length,Se=R.length,mt=D.length,le=N(O),ye=[],Te=[],be=[],Le=ge=0;if(!X)return zt();if(Ie||Ie!==!1&&X.indexOf(re)===-1){for(var Ue=X.split(R),xe=0;xe<Ue.length;xe++){if(be=Ue[xe],ge+=be.length,xe!==Ue.length-1)ge+=R.length;else if(Z)return zt();if(!D||be.substring(0,mt)!==D){if(le){if(ye=[],Dt(be.split(b)),un(),V)return zt()}else Dt(be.split(b));if(I&&I<=xe)return ye=ye.slice(0,I),zt(!0)}}return zt()}for(var He=X.indexOf(b,ge),Ne=X.indexOf(R,ge),nt=new RegExp(H(me)+H(re),"g"),Ye=X.indexOf(re,ge);;)if(X[ge]===re)for(Ye=ge,ge++;;){if((Ye=X.indexOf(re,Ye+1))===-1)return Z||Te.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ye.length,index:ge}),Gt();if(Ye===Ee-1)return Gt(X.substring(ge,Ye).replace(nt,re));if(re===me&&X[Ye+1]===me)Ye++;else if(re===me||Ye===0||X[Ye-1]!==me){He!==-1&&He<Ye+1&&(He=X.indexOf(b,Ye+1));var Et=Vn((Ne=Ne!==-1&&Ne<Ye+1?X.indexOf(R,Ye+1):Ne)===-1?He:Math.min(He,Ne));if(X.substr(Ye+1+Et,De)===b){be.push(X.substring(ge,Ye).replace(nt,re)),X[ge=Ye+1+Et+De]!==re&&(Ye=X.indexOf(re,ge)),He=X.indexOf(b,ge),Ne=X.indexOf(R,ge);break}if(Et=Vn(Ne),X.substring(Ye+1+Et,Ye+1+Et+Se)===R){if(be.push(X.substring(ge,Ye).replace(nt,re)),yn(Ye+1+Et+Se),He=X.indexOf(b,ge),Ye=X.indexOf(re,ge),le&&(un(),V))return zt();if(I&&ye.length>=I)return zt(!0);break}Te.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ye.length,index:ge}),Ye++}}else if(D&&be.length===0&&X.substring(ge,ge+mt)===D){if(Ne===-1)return zt();ge=Ne+Se,Ne=X.indexOf(R,ge),He=X.indexOf(b,ge)}else if(He!==-1&&(He<Ne||Ne===-1))be.push(X.substring(ge,He)),ge=He+De,He=X.indexOf(b,ge);else{if(Ne===-1)break;if(be.push(X.substring(ge,Ne)),yn(Ne+Se),le&&(un(),V))return zt();if(I&&ye.length>=I)return zt(!0)}return Gt();function Dt(Ge){ye.push(Ge),Le=ge}function Vn(Ge){var ze=0;return ze=Ge!==-1&&(Ge=X.substring(Ye+1,Ge))&&Ge.trim()===""?Ge.length:ze}function Gt(Ge){return Z||(Ge===void 0&&(Ge=X.substring(ge)),be.push(Ge),ge=Ee,Dt(be),le&&un()),zt()}function yn(Ge){ge=Ge,Dt(be),be=[],Ne=X.indexOf(R,ge)}function zt(Ge){if(E.header&&!ie&&ye.length&&!G){var ze=ye[0],Lt=Object.create(null),Bt=new Set(ze);let Ti=!1;for(let cn=0;cn<ze.length;cn++){let Xt=ze[cn];if(Lt[Xt=N(E.transformHeader)?E.transformHeader(Xt,cn):Xt]){let Pn,er=Lt[Xt];for(;Pn=Xt+"_"+er,er++,Bt.has(Pn););Bt.add(Pn),ze[cn]=Pn,Lt[Xt]++,Ti=!0,(qe=qe===null?{}:qe)[Pn]=Xt}else Lt[Xt]=1,ze[cn]=Xt;Bt.add(Xt)}Ti&&console.warn("Duplicate headers found and renamed."),G=!0}return{data:ye,errors:Te,meta:{delimiter:b,linebreak:R,aborted:V,truncated:!!Ge,cursor:Le+(ie||0),renamedHeaders:qe}}}function un(){O(zt()),ye=[],Te=[]}},this.abort=function(){V=!0},this.getCharIndex=function(){return ge}}function ae(E){var b=E.data,R=d[b.workerId],D=!1;if(b.error)R.userError(b.error,b.file);else if(b.results&&b.results.data){var O={abort:function(){D=!0,ne(b.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:_e,resume:_e};if(N(R.userStep)){for(var I=0;I<b.results.data.length&&(R.userStep({data:b.results.data[I],errors:b.results.errors,meta:b.results.meta},O),!D);I++);delete b.results}else N(R.userChunk)&&(R.userChunk(b.results,O,b.file),delete b.results)}b.finished&&!D&&ne(b.workerId,b.results)}function ne(E,b){var R=d[E];N(R.userComplete)&&R.userComplete(b),R.terminate(),delete d[E]}function _e(){throw new Error("Not implemented.")}function oe(E){if(typeof E!="object"||E===null)return E;var b,R=Array.isArray(E)?[]:{};for(b in E)R[b]=oe(E[b]);return R}function k(E,b){return function(){E.apply(b,arguments)}}function N(E){return typeof E=="function"}return g.parse=function(E,b){var R=(b=b||{}).dynamicTyping||!1;if(N(R)&&(b.dynamicTypingFunction=R,R={}),b.dynamicTyping=R,b.transform=!!N(b.transform)&&b.transform,!b.worker||!g.WORKERS_SUPPORTED)return R=null,g.NODE_STREAM_INPUT,typeof E=="string"?(E=(D=>D.charCodeAt(0)!==65279?D:D.slice(1))(E),R=new(b.download?w:x)(b)):E.readable===!0&&N(E.read)&&N(E.on)?R=new M(b):(a.File&&E instanceof File||E instanceof Object)&&(R=new S(b)),R.stream(E);(R=(()=>{var D;return!!g.WORKERS_SUPPORTED&&(D=(()=>{var O=a.URL||a.webkitURL||null,I=n.toString();return g.BLOB_URL||(g.BLOB_URL=O.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",I,")();"],{type:"text/javascript"})))})(),(D=new a.Worker(D)).onmessage=ae,D.id=p++,d[D.id]=D)})()).userStep=b.step,R.userChunk=b.chunk,R.userComplete=b.complete,R.userError=b.error,b.step=N(b.step),b.chunk=N(b.chunk),b.complete=N(b.complete),b.error=N(b.error),delete b.worker,R.postMessage({input:E,config:b,workerId:R.id})},g.unparse=function(E,b){var R=!1,D=!0,O=",",I=`\r
`,Ie='"',qe=Ie+Ie,G=!1,re=null,me=!1,ge=((()=>{if(typeof b=="object"){if(typeof b.delimiter!="string"||g.BAD_DELIMITERS.filter(function(ie){return b.delimiter.indexOf(ie)!==-1}).length||(O=b.delimiter),typeof b.quotes!="boolean"&&typeof b.quotes!="function"&&!Array.isArray(b.quotes)||(R=b.quotes),typeof b.skipEmptyLines!="boolean"&&typeof b.skipEmptyLines!="string"||(G=b.skipEmptyLines),typeof b.newline=="string"&&(I=b.newline),typeof b.quoteChar=="string"&&(Ie=b.quoteChar),typeof b.header=="boolean"&&(D=b.header),Array.isArray(b.columns)){if(b.columns.length===0)throw new Error("Option columns is empty");re=b.columns}b.escapeChar!==void 0&&(qe=b.escapeChar+Ie),b.escapeFormulae instanceof RegExp?me=b.escapeFormulae:typeof b.escapeFormulae=="boolean"&&b.escapeFormulae&&(me=/^[=+\-@\t\r].*$/)}})(),new RegExp(H(Ie),"g"));if(typeof E=="string"&&(E=JSON.parse(E)),Array.isArray(E)){if(!E.length||Array.isArray(E[0]))return V(null,E,G);if(typeof E[0]=="object")return V(re||Object.keys(E[0]),E,G)}else if(typeof E=="object")return typeof E.data=="string"&&(E.data=JSON.parse(E.data)),Array.isArray(E.data)&&(E.fields||(E.fields=E.meta&&E.meta.fields||re),E.fields||(E.fields=Array.isArray(E.data[0])?E.fields:typeof E.data[0]=="object"?Object.keys(E.data[0]):[]),Array.isArray(E.data[0])||typeof E.data[0]=="object"||(E.data=[E.data])),V(E.fields||[],E.data||[],G);throw new Error("Unable to serialize unrecognized input");function V(ie,Z,Ee){var De="",Se=(typeof ie=="string"&&(ie=JSON.parse(ie)),typeof Z=="string"&&(Z=JSON.parse(Z)),Array.isArray(ie)&&0<ie.length),mt=!Array.isArray(Z[0]);if(Se&&D){for(var le=0;le<ie.length;le++)0<le&&(De+=O),De+=X(ie[le],le);0<Z.length&&(De+=I)}for(var ye=0;ye<Z.length;ye++){var Te=(Se?ie:Z[ye]).length,be=!1,Le=Se?Object.keys(Z[ye]).length===0:Z[ye].length===0;if(Ee&&!Se&&(be=Ee==="greedy"?Z[ye].join("").trim()==="":Z[ye].length===1&&Z[ye][0].length===0),Ee==="greedy"&&Se){for(var Ue=[],xe=0;xe<Te;xe++){var He=mt?ie[xe]:xe;Ue.push(Z[ye][He])}be=Ue.join("").trim()===""}if(!be){for(var Ne=0;Ne<Te;Ne++){0<Ne&&!Le&&(De+=O);var nt=Se&&mt?ie[Ne]:Ne;De+=X(Z[ye][nt],Ne)}ye<Z.length-1&&(!Ee||0<Te&&!Le)&&(De+=I)}}return De}function X(ie,Z){var Ee,De;return ie==null?"":ie.constructor===Date?JSON.stringify(ie).slice(1,25):(De=!1,me&&typeof ie=="string"&&me.test(ie)&&(ie="'"+ie,De=!0),Ee=ie.toString().replace(ge,qe),(De=De||R===!0||typeof R=="function"&&R(ie,Z)||Array.isArray(R)&&R[Z]||((Se,mt)=>{for(var le=0;le<mt.length;le++)if(-1<Se.indexOf(mt[le]))return!0;return!1})(Ee,g.BAD_DELIMITERS)||-1<Ee.indexOf(O)||Ee.charAt(0)===" "||Ee.charAt(Ee.length-1)===" ")?Ie+Ee+Ie:Ee)}},g.RECORD_SEP="",g.UNIT_SEP="",g.BYTE_ORDER_MARK="\uFEFF",g.BAD_DELIMITERS=["\r",`
`,'"',g.BYTE_ORDER_MARK],g.WORKERS_SUPPORTED=!u&&!!a.Worker,g.NODE_STREAM_INPUT=1,g.LocalChunkSize=10485760,g.RemoteChunkSize=5242880,g.DefaultDelimiter=",",g.Parser=q,g.ParserHandle=Q,g.NetworkStreamer=w,g.FileStreamer=S,g.StringStreamer=x,g.ReadableStreamStreamer=M,a.jQuery&&((o=a.jQuery).fn.parse=function(E){var b=E.config||{},R=[];return this.each(function(I){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var Ie=0;Ie<this.files.length;Ie++)R.push({file:this.files[Ie],inputElem:this,instanceConfig:o.extend({},b)})}),D(),this;function D(){if(R.length===0)N(E.complete)&&E.complete();else{var I,Ie,qe,G,re=R[0];if(N(E.before)){var me=E.before(re.file,re.inputElem);if(typeof me=="object"){if(me.action==="abort")return I="AbortError",Ie=re.file,qe=re.inputElem,G=me.reason,void(N(E.error)&&E.error({name:I},Ie,qe,G));if(me.action==="skip")return void O();typeof me.config=="object"&&(re.instanceConfig=o.extend(re.instanceConfig,me.config))}else if(me==="skip")return void O()}var ge=re.instanceConfig.complete;re.instanceConfig.complete=function(V){N(ge)&&ge(V,re.file,re.inputElem),O()},g.parse(re.file,re.instanceConfig)}}function O(){R.splice(0,1),D()}}),f&&(a.onmessage=function(E){E=E.data,g.WORKER_ID===void 0&&E&&(g.WORKER_ID=E.workerId),typeof E.input=="string"?a.postMessage({workerId:g.WORKER_ID,results:g.parse(E.input,E.config),finished:!0}):(a.File&&E.input instanceof File||E.input instanceof Object)&&(E=g.parse(E.input,E.config))&&a.postMessage({workerId:g.WORKER_ID,results:E,finished:!0})}),(w.prototype=Object.create(_.prototype)).constructor=w,(S.prototype=Object.create(_.prototype)).constructor=S,(x.prototype=Object.create(x.prototype)).constructor=x,(M.prototype=Object.create(_.prototype)).constructor=M,g})}(Rh)),Rh.exports}var $M=GM();const KM=p1($M),QM="_adminContainer_f4a24_1",YM="_title_f4a24_10",XM="_importSection_f4a24_17",WM="_studentListSection_f4a24_17",ZM="_fileInput_f4a24_32",JM="_importButton_f4a24_42",e4="_importMessage_f4a24_62",t4="_errorMessage_f4a24_62",zr={adminContainer:QM,title:YM,importSection:XM,studentListSection:WM,fileInput:ZM,importButton:JM,importMessage:e4,errorMessage:t4};function n4(){const{db:r,userId:e,isAuthReady:n}=Wa(),[a,o]=z.useState(null),[u,f]=z.useState(!1),[d,p]=z.useState(null),[g,_]=z.useState([]),[w,S]=z.useState(!0),[x,M]=z.useState(null);z.useEffect(()=>{if(!n||!r||!e)return;const ne=Ya(r,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/students`),_e=_f(ne),oe=vf(_e,k=>{const N=[];k.forEach(E=>{N.push({studentDocId:E.id,...E.data()})}),_(N),S(!1)},k=>{console.error("Erro ao buscar estudantes:",k),M("Falha ao carregar estudantes. Por favor, verifique as permissões."),S(!1)});return()=>oe()},[r,e,n]);const Q=ae=>{ae.target.files&&ae.target.files[0]?(o(ae.target.files[0]),p(null)):o(null)},H=async()=>{if(!a){p("Por favor, selecione um arquivo CSV primeiro.");return}if(!r||!e){p("Banco de dados não pronto. Por favor, tente novamente.");return}f(!0),p("Importando estudantes...");const ne=Ya(r,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/students`);KM.parse(a,{header:!0,skipEmptyLines:!0,complete:async _e=>{const oe=[];let k=0,N=0;for(const E of _e.data){const b=String(E.email||"").trim(),R=String(E.full_name||"N/A").trim(),D=String(E.student_id||`temp-${Date.now()}-${Math.random().toString(36).substring(7)}`).trim(),O=String(E.grade_level||"N/A").trim();b&&R&&O?oe.push({studentDocId:b,name:R,studentId:D,email:b,gradeLevel:O}):(console.warn("Pulando linha devido a dados obrigatórios ausentes (email, full_name, ou grade_level):",E),N++)}if(oe.length===0){p("Nenhum estudante válido encontrado no CSV para importar."),f(!1);return}for(const E of oe)try{const b=Pa(ne,E.email),{studentDocId:R,...D}=E;await _p(b,D),k++}catch(b){console.error("Erro ao adicionar/atualizar estudante no Firestore:",E,b),N++}p(`Importação finalizada. ${k} estudantes importados com sucesso. ${N} estudantes falharam na importação.`),f(!1),o(null),document.getElementById("csvFileInput")&&(document.getElementById("csvFileInput").value="")},error:_e=>{console.error("Erro de parseamento CSV:",_e),p(`Erro ao parsear CSV: ${_e.message}`),f(!1)}})},q=ae=>{const ne=parseInt(ae);if(isNaN(ne))return ae;const _e=ne%10,oe=ne%100;if(oe>=11&&oe<=13)return`${ae}th`;switch(_e){case 1:return`${ae}st`;case 2:return`${ae}nd`;case 3:return`${ae}rd`;default:return`${ae}th`}};return B.jsxs("div",{className:zr.adminContainer,children:[B.jsx("h1",{className:zr.title,children:"Painel de Administração"}),B.jsxs("section",{className:zr.importSection,children:[B.jsx("h2",{children:"Importar Estudantes de CSV"}),B.jsxs("p",{className:zr.importHint,children:["Colunas CSV esperadas: ",B.jsx("strong",{children:"email"}),", ",B.jsx("strong",{children:"full_name"}),", ",B.jsx("strong",{children:"grade_level"})," (e opcionalmente ",B.jsx("strong",{children:"student_id"}),").",B.jsx("br",{}),"A coluna 'email' será usada como identificador único para cada estudante."]}),B.jsx("input",{type:"file",id:"csvFileInput",accept:".csv",onChange:Q,className:zr.fileInput}),B.jsx("button",{onClick:H,disabled:u||!a||!n||!r,className:zr.importButton,children:u?"Importando...":"Importar Estudantes"}),d&&B.jsx("p",{className:zr.importMessage,children:d})]}),B.jsxs("section",{className:zr.studentListSection,children:[B.jsx("h2",{children:"Estudantes Atuais"}),w?B.jsx("p",{children:"Carregando estudantes..."}):x?B.jsx("p",{className:zr.errorMessage,children:x}):g.length===0?B.jsx("p",{children:"Nenhum estudante encontrado. Importe alguns de um CSV!"}):B.jsx("div",{className:zr.studentTableContainer,children:B.jsxs("table",{className:zr.studentTable,children:[B.jsx("thead",{children:B.jsxs("tr",{children:[B.jsx("th",{children:"Email"}),B.jsx("th",{children:"Nome Completo"}),B.jsx("th",{children:"Nível de Ensino"}),B.jsx("th",{children:"ID do Estudante"})]})}),B.jsx("tbody",{children:g.map(ae=>B.jsxs("tr",{children:[B.jsx("td",{children:ae.email}),B.jsx("td",{children:ae.name}),B.jsx("td",{children:q(ae.gradeLevel)})," ",B.jsx("td",{children:ae.studentId})]},ae.studentDocId))})]})})]})]})}const r4="_feedbackContainer_16hi0_1",i4="_header_16hi0_11",a4="_headerContent_16hi0_19",s4="_title_16hi0_23",o4="_gradingStudentInfo_16hi0_30",l4="_gradePill_16hi0_38",u4="_divider_16hi0_47",ci={feedbackContainer:r4,header:i4,headerContent:a4,title:s4,gradingStudentInfo:o4,gradePill:l4,divider:u4};function c4(){const[r]=gT(),{db:e,isAuthReady:n}=Wa(),[a,o]=z.useState(null),[u,f]=z.useState(null),[d,p]=z.useState(0),[g,_]=z.useState([]),[w,S]=z.useState(!0),[x,M]=z.useState(null),[Q,H]=z.useState([]),q=oe=>{const k=parseInt(oe);if(isNaN(k))return oe;const N=k%10,E=k%100;if(E>=11&&E<=13)return`${oe}th`;switch(N){case 1:return`${oe}st`;case 2:return`${oe}nd`;case 3:return`${oe}rd`;default:return`${oe}th`}};if(z.useEffect(()=>{if(!a)return;let oe=[...a.rubricLines];for(let k=oe.length-1;k>=0;k--){const N=oe[k],E=N.categoryName.trim()==="",b=N.possibleScores.every(R=>R.text.trim()==="");if(E&&b)oe.pop();else break}p(oe.length*25),_(oe.map(k=>k.lineId))},[a?.rubricLines]),z.useEffect(()=>{if(!n||!e)return;const k=Ya(e,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/students`),N=_f(k),E=vf(N,b=>{const R=[];b.forEach(D=>{R.push({studentDocId:D.id,...D.data()})}),H(R)},b=>{console.error("Erro ao buscar todos os estudantes para a página de feedback:",b),M("Falha ao carregar informações de estudantes.")});return()=>E()},[e,n]),z.useEffect(()=>{if(!n||!e||Q.length===0)return;const oe=r.get("id"),k=r.get("student"),N=r.get("teacherUid");if(!oe||!k||!N){M("ID da rubrica, e-mail do estudante ou UID do professor ausente na URL."),S(!1);return}let E=null;try{E=atob(k)}catch(O){console.error("Erro ao decodificar e-mail do estudante:",O),M("Link de estudante inválido."),S(!1);return}const R=Pa(e,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/users/${N}/rubrics`,oe);(async()=>{try{const O=await dg(R);if(O.exists()){const I={id:O.id,...O.data()};o(I);const Ie=Q.find(qe=>qe.email===E);Ie?f(Ie):M(`Estudante com e-mail '${E}' não encontrado.`),S(!1)}else M("Rubrica não encontrada."),S(!1)}catch(O){console.error("Erro ao buscar rubrica para feedback:",O),M("Falha ao carregar rubrica. Verifique o link e as permissões."),S(!1)}})()},[r,e,n,Q]),w)return B.jsx("div",{className:ci.feedbackContainer,children:"Carregando feedback da rubrica..."});if(x)return B.jsxs("div",{className:ci.feedbackContainer,style:{color:"red"},children:["Erro: ",x]});if(!a||!u)return B.jsx("div",{className:ci.feedbackContainer,children:"Nenhum feedback de rubrica disponível para o estudante selecionado."});const ae=a.studentRubricGrade.find(oe=>oe.studentEmail===u.email),ne=ae?.rubricGradesLocation||[],_e=ae?.currentGrade||0;return B.jsxs("div",{className:ci.feedbackContainer,children:[B.jsx("header",{className:ci.header,children:B.jsxs("div",{className:ci.headerContent,children:[B.jsx("h1",{className:ci.title,children:a.header.title}),u&&B.jsxs("div",{className:ci.gradingStudentInfo,children:[u.name," - ",q(u.gradeLevel),": "," ",B.jsx("span",{className:ci.gradePill,children:B.jsx("strong",{children:_e===0?"-":`${_e} / ${d}`})})]})]})}),B.jsx("hr",{className:ci.divider}),B.jsx(FS,{rubricLines:a.rubricLines,selectedStudentGrades:ne,editionMode:!1,onAddCategory:()=>{},onRemoveCategory:()=>{},onGradeSelect:()=>{},onRubricLineChange:()=>{},gradableLineIds:g})]})}const h4="_appContainer_1d1kp_1",f4="_navbar_1d1kp_8",d4="_navBrand_1d1kp_18",m4="_signOutButton_1d1kp_31",p4="_content_1d1kp_46",ou={appContainer:h4,navbar:f4,navBrand:d4,signOutButton:m4,content:p4},g4=()=>B.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[B.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),B.jsx("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]});function y4(){const r=zs(),{auth:e,isAuthReady:n}=Wa(),a=async()=>{if(!e){console.error("Firebase Auth not initialized.");return}try{await qx(e),r("/login")}catch(o){console.error("Failed to sign out:",o)}};return B.jsxs("div",{className:ou.appContainer,children:[B.jsxs("nav",{className:ou.navbar,children:[B.jsxs(tf,{to:"/",className:ou.navBrand,children:[B.jsx(g4,{}),B.jsx("span",{children:"EAR Rubrics"})]}),n&&e?.currentUser&&B.jsx("button",{onClick:a,className:ou.signOutButton,children:"Sign Out"})]}),B.jsx("main",{className:ou.content,children:B.jsx(YA,{})})]})}function _4({children:r}){const{auth:e,isAuthReady:n}=Wa();return n?e?.currentUser?r:B.jsx(cT,{to:"/login"}):B.jsx("div",{children:"Carregando autenticação..."})}function v4({children:r}){const{db:e,userId:n,teacherEmail:a,isAuthReady:o}=Wa(),[u,f]=z.useState(!1),[d,p]=z.useState(!0);return z.useEffect(()=>{o&&e&&n&&a?(async()=>{const w=Pa(Ya(e,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/admins`),a);try{(await dg(w)).exists()?f(!0):f(!1)}catch(S){console.error("Erro ao verificar status de admin:",S),f(!1)}finally{p(!1)}})():o&&(!e||!n||!a)&&(f(!1),p(!1))},[e,n,a,o]),d?B.jsx("div",{children:"Verificando permissões de admin..."}):u?r:B.jsx(cT,{to:"/"})}const E4=TR([{path:"/login",element:B.jsx(Yx,{})},{path:"/rubricFeedback",element:B.jsx(c4,{})},{element:B.jsx(_4,{children:B.jsx(y4,{})}),children:[{path:"/",element:B.jsx(jx,{})},{path:"/rubric",element:B.jsx(HM,{})},{path:"/admin",element:B.jsx(v4,{children:B.jsx(n4,{})})}]}]);function T4(){return B.jsx(VR,{router:E4})}function b4(){return B.jsx(T4,{})}w1.createRoot(document.getElementById("root")).render(B.jsx(Ox,{children:B.jsx(b4,{})}));
